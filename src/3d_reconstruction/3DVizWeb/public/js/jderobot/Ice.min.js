(function(){var e=typeof window!=="undefined"?window:self;e.Ice=e.Ice||{};Ice.Slice=Ice.Slice||{};e.IceMX=e.IceMX||{};e.IceSSL=e.IceSSL||{};var t=Ice.Slice;(function(){var e=typeof window!=="undefined"?window:self;var t={module:function(t){var n=e[t];if(n===undefined){n={};e[t]=n}return n},require:function(t){return e},type:function(t){if(t===undefined){return undefined}var n=t.split(".");var i=e;for(var r=0,s=n.length;r<s;++r){i=i[n[r]];if(i===undefined){return undefined}}return i}};Ice.__require=function(){return e};Ice.Slice=Ice.Slice||{};Ice.__M=t})();(function(){var e=Ice.__M;var t=Ice.Slice;var n=function(e,t){if(e===t){return true}else if(e===null||e===undefined||t===null||t===undefined){return false}else if(e.prototype!==t.prototype){return false}else if(typeof e.equals=="function"){return e.equals(t)}else if(e instanceof Array){return i.equals(e,t,n)}return false};var i={clone:function(e){if(e===undefined){return e}else if(e===null){return[]}else{return e.slice()}},equals:function(e,t,i){if(e.length!=t.length){return false}var r,s,o=i||n;for(r=0,s=e.length;r<s;++r){if(!o.call(o,e[r],t[r])){return false}}return true},shuffle:function(e){for(var t=e.length;t>1;--t){var n=e[t-1];var i=Math.floor(Math.random()*t);e[t-1]=e[i];e[i]=n}},indexOf:function(e,t,n){if(n!==undefined&&n!==null){for(var i=0;i<e.length;++i){if(n.call(n,e[i],t)){return i}}}else{return e.indexOf(t)}return-1},filter:function(e,t,n){n=n===undefined?t:n;var i=[];for(var r=0;r<e.length;++r){if(t.call(n,e[r],r,e)){i.push(e[r])}}return i}};i.eq=n;t.defineSequence=function(t,n,i,r,s){var o=null;Object.defineProperty(t,n,{get:function(){if(o===null){o=Ice.StreamHelpers.generateSeqHelper(e.type(i),r,e.type(s))}return o}})};Ice.ArrayUtil=i})();(function(){Ice.Class=function(){var e;var t;var n;if(arguments.length==1){t=arguments[0]}else if(arguments.length==2){e=arguments[0];t=arguments[1]}if(t!==undefined){n=t.__init__;if(n){delete t.__init__}}var i=n||function(){};if(e!==undefined){i.prototype=new e;i.prototype.constructor=i}if(t!==undefined){for(var r in t){i.prototype[r]=t[r]}}return i}})();(function(){var e=Ice.Class;var t=function(e,n,i,r){r+="  ";if(n===null){return"\n"+r+e+": (null)"}if(n===undefined){return"\n"+r+e+": (undefined)"}if(e=="stack"||typeof n=="function"){return""}if(typeof n!="object"){return"\n"+r+e+': "'+n+'"'}if(i.indexOf(n)!=-1){return"\n"+r+e+": (recursive)"}i.push(n);var s="\n"+r+e+":";for(var o in n){if(e.indexOf("_")===0){continue}if(typeof n[o]=="function"){continue}s+=r+t(o,n[o],i,r)}return s};var n=e(Error,{__init__:function(e){this.cause=e}});Ice.ServantError=n;var i=e(Error,{__init__:function(e){if(e){this.ice_cause=e}},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready){return""}this._inToStringAlready=true;var e=this.ice_name();for(var n in this){if(n!="_inToStringAlready"){e+=t(n,this[n],[],"")}}if(Ice.__printStackTraces===true&&this.stack){e+="\n"+this.stack}this._inToStringAlready=false;return e}});i.captureStackTrace=function(e){var t=(new Error).stack;if(t!==undefined){Object.defineProperty(e,"stack",{get:function(){return t}})}};Ice.Exception=i;var r=e(i,{__init__:function(e){i.call(this,e);i.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=r;var s=Ice.Slice;s.defineLocalException=function(e,t,n){var i=e;i.prototype=new t;i.prototype.constructor=i;i.prototype.ice_name=function(){return n};return i};var o=e(i,{__init__:function(e){i.call(this,e);i.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null);c(this,e,this.__mostDerivedType());e.endWriteException()},__read:function(e){e.startReadException();a(this,e,this.__mostDerivedType());e.endReadException(false)},__usesClasses:function(){return false}});Ice.UserException=o;var c=function(e,t,n){if(n===undefined||n===o){return}t.startWriteSlice(n.__id,-1,n.__parent===o);if(n.prototype.__writeMemberImpl){n.prototype.__writeMemberImpl.call(e,t)}t.endWriteSlice();c(e,t,n.__parent)};var a=function(e,t,n){if(n===undefined||n===o){return}t.startReadSlice();if(n.prototype.__readMemberImpl){n.prototype.__readMemberImpl.call(e,t)}t.endReadSlice();a(e,t,n.__parent)};var u=function(e){e.startWriteException(this.__slicedData);c(this,e,this.__mostDerivedType());e.endWriteException()};var l=function(e){e.startReadException();a(this,e,this.__mostDerivedType());this.__slicedData=e.endReadException(true)};s.defineUserException=function(e,t,n,i,r,s,o){var c=e;c.__parent=t;c.prototype=new t;c.__id="::"+n;c.prototype.ice_name=function(){return n};c.prototype.constructor=c;c.prototype.__mostDerivedType=function(){return c};if(s){c.prototype.__write=u;c.prototype.__read=l}c.prototype.__writeMemberImpl=i;c.prototype.__readMemberImpl=r;if(o){c.prototype.__usesClasses=function(){return true}}return c}})();(function(){Ice.AsyncStatus={Queued:0,Sent:1}})();(function(){var e=Ice.Class({__init__:function(t,n){if(n<0||n>e.MAX_UINT32){throw new RangeError("Low word must be between 0 and 0xFFFFFFFF")}if(t<0||t>e.MAX_UINT32){throw new RangeError("High word must be between 0 and 0xFFFFFFFF")}this.high=t;this.low=n},hashCode:function(){return this.low},equals:function(t){if(this===t){return true}if(!(t instanceof e)){return false}return this.high===t.high&&this.low===t.low},toString:function(){return this.high+":"+this.low},toNumber:function(){if((this.high&e.SIGN_MASK)!==0){const t=~this.low>>>0;const n=~this.high>>>0;if(n>e.HIGH_MAX||n==e.HIGH_MAX&&t==e.MAX_UINT32){return Number.NEGATIVE_INFINITY}return-(n*e.HIGH_MASK+t+1)}else{if(this.high>e.HIGH_MAX){return Number.POSITIVE_INFINITY}return this.high*e.HIGH_MASK+this.low}}});e.MAX_UINT32=4294967295;e.SIGN_MASK=2147483648;e.HIGH_MASK=4294967296;e.HIGH_MAX=2097151;Ice.Long=e})();(function(){Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this);Ice.Exception.captureStackTrace(this);this.message=e}});Ice.Debug={assert:function(e,t){if(!e){console.log(t===undefined?"assertion failed":t);console.log(Error().stack);throw new Ice.AssertionFailedException(t===undefined?"assertion failed":t)}}}})();(function(){Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2}})();(function(){var e=Ice.Class({__init__:function(e,t){this._name=e;this._value=t},equals:function(e){if(this===e){return true}var t=Object.getPrototypeOf(this);if(!(e instanceof t.constructor)){return false}return this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;Object.defineProperty(t,"name",{enumerable:true,get:function(){return this._name}});Object.defineProperty(t,"value",{enumerable:true,get:function(){return this._value}});var n=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=n;var i=Ice.Slice;i.defineEnum=function(t){var i=function(t,n){e.call(this,t,n)};i.prototype=new e;i.prototype.constructor=i;var r=[];var s=0;var o=null;for(var c in t){var a=t[c][0],u=t[c][1];var l=new i(a,u);r[u]=l;if(!o){o=l}Object.defineProperty(i,a,{enumerable:true,value:l});if(u>s){s=u}}Object.defineProperty(i,"minWireSize",{get:function(){return 1}});i.__write=function(e,t){if(t){e.writeEnum(t)}else{e.writeEnum(o)}};i.__read=function(e){return e.readEnum(i)};i.__writeOpt=function(e,t,n){if(n!==undefined){if(e.writeOpt(t,Ice.OptionalFormat.Size)){i.__write(e,n)}}};i.__readOpt=function(e,t){return e.readOptEnum(t,i)};i.__helper=new n(i);Object.defineProperty(i,"valueOf",{value:function(e){if(e===undefined){return i}return r[e]}});Object.defineProperty(i,"maxValue",{value:s});Object.defineProperty(i.prototype,"maxValue",{value:s});return i}})();(function(){function e(){var e=(new Date).getTime();var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t=="x"?n:n&7|8).toString(16)});return t}Ice.generateUUID=e})();(function(){Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]])})();(function(){var e=Ice.Debug;Ice.StringUtil={findFirstOf:function(e,t,n){n=n===undefined?0:n;var i=e.length;for(var r=n;r<i;r++){var s=e.charAt(r);if(t.indexOf(s)!=-1){return r}}return-1},findFirstNotOf:function(e,t,n){n=n===undefined?0:n;var i=e.length;for(var r=n;r<i;r++){var s=e.charAt(r);if(t.indexOf(s)==-1){return r}}return-1},escapeString:function(e,n){n=n===undefined?null:n;var i,r;if(n!==null){for(i=0,r=n.length;i<r;++i){if(n.charCodeAt(i)<32||n.charCodeAt(i)>126){throw new Error("special characters must be in ASCII range 32-126")}}}var s=[],o;for(i=0,r=e.length;i<r;++i){o=e.charCodeAt(i);if(o<128){t(o,s,n)}else if(o>127&&o<2048){t(o>>6|192,s,n);t(o&63|128,s,n)}else{t(o>>12|224,s,n);t(o>>6&63|128,s,n);t(o&63|128,s,n)}}return s.join("")},unescapeString:function(t,n,i){n=n===undefined?0:n;i=i===undefined?t.length:i;e.assert(n>=0&&n<=i&&i<=t.length);var s=[];r(t,n,i,s);return s.join("")},splitString:function(e,t){var n=[];var i="";var r=0;var s=null;while(r<e.length){if(s===null&&(e.charAt(r)==='"'||e.charAt(r)==="'")){s=e.charAt(r++);continue}else if(s===null&&e.charAt(r)==="\\"&&r+1<e.length&&(e.charAt(r+1)==='"'||e.charAt(r+1)==="'")){++r}else if(s!==null&&e.charAt(r)==="\\"&&r+1<e.length&&e.charAt(r+1)===s){++r}else if(s!==null&&e.charAt(r)===s){++r;s=null;continue}else if(t.indexOf(e.charAt(r))!==-1){if(s===null){++r;if(i.length>0){n.push(i);i=""}continue}}if(r<e.length){i+=e.charAt(r++)}}if(i.length>0){n.push(i)}if(s!==null){return null}return n},checkQuote:function(e,t){t=t===undefined?0:t;var n=e.charAt(t);if(n=='"'||n=="'"){t++;var i=e.length;var r;while(t<i&&(r=e.indexOf(n,t))!=-1){if(e.charAt(r-1)!="\\"){return r}t=r+1}return-1}return 0},hashCode:function(e){var t=0;var n=e.length;for(var i=0;i<n;i++){t=31*t+e.charCodeAt(i)}return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t)){throw new Error("conversion of `"+e+"' to int failed")}return t}};function t(e,t,n){switch(e){case 92:{t.push("\\\\");break}case 39:{t.push("\\'");break}case 34:{t.push('\\"');break}case 8:{t.push("\\b");break}case 12:{t.push("\\f");break}case 10:{t.push("\\n");break}case 13:{t.push("\\r");break}case 9:{t.push("\\t");break}default:{if(!(e>=32&&e<=126)){t.push("\\");var i=e.toString(8);for(var r=i.length;r<3;r++){t.push("0")}t.push(i)}else{var s=String.fromCharCode(e);if(n!==null&&n.indexOf(s)!==-1){t.push("\\");t.push(s)}else{t.push(s)}}}}}function n(e,t){var n=e.charCodeAt(t);if(!(n>=32&&n<=126)){var i;if(t>0){i="character after `"+e.substring(0,t)+"'"}else{i="first character"}i+=" is not a printable ASCII character (ordinal "+n+")";throw new Error(i)}return n}function i(t,i,r,s){e.assert(i>=0);e.assert(r<=t.length);if(i>=r){throw new Error("EOF while decoding string")}var o;if(t.charAt(i)!="\\"){o=n(t,i++)}else{if(i+1==r){throw new Error("trailing backslash")}switch(t.charAt(++i)){case"\\":case"'":case'"':{o=t.charCodeAt(i++);break}case"b":{++i;o="\b".charCodeAt(0);break}case"f":{++i;o="\f".charCodeAt(0);break}case"n":{++i;o="\n".charCodeAt(0);break}case"r":{++i;o="\r".charCodeAt(0);break}case"t":{++i;o="\t".charCodeAt(0);break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{var c="01234567";var a=0;for(var u=0;u<3&&i<r;++u){var l=t.charAt(i++);if(c.indexOf(l)==-1){--i;break}a=a*8+parseInt(l)}if(a>255){var h="octal value \\"+a.toString(8)+" ("+a+") is out of range";throw new Error(h)}o=a;break}default:{o=n(t,i++);break}}}s.value=i;return o}function r(e,t,n,r){var s={value:0},o,c,a;while(t<n){o=i(e,t,n,s);t=s.value;if(o<128){r.push(String.fromCharCode(o))}else if(o>191&&o<224){c=i(e,t,n,s);t=s.value;r.push(String.fromCharCode((o&31)<<6|c&63))}else{c=i(e,t,n,s);t=s.value;a=i(e,t,n,s);t=s.value;r.push(String.fromCharCode((o&15)<<12|(c&63)<<6|a&63))}}}})();(function(){var e=Ice.__M;var t=Ice.StringUtil;function n(e,t,n,i,r){for(var s=e._table[r];s!==null;s=s._nextInBucket){if(s._hash===i&&e.keysEqual(t,s._key)){s._value=n;return undefined}}e.add(t,n,i,r);return undefined}function i(e,t){if(e===t){return true}if(e===undefined||e===null||t===undefined||t===null){return false}return e.equals(t)}function r(e,t){return e===t}var s=Ice.Class({__init__:function(e,t){var n=arguments;var i,o,c;if(typeof e=="function"){o=e;c=t}else if(e instanceof s){i=e;o=i.keyComparator;c=i.valueComparator}this._size=0;this._head=null;this._initialCapacity=32;this._loadFactor=.75;this._table=[];this._keyComparator=typeof o=="function"?o:r;this._valueComparator=typeof c=="function"?c:r;var a,u;if(i instanceof s&&i._size>0){this._threshold=i._threshold;u=i._table.length;this._table.length=u;for(a=0;a<u;a++){this._table[a]=null}this.merge(i)}else{this._threshold=this._initialCapacity*this._loadFactor;for(a=0;a<this._initialCapacity;a++){this._table[a]=null}}},set:function(e,t){var i=this.computeHash(e);var r=this.hashIndex(i.hash,this._table.length);return n(this,i.key,t,i.hash,r)},get:function(e){var t=this.computeHash(e);var n=this.findEntry(t.key,t.hash);return n!==undefined?n._value:undefined},has:function(e){var t=this.computeHash(e);return this.findEntry(t.key,t.hash)!==undefined},"delete":function(e){var t=this.computeHash(e);var n=this.hashIndex(t.hash,this._table.length);var i=null;for(var r=this._table[n];r!==null;r=r._nextInBucket){if(r._hash===t.hash&&this.keysEqual(t.key,r._key)){this._size--;if(i!==null){i._nextInBucket=r._nextInBucket}else{this._table[n]=r._nextInBucket}if(r._prev!==null){r._prev._next=r._next}if(r._next!==null){r._next._prev=r._prev}if(this._head===r){this._head=r._next}return r._value}i=r}return undefined},clear:function(){for(var e=0;e<this._table.length;++e){this._table[e]=null}this._head=null;this._size=0},forEach:function(e,t){t=t===undefined?e:t;for(var n=this._head;n!==null;n=n._next){e.call(t,n._key,n._value)}},keys:function(){var e=[];var t=0;for(var n=this._head;n!==null;n=n._next){e[t++]=n._key}return e},values:function(){var e=[];var t=0;for(var n=this._head;n!==null;n=n._next){e[t++]=n._value}return e},equals:function(e,t){if(e===null||!(e instanceof s)||this._size!==e._size){return false}var n=this;var i=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)};for(var r=this._head;r!==null;r=r._next){var o=e.findEntry(r._key,r._hash);if(o===undefined||!i(r._value,o._value)){return false}}return true},clone:function(){return new s(this)},merge:function(e){for(var t=e._head;t!==null;t=t._next){n(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))}},add:function(e,t,n,i){var r=Object.create(null,{key:{enumerable:true,get:function(){return this._key}},value:{enumerable:true,get:function(){return this._value}},next:{enumerable:true,get:function(){return this._next}},_key:{enumerable:false,writable:true,value:e},_value:{enumerable:false,writable:true,value:t},_prev:{enumerable:false,writable:true,value:null},_next:{enumerable:false,writable:true,value:null},_nextInBucket:{enumerable:false,writable:true,value:null},_hash:{enumerable:false,writable:true,value:n}});r._nextInBucket=this._table[i];this._table[i]=r;r._next=this._head;if(this._head!==null){this._head._prev=r}this._head=r;this._size++;if(this._size>=this._threshold){this.resize(this._table.length*2)}},resize:function(e){var t=this._table;var n=[];for(var i=0;i<e;i++){n[i]=null}for(var r=this._head;r!==null;r=r._next){var s=this.hashIndex(r._hash,e);r._nextInBucket=n[s];n[s]=r}this._table=n;this._threshold=e*this._loadFactor},findEntry:function(e,t){var n=this.hashIndex(t,this._table.length);for(var i=this._table[n];i!==null;i=i._nextInBucket){if(i._hash===t&&this.keysEqual(e,i._key)){return i}}return undefined},hashIndex:function(e,t){return e&t-1},computeHash:function(e){var n;if(e===0||e===-0){return{key:0,hash:0}}if(e===null){if(s._null===null){n=Ice.generateUUID();s._null={key:n,hash:t.hashCode(n)}}return s._null}if(e===undefined){throw new Error("cannot compute hash for undefined value")}if(typeof e.hashCode==="function"){return{key:e,hash:e.hashCode()}}var i=typeof e;if(i==="string"||e instanceof String){return{key:e,hash:t.hashCode(e)}}else if(i==="number"||e instanceof Number){if(isNaN(e)){if(s._nan===null){n=Ice.generateUUID();s._nan={key:n,hash:t.hashCode(n)}}return s._nan}return{key:e,hash:e.toFixed(0)}}else if(i==="boolean"||e instanceof Boolean){return{key:e,hash:e?1:0}}throw new Error("cannot compute hash for value of type "+i)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=s;s.compareEquals=i;s.compareIdentity=r;s._null=null;s._nan=null;var o=s.prototype;Object.defineProperty(o,"size",{get:function(){return this._size}});Object.defineProperty(o,"entries",{get:function(){return this._head}});var c=Ice.Slice;c.defineDictionary=function(t,n,i,r,o,c,a,u,l){if(a!==undefined||l!==undefined){t[n]=function(e){return new s(e||a,l)}}else{t[n]=s}var h=null;Object.defineProperty(t,i,{get:function(){if(h===null){h=Ice.StreamHelpers.generateDictHelper(e.type(r),e.type(o),c,e.type(u),t[n])}return h}})}})();(function(){Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]])})();(function(){var e=Ice.Class;var t=Object.defineProperty;var n=Ice.HashMap;var i=Ice.OptionalFormat;var r={};r.FSizeOptHelper=function(){this.writeOpt=function(e,t,n){if(n!==undefined&&e.writeOpt(t,i.FSize)){var r=e.startSize();this.write(e,n);e.endSize(r)}};this.readOpt=function(e,t){var n;if(e.readOpt(t,i.FSize)){e.skip(4);n=this.read(e)}return n}};r.VSizeOptHelper=function(){this.writeOpt=function(e,t,n){if(n!==undefined&&e.writeOpt(t,i.VSize)){e.writeSize(this.minWireSize);this.write(e,n)}};this.readOpt=function(e,t){var n;if(e.readOpt(t,i.VSize)){e.skipSize();n=this.read(e)}return n}};r.VSizeContainerOptHelper=function(e){this.writeOpt=function(t,n,r){if(r!==undefined&&t.writeOpt(n,i.VSize)){var s=this.size(r);t.writeSize(s>254?s*e+5:s*e+1);this.write(t,r)}};this.readOpt=function(e,t){var n;if(e.readOpt(t,i.VSize)){e.skipSize();n=this.read(e)}return n}};r.VSizeContainer1OptHelper=function(){this.writeOpt=function(e,t,n){if(n!==undefined&&e.writeOpt(t,i.VSize)){this.write(e,n)}};this.readOpt=function(e,t){var n;if(e.readOpt(t,i.VSize)){n=this.read(e)}return n}};var s=e({write:function(e,t){if(t===null||t.length===0){e.writeSize(0)}else{var n=this.elementHelper;e.writeSize(t.length);for(var i=0;i<t.length;++i){n.write(e,t[i])}}},read:function(e){var t=this.elementHelper;var n=e.readAndCheckSeqSize(t.minWireSize);var i=[];i.length=n;for(var r=0;r<n;++r){i[r]=t.read(e)}return i},size:function(e){return e===null||e===undefined?0:e.length}});t(s.prototype,"minWireSize",{get:function(){return 1}});var o=new s;o.write=function(e,t){return e.writeByteSeq(t)};o.read=function(e){return e.readByteSeq()};t(o,"elementHelper",{get:function(){return Ice.ByteHelper}});r.VSizeContainer1OptHelper.call(o);var c=function(e){var t=e.readAndCheckSeqSize(1);var n=[];n.length=t;var i=this.elementType;var r=function(t){e.readObject(function(e){n[t]=e},i)};for(var s=0;s<t;++s){r(s)}return n};r.generateSeqHelper=function(e,n,i){if(e===Ice.ByteHelper){return o}var a=new s;if(n){if(e.minWireSize===1){r.VSizeContainer1OptHelper.call(a)}else{r.VSizeContainerOptHelper.call(a,e.minWireSize)}}else{r.FSizeOptHelper.call(a)}t(a,"elementHelper",{get:function(){return e}});if(e==Ice.ObjectHelper){t(a,"elementType",{get:function(){return i}});a.read=c}return a};var a=e({write:function(e,t){if(t===null||t.size===0){e.writeSize(0)}else{var n=this.keyHelper;var i=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;r!==null;r=r.next){n.write(e,r.key);i.write(e,r.value)}}},read:function(e){var t=this.mapType;var n=new t;var i=e.readSize();var r=this.keyHelper;var s=this.valueHelper;for(var o=0;o<i;++o){n.set(r.read(e),s.read(e))}return n},size:function(e){return e===null||e===undefined?0:e.size}});Object.defineProperty(a.prototype,"minWireSize",{get:function(){return 1}});var u=function(e){var t=e.readSize();var n=this.mapType;var i=new n;var r=this.valueType;var s=function(t){e.readObject(function(e){i.set(t,e)},r)};var o=this.keyHelper;for(var c=0;c<t;++c){s(o.read(e))}return i};r.generateDictHelper=function(e,n,i,s,o){var c=new a;if(i){r.VSizeContainerOptHelper.call(c,e.minWireSize+n.minWireSize)}else{r.FSizeOptHelper.call(c)}t(c,"mapType",{get:function(){return o}});t(c,"keyHelper",{get:function(){return e}});t(c,"valueHelper",{get:function(){return n}});if(n==Ice.ObjectHelper){t(c,"valueType",{get:function(){return s}});c.read=u}return c};Ice.StreamHelpers=r})();(function(){function e(){var e={};e.setTimeout=function(){setTimeout.apply(null,arguments)};e.clearTimeout=function(){clearTimeout.apply(null,arguments)};e.setInterval=function(){setInterval.apply(null,arguments)};e.clearInterval=function(){clearInterval.apply(null,arguments)};e.setImmediate=typeof setImmediate=="function"?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)};return e}var t=Ice.HashMap;var n=Number.MAX_SAFE_INTEGER||9007199254740991;var i=new t;var r=0,s=1,o=2,c=3,a=4;var u={};var l;var h=0;var f=function(){if(h==n){h=0}return h++};u.setTimeout=function(e,t){var n=f();i.set(n,e);l.postMessage({type:r,id:n,ms:t});return n};u.clearTimeout=function(e){i.delete(e);l.postMessage({type:c,id:e})};u.setInterval=function(e,t){var n=f();i.set(n,e);l.postMessage({type:s,id:n,ms:t});return n};u.clearInterval=function(e){i.delete(e);l.postMessage({type:a,id:e})};u.setImmediate=function(e){var t=f();i.set(t,e);l.postMessage({type:o,id:t});return t};u.onmessage=function(e){var t;if(e.data.type===s){t=i.get(e.data.id)}else{t=i.delete(e.data.id)}if(t!==undefined){t.call()}};var d=function(){return"("+function(){var e=0,t=1,n=2,i=3,r=4;var s={};self.onmessage=function(o){if(o.data.type==e){s[o.data.id]=setTimeout(function(){self.postMessage(o.data)},o.data.ms)}else if(o.data.type==t){s[o.data.id]=setInterval(function(){self.postMessage(o.data)},o.data.ms)}else if(o.data.type==n){self.postMessage(o.data)}else if(o.data.type==i){clearTimeout(s[o.data.id]);delete s[o.data.id]}else if(o.data.type==r){clearInterval(s[o.data.id]);delete s[o.data.id]}}}.toString()+"());"};if(l===undefined){var p;try{p=URL.createObjectURL(new Blob([d()],{type:"text/javascript"}));l=new Worker(p);l.onmessage=u.onmessage;Ice.Timer=u}catch(_){URL.revokeObjectURL(p);Ice.Timer=e()}}})();(function(){var e=Ice.Class;var t=0;var n=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null);i(this,e,this.__mostDerivedType());e.endWriteObject()},__read:function(e){e.startReadObject();r(this,e,this.__mostDerivedType());e.endReadObject(false)},ice_instanceof:function(e){if(e){if(this instanceof e){return true}return this.__mostDerivedType().__instanceof(e)}return false},__mostDerivedType:function(){return n},equals:function(e){return this===e}});n.write=function(e,t){e.writeObject(t)};n.writeOpt=function(e,t,n){e.writeOptObject(t,n)};n.read=function(e){var t={value:null};e.readObject(function(e){t.value=e},n);return t};n.readOpt=function(e,t){var i={value:undefined};e.readOptObject(t,function(e){i.value=e},n);return i};n.ice_staticId=function(){return n.__id};n.__instanceof=function(e){if(e===this){return true}for(var t in this.__implements){if(this.__implements[t].__instanceof(e)){return true}}if(this.__parent){return this.__parent.__instanceof(e)}return false};n.__ids=["::Ice::Object"];n.__id=n.__ids[0];n.__compactId=-1;n.__preserved=false;var i=function(e,t,r){if(r===undefined||r===n){return}t.startWriteSlice(r.__id,r.__compactId,r.__parent===n);if(r.prototype.__writeMemberImpl){r.prototype.__writeMemberImpl.call(e,t)}t.endWriteSlice();i(e,t,r.__parent)};var r=function(e,t,i){if(i===undefined||i===n){return}t.startReadSlice();if(i.prototype.__readMemberImpl){i.prototype.__readMemberImpl.call(e,t)}t.endReadSlice();r(e,t,i.__parent)};var s=function(e){e.startWriteObject(this.__slicedData);i(this,e,this.__mostDerivedType());e.endWriteObject()};var o=function(e){e.startReadObject();r(this,e,this.__mostDerivedType());this.__slicedData=e.endReadObject(true)};Ice.Object=n;var c=Ice.Slice;c.defineLocalObject=function(e,t){var n=e||function(){};if(t!==undefined){n.prototype=new t;n.__parent=t;n.prototype.constructor=e}return n};c.defineObject=function(e,t,i,r,c,a,u,l,h){var f=e||function(){};f.prototype=new t;f.__parent=t;f.__ids=c;f.__id=c[r];f.__compactId=a;f.__instanceof=n.__instanceof;f.__implements=i;f.write=function(e,t){e.writeObject(t)};f.writeOpt=function(e,t,n){e.writeOptObject(t,n)};f.read=function(e){var t={value:null};e.readObject(function(e){t.value=e},f);return t};f.readOpt=function(e,t){var n={value:undefined};e.readOptObject(t,function(e){n.value=e},f);return n};f.ice_staticId=function(){return c[r]};f.prototype.constructor=f;f.prototype.__mostDerivedType=function(){return f};if(h){f.prototype.__write=s;f.prototype.__read=o}f.prototype.__writeMemberImpl=u;f.prototype.__readMemberImpl=l;return f}})();(function(){var e=Ice.StringUtil;Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(t,n){if(n!==undefined&&n!==null){t=(t<<5)+t^e.hashCode(n)}return t},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){if(t!==undefined&&t!==null){e=(e<<5)+e^t.hashCode()}return e},addArray:function(e,t,n){if(t!==undefined&&t!==null){for(var i=0;i<t.length;++i){e=n(e,t[i])}}return e}}})();(function(){var e=Ice.ArrayUtil;var t=e.eq;var n=function(e){if(this===e){return true}if(e===null||e===undefined){return false}if(this.prototype!==e.prototype){return false}var n,i;for(var r in this){n=this[r];i=e[r];if(typeof n=="function"){continue}else if(!t(n,i)){return false}}return true};var i=function(){var t=new this.constructor;var n;for(var i in this){n=this[i];if(n===undefined||n===null){t[i]=n}else if(typeof n=="function"){continue}else if(typeof n.clone=="function"){t[i]=n.clone()}else if(n instanceof Array){t[i]=e.clone(n)}else{t[i]=n}}return t};var r=function(e,t){if(typeof t.hashCode=="function"){return Ice.HashUtil.addHashable(e,t)}else if(t instanceof Array){return Ice.HashUtil.addArray(e,t,r)}else{var n=typeof t;if(t instanceof String||n=="string"){return Ice.HashUtil.addString(e,t)}else if(t instanceof Number||n=="number"){return Ice.HashUtil.addNumber(e,t)}else if(t instanceof Boolean||n=="boolean"){return Ice.HashUtil.addBoolean(e,t)}}};var s=function(){var e=5381;var t;for(var n in this){t=this[n];if(t===undefined||t===null||typeof t=="function"){continue}e=r(e,t)}return e};Ice.Slice.defineStruct=function(e,t,r,o,c,a){var u=e;u.prototype.clone=i;u.prototype.equals=n;if(t){u.prototype.hashCode=s}if(o&&r){u.prototype.__write=r;u.prototype.__read=o;u.write=function(e,t){if(!t){if(!u.prototype._nullMarshalValue){u.prototype._nullMarshalValue=new this}t=u.prototype._nullMarshalValue}t.__write(e)};u.read=function(e,t){if(!t||!(t instanceof this)){t=new this}t.__read(e);return t};Object.defineProperty(u,"minWireSize",{get:function(){return c}});if(a){Ice.StreamHelpers.VSizeOptHelper.call(u)}else{Ice.StreamHelpers.FSizeOptHelper.call(u)}}return u}})();(function(){Ice.CompactIdRegistry=new Ice.HashMap})();(function(){t.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",true);t.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",true);t.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",true);t.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",true);t.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",true);t.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",true);t.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",true);t.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",false);t.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",false,"Ice.Object");t.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",false)})();(function(){Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4}})();(function(){var e=Ice.Long;if(!ArrayBuffer.prototype.slice){ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=t===undefined?n.length:t;var i=new Uint8Array(new ArrayBuffer(t-e));for(var r=0,s=i.length;r<s;r++){i[r]=n[r+e]}return i.buffer}}var t="BufferOverflowException";var n="BufferUnderflowException";var i="IndexOutOfBoundsException";var r=Ice.Class({__init__:function(e){if(e!==undefined){this.b=e;this.v=new DataView(this.b)}else{this.b=null;this.v=null}this._position=0;this._limit=0;this._shrinkCounter=0},empty:function(){return this._limit===0},resize:function(e){if(e===0){this.clear()}else if(e>this.capacity){this.reserve(e)}this._limit=e},clear:function(){this.b=null;this.v=null;this._position=0;this._limit=0},expand:function(e){var t=this.capacity===0?e:this._position+e;if(t>this._limit){this.resize(t)}},reset:function(){if(this._limit>0&&this._limit*2<this.capacity){if(++this._shrinkCounter>2){this.reserve(this._limit);this._shrinkCounter=0}}else{this._shrinkCounter=0}this._limit=0;this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);t=Math.max(1024,t);if(!this.b){this.b=new ArrayBuffer(t)}else{var n=new Uint8Array(t);n.set(new Uint8Array(this.b));this.b=n.buffer}this.v=new DataView(this.b)}else if(e<this.capacity){this.b=this.b.slice(0,this.capacity);this.v=new DataView(this.b)}else{return}},put:function(e){if(this._position===this._limit){throw new Error(t)}this.v.setUint8(this._position,e);this._position++},putAt:function(e,t){if(e>=this._limit){throw new Error(i)}this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array)){throw new TypeError("argument is not a Uint8Array")}if(e.byteLength>0){if(this._position+e.length>this._limit){throw new Error(t)}new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position);this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit){throw new Error(t)}this.v.setInt16(this._position,e,true);this._position+=2},putInt:function(e){if(this._position+4>this._limit){throw new Error(t)}this.v.setInt32(this._position,e,true);this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0){throw new Error(i)}this.v.setInt32(e,t,true)},putFloat:function(e){if(this._position+4>this._limit){throw new Error(t)}this.v.setFloat32(this._position,e,true);this._position+=4},putDouble:function(e){if(this._position+8>this._limit){throw new Error(t)}this.v.setFloat64(this._position,e,true);this._position+=8},putLong:function(e){if(this._position+8>this._limit){throw new Error(t)}this.v.setInt32(this._position,e.low,true);this._position+=4;this.v.setInt32(this._position,e.high,true);this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length);e.expand(n.length);this.putString(n,n.length)},putString:function(e,n){if(this._position+n>this._limit){throw new Error(t)}for(var i=0;i<n;++i){this.v.setUint8(this._position,e.charCodeAt(i));this._position++}},get:function(){if(this._position>=this._limit){throw new Error(n)}var e=this.v.getUint8(this._position);this._position++;return e},getAt:function(e){if(e<0||e>=this._limit){throw new Error(i)}return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit){throw new Error(n)}var t=this.b.slice(this._position,this._position+e);this._position+=e;return new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit){throw new Error(n)}t=t===undefined?this.b.byteLength-e:t;return new Uint8Array(this.b.slice(e,e+t));
},getShort:function(){if(this._limit-this._position<2){throw new Error(n)}var e=this.v.getInt16(this._position,true);this._position+=2;return e},getInt:function(){if(this._limit-this._position<4){throw new Error(n)}var e=this.v.getInt32(this._position,true);this._position+=4;return e},getFloat:function(){if(this._limit-this._position<4){throw new Error(n)}var e=this.v.getFloat32(this._position,true);this._position+=4;return e},getDouble:function(){if(this._limit-this._position<8){throw new Error(n)}var e=this.v.getFloat64(this._position,true);this._position+=8;return e},getLong:function(){if(this._limit-this._position<8){throw new Error(n)}var t=new e;t.low=this.v.getUint32(this._position,true);this._position+=4;t.high=this.v.getUint32(this._position,true);this._position+=4;return t},getString:function(e){if(this._position+e>this._limit){throw new Error(n)}var t=new DataView(this.b,this._position,e);var i="";for(var r=0;r<e;++r){i+=String.fromCharCode(t.getUint8(r))}this._position+=e;i=decodeURIComponent(escape(i));return i}});var s=r.prototype;Object.defineProperty(s,"position",{get:function(){return this._position},set:function(e){if(e>=0&&e<=this._limit){this._position=e}}});Object.defineProperty(s,"limit",{get:function(){return this._limit},set:function(e){if(e<=this.capacity){this._limit=e;if(this._position>e){this._position=e}}}});Object.defineProperty(s,"capacity",{get:function(){return this.b===null?0:this.b.byteLength}});Object.defineProperty(s,"remaining",{get:function(){return this._limit-this._position}});r.createNative=function(e){if(e===undefined){return new Uint8Array(0)}else{return new Uint8Array(e)}};Ice.Buffer=r})();(function(){var e=Ice.Buffer;var t={};var n="A".charCodeAt(0);var i="a".charCodeAt(0);var r="0".charCodeAt(0);t.encode=function(e){if(e===null||e.length===0){return""}var t=e.length*4/3+1;var n=t*2/76+1;var i=t+n;var r=[];var o;var c;var a;var u;var l;var h;var f;for(var d=0;d<e.length;d+=3){o=e[d]&255;c=0;a=0;if(d+1<e.length){c=e[d+1]&255}if(d+2<e.length){a=e[d+2]&255}u=o>>2&255;l=((o&3)<<4|c>>4)&255;h=((c&15)<<2|a>>6)&255;f=a&63;r.push(s(u));r.push(s(l));if(d+1<e.length){r.push(s(h))}else{r.push("=")}if(d+2<e.length){r.push(s(f))}else{r.push("=")}}var p=r.join("");var _=[];var I=0;while(p.length-I>76){_.push(p.substring(I,I+76));_.push("\r\n");I+=76}_.push(p.substring(I));return _.join("")};t.decode=function(n){var i=[];for(var r=0;r<n.length;r++){var s=n.charAt(r);if(t.isBase64(s)){i.push(s)}}if(i.length===0){return null}var c=i.length*3/4+1;var a=new e;a.resize(c);var u;var l;var h;var f;var d;var p;var _;var I;var g=0;for(var v=0;v<i.length;v+=4){d="A";p="A";_="A";I="A";d=i[v];if(v+1<i.length){p=i[v+1]}if(v+2<i.length){_=i[v+2]}if(v+3<i.length){I=i[v+3]}u=o(d)&255;l=o(p)&255;h=o(_)&255;f=o(I)&255;a.put(u<<2|l>>4);if(_!="="){a.put((l&15)<<4|h>>2)}if(I!="="){a.put((h&3)<<6|f)}}return a.remaining>0?a.getArrayAt(0,a.position):a.getArrayAt(0)};t.isBase64=function(e){if(e>="A"&&e<="Z"){return true}if(e>="a"&&e<="z"){return true}if(e>="0"&&e<="9"){return true}if(e=="+"){return true}if(e=="/"){return true}if(e=="="){return true}return false};function s(e){if(e<26){return String.fromCharCode(n+e)}if(e<52){return String.fromCharCode(i+(e-26))}if(e<62){return String.fromCharCode(r+(e-52))}if(e==62){return"+"}return"/"}function o(e){if(e>="A"&&e<="Z"){return e.charCodeAt(0)-n}if(e>="a"&&e<="z"){return e.charCodeAt(0)-i+26}if(e>="0"&&e<="9"){return e.charCodeAt(0)-r+52}if(e=="+"){return 62}return 63}Ice.Base64=t})();(function(){Ice.Identity=t.defineStruct(function(e,t){this.name=e!==undefined?e:"";this.category=t!==undefined?t:""},true,function(e){e.writeString(this.name);e.writeString(this.category)},function(e){this.name=e.readString();this.category=e.readString()},2,false);t.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",false,Ice.HashMap.compareEquals,"Ice.Object");t.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",false)})();(function(){})();(function(){Ice.ProtocolVersion=t.defineStruct(function(e,t){this.major=e!==undefined?e:0;this.minor=t!==undefined?t:0},true,function(e){e.writeByte(this.major);e.writeByte(this.minor)},function(e){this.major=e.readByte();this.minor=e.readByte()},2,true);Ice.EncodingVersion=t.defineStruct(function(e,t){this.major=e!==undefined?e:0;this.minor=t!==undefined?t:0},true,function(e){e.writeByte(this.major);e.writeByte(this.minor)},function(e){this.major=e.readByte();this.minor=e.readByte()},2,true)})();(function(){var e=function(){this.typeId="";this.compactId=-1;this.bytes=[];this.objects=[];this.hasOptionalMembers=false;this.isLastSlice=false};Ice.SliceInfo=e;var t=function(e){this.slices=e};Ice.SlicedData=t;var n=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData);e.endWriteObject()},__read:function(e){e.startReadObject();this._slicedData=e.endReadObject(true)}});Ice.UnknownSlicedObject=n})();(function(){})();(function(){var e=Ice.HashMap;var t=Ice.Debug;var n=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e;this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear();this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(t===0){n.value=false;return null}var i=this._adapterEndpointsTable.get(e);if(i!==undefined){n.value=this.checkTTL(i.time,t);return i.endpoints}n.value=false;return null},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new i(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);this._adapterEndpointsTable.delete(e);return t!==undefined?t.endpoints:null},getObjectReference:function(e,t,n){if(t===0){n.value=false;return null}var i=this._objectTable.get(e);if(i!==undefined){n.value=this.checkTTL(i.time,t);return i.reference}n.value=false;return null},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);this._objectTable.delete(e);return t!==undefined?t.reference:null},checkTTL:function(e,n){t.assert(n!==0);if(n<0){return true}else{return Date.now()-e<=n*1e3}}});Ice.LocatorTable=n;var i=function(e,t){this.time=e;this.endpoints=t};var r=function(e,t){this.time=e;this.reference=t}})();(function(){var e=Ice.Timer;var t={Pending:0,Success:1,Failed:2};var n=function(e,n){var i=e.__state===t.Success?n.onResponse:n.onException;try{if(typeof i!=="function"){n.promise.setState(e.__state,e._args)}else{var r=i.apply(null,e._args);if(r&&typeof r.then=="function"){r.then(function(){var e=arguments;n.promise.succeed.apply(n.promise,e)},function(){var e=arguments;n.promise.fail.apply(n.promise,e)})}else{n.promise.succeed(r)}}}catch(s){n.promise.fail.call(n.promise,s)}};var i=Ice.Class({__init__:function(){this.__state=t.Pending;this.__listeners=[]},then:function(t,n){var r=new i;var s=this;e.setImmediate(function(){s.__listeners.push({promise:r,onResponse:t,onException:n});s.resolve()});return r},exception:function(e){return this.then(null,e)},"finally":function(t){var n=new i;var r=this;var s=function(e){return function(){var i=arguments;try{var r=t.apply(null,i);if(r&&typeof r.then=="function"){var s=function(){e.apply(n,i)};r.then(s).exception(s)}else{e.apply(n,i)}}catch(o){e.apply(n,i)}}};e.setImmediate(function(){r.then(s(n.succeed),s(n.fail))});return n},delay:function(t){var n=new i;var r=this;var s=function(n,i){return function(){var r=arguments;e.setTimeout(function(){i.apply(n,r)},t)}};e.setImmediate(function(){r.then(s(n,n.succeed),s(n,n.fail))});return n},resolve:function(){if(this.__state===t.Pending){return}var e;while(e=this.__listeners.pop()){n(this,e)}},setState:function(n,i){if(this.__state===t.Pending&&n!==t.Pending){this.__state=n;this._args=i;var r=this;e.setImmediate(function(){r.resolve()})}},succeed:function(){var e=arguments;this.setState(t.Success,e);return this},fail:function(){var e=arguments;this.setState(t.Failed,e);return this},succeeded:function(){return this.__state===t.Success},failed:function(){return this.__state===t.Failed},completed:function(){return this.__state!==t.Pending}});i.all=function(){if(arguments.length===1&&arguments[0]instanceof Array){return i.all.apply(this,arguments[0])}var e=new i;var t=Array.prototype.slice.call(arguments);var n=new Array(arguments.length);var r=t.length;if(r===0){e.succeed.apply(e,n)}for(var s=0;s<t.length;++s){(function(i){if(t[i]&&typeof t[i].then=="function"){t[i].then(function(){n[i]=arguments;r--;if(r===0){e.succeed.apply(e,n)}},function(){e.fail.apply(e,arguments)})}else{n[i]=t[i];r--;if(r===0){e.succeed.apply(e,n)}}})(s)}return e};i.try=function(e){return(new i).succeed().then(e)};i.delay=function(e){if(arguments.length>1){var t=new i;var n=Array.prototype.slice.call(arguments);e=n.pop();return t.succeed.apply(t,n).delay(e)}else{return(new i).succeed().delay(e)}};Ice.Promise=i})();(function(){var e=Ice.Class({__init__:function(e){if(e!==undefined&&e.length>0){this._prefix=e+": "}else{this._prefix=""}this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:false}},print:function(e){this.write(e,false)},trace:function(e,t){var n=[];var i=new Date;n.push("-- ");n.push(this.timestamp());n.push(" ");n.push(this._prefix);n.push(e);n.push(": ");n.push(t);this.write(n.join(""),true)},warning:function(e){var t=[];var n=new Date;t.push("-! ");t.push(this.timestamp());t.push(" ");t.push(this._prefix);t.push("warning: ");t.push(e);this.write(t.join(""),true)},error:function(e){var t=[];var n=new Date;t.push("!! ");t.push(this.timestamp());t.push(" ");t.push(this._prefix);t.push("error: ");t.push(e);this.write(t.join(""),true)},cloneWithPrefix:function(t){return new e(t)},write:function(e,t){if(t){e=e.replace(/\n/g,"\n   ")}console.log(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}});Ice.Logger=e})();(function(){Ice.InitializationException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.reason=e!==undefined?e:""},Ice.LocalException,"Ice::InitializationException");Ice.PluginInitializationException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.reason=e!==undefined?e:""},Ice.LocalException,"Ice::PluginInitializationException");Ice.CollocationOptimizationException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CollocationOptimizationException");Ice.AlreadyRegisteredException=t.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n);this.kindOfObject=e!==undefined?e:"";this.id=t!==undefined?t:""},Ice.LocalException,"Ice::AlreadyRegisteredException");Ice.NotRegisteredException=t.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n);this.kindOfObject=e!==undefined?e:"";this.id=t!==undefined?t:""},Ice.LocalException,"Ice::NotRegisteredException");Ice.TwowayOnlyException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.operation=e!==undefined?e:""},Ice.LocalException,"Ice::TwowayOnlyException");Ice.CloneNotImplementedException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CloneNotImplementedException");Ice.UnknownException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.unknown=e!==undefined?e:""},Ice.LocalException,"Ice::UnknownException");Ice.UnknownLocalException=t.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownLocalException");Ice.UnknownUserException=t.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownUserException");Ice.VersionMismatchException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::VersionMismatchException");Ice.CommunicatorDestroyedException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CommunicatorDestroyedException");Ice.ObjectAdapterDeactivatedException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.name=e!==undefined?e:""},Ice.LocalException,"Ice::ObjectAdapterDeactivatedException");Ice.ObjectAdapterIdInUseException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.id=e!==undefined?e:""},Ice.LocalException,"Ice::ObjectAdapterIdInUseException");Ice.NoEndpointException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.proxy=e!==undefined?e:""},Ice.LocalException,"Ice::NoEndpointException");Ice.EndpointParseException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.str=e!==undefined?e:""},Ice.LocalException,"Ice::EndpointParseException");Ice.EndpointSelectionTypeParseException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.str=e!==undefined?e:""},Ice.LocalException,"Ice::EndpointSelectionTypeParseException");Ice.VersionParseException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.str=e!==undefined?e:""},Ice.LocalException,"Ice::VersionParseException");Ice.IdentityParseException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.str=e!==undefined?e:""},Ice.LocalException,"Ice::IdentityParseException");Ice.ProxyParseException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.str=e!==undefined?e:""},Ice.LocalException,"Ice::ProxyParseException");Ice.IllegalIdentityException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.id=e!==undefined?e:new Ice.Identity},Ice.LocalException,"Ice::IllegalIdentityException");Ice.IllegalServantException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.reason=e!==undefined?e:""},Ice.LocalException,"Ice::IllegalServantException");Ice.RequestFailedException=t.defineLocalException(function(e,t,n,i){Ice.LocalException.call(this,i);this.id=e!==undefined?e:new Ice.Identity;this.facet=t!==undefined?t:"";this.operation=n!==undefined?n:""},Ice.LocalException,"Ice::RequestFailedException");Ice.ObjectNotExistException=t.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::ObjectNotExistException");Ice.FacetNotExistException=t.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::FacetNotExistException");Ice.OperationNotExistException=t.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::OperationNotExistException");Ice.SyscallException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.error=e!==undefined?e:0},Ice.LocalException,"Ice::SyscallException");Ice.SocketException=t.defineLocalException(function(e,t){Ice.SyscallException.call(this,e,t)},Ice.SyscallException,"Ice::SocketException");Ice.FileException=t.defineLocalException(function(e,t,n){Ice.SyscallException.call(this,e,n);this.path=t!==undefined?t:""},Ice.SyscallException,"Ice::FileException");Ice.ConnectFailedException=t.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectFailedException");Ice.ConnectionRefusedException=t.defineLocalException(function(e,t){Ice.ConnectFailedException.call(this,e,t)},Ice.ConnectFailedException,"Ice::ConnectionRefusedException");Ice.ConnectionLostException=t.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectionLostException");Ice.DNSException=t.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n);this.error=e!==undefined?e:0;this.host=t!==undefined?t:""},Ice.LocalException,"Ice::DNSException");Ice.OperationInterruptedException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::OperationInterruptedException");Ice.TimeoutException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::TimeoutException");Ice.ConnectTimeoutException=t.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectTimeoutException");Ice.CloseTimeoutException=t.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::CloseTimeoutException");Ice.ConnectionTimeoutException=t.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectionTimeoutException");Ice.InvocationTimeoutException=t.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::InvocationTimeoutException");Ice.InvocationCanceledException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::InvocationCanceledException");Ice.ProtocolException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.reason=e!==undefined?e:""},Ice.LocalException,"Ice::ProtocolException");Ice.BadMagicException=t.defineLocalException(function(e,t,n){Ice.ProtocolException.call(this,e,n);this.badMagic=t!==undefined?t:null},Ice.ProtocolException,"Ice::BadMagicException");Ice.UnsupportedProtocolException=t.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i);this.bad=t!==undefined?t:new Ice.ProtocolVersion;this.supported=n!==undefined?n:new Ice.ProtocolVersion},Ice.ProtocolException,"Ice::UnsupportedProtocolException");Ice.UnsupportedEncodingException=t.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i);this.bad=t!==undefined?t:new Ice.EncodingVersion;this.supported=n!==undefined?n:new Ice.EncodingVersion},Ice.ProtocolException,"Ice::UnsupportedEncodingException");Ice.UnknownMessageException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownMessageException");Ice.ConnectionNotValidatedException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ConnectionNotValidatedException");Ice.UnknownRequestIdException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownRequestIdException");Ice.UnknownReplyStatusException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownReplyStatusException");Ice.CloseConnectionException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CloseConnectionException");Ice.ForcedCloseConnectionException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ForcedCloseConnectionException");Ice.IllegalMessageSizeException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::IllegalMessageSizeException");Ice.CompressionException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CompressionException");Ice.DatagramLimitException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::DatagramLimitException");Ice.MarshalException=t.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::MarshalException");Ice.ProxyUnmarshalException=t.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::ProxyUnmarshalException");Ice.UnmarshalOutOfBoundsException=t.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException");Ice.NoObjectFactoryException=t.defineLocalException(function(e,t,n){Ice.MarshalException.call(this,e,n);this.type=t!==undefined?t:""},Ice.MarshalException,"Ice::NoObjectFactoryException");Ice.UnexpectedObjectException=t.defineLocalException(function(e,t,n,i){Ice.MarshalException.call(this,e,i);this.type=t!==undefined?t:"";this.expectedType=n!==undefined?n:""},Ice.MarshalException,"Ice::UnexpectedObjectException");Ice.MemoryLimitException=t.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::MemoryLimitException");Ice.StringConversionException=t.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::StringConversionException");Ice.EncapsulationException=t.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::EncapsulationException");Ice.FeatureNotSupportedException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.unsupportedFeature=e!==undefined?e:""},Ice.LocalException,"Ice::FeatureNotSupportedException");Ice.SecurityException=t.defineLocalException(function(e,t){Ice.LocalException.call(this,t);this.reason=e!==undefined?e:""},Ice.LocalException,"Ice::SecurityException");Ice.FixedProxyException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::FixedProxyException");Ice.ResponseSentException=t.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::ResponseSentException")})();(function(){var e=Ice.StringUtil;var t={};Ice.Encoding_1_0=new Ice.EncodingVersion(1,0);Ice.Encoding_1_1=new Ice.EncodingVersion(1,1);Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0);t.headerSize=14;t.magic=Ice.Buffer.createNative([73,99,101,80]);t.protocolMajor=1;t.protocolMinor=0;t.protocolEncodingMajor=1;t.protocolEncodingMinor=0;t.encodingMajor=1;t.encodingMinor=1;t.requestMsg=0;t.requestBatchMsg=1;t.replyMsg=2;t.validateConnectionMsg=3;t.closeConnectionMsg=4;t.replyOK=0;t.replyUserException=1;t.replyObjectNotExist=2;t.replyFacetNotExist=3;t.replyOperationNotExist=4;t.replyUnknownLocalException=5;t.replyUnknownUserException=6;t.replyUnknownException=7;t.requestHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]);t.requestBatchHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]);t.replyHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]);t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor);t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor);t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor);t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor){throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)}};t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor){throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)}};t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor){throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)}};t.getCompatibleProtocol=function(e){if(e.major!==t.currentProtocol.major){return e}else if(e.minor<t.currentProtocol.minor){return e}else{return t.currentProtocol}};t.getCompatibleEncoding=function(e){if(e.major!==t.currentEncoding.major){return e}else if(e.minor<t.currentEncoding.minor){return e}else{return t.currentEncoding}};t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor};Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(n(e),i(e))};Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(n(e),i(e))};Ice.protocolVersionToString=function(e){return r(e.major,e.minor)};Ice.encodingVersionToString=function(e){return r(e.major,e.minor)};Ice.Protocol=t;function n(t){var n=t.indexOf(".");if(n===-1){throw new Ice.VersionParseException("malformed version value `"+t+"'")}var i=t.substring(0,n);var r;try{r=e.toInt(i)}catch(s){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(r<1||r>255){throw new Ice.VersionParseException("range error in version `"+t+"'")}return r}function i(t){var n=t.indexOf(".");if(n===-1){throw new Ice.VersionParseException("malformed version value `"+t+"'")}var i=t.substring(n+1);var r;try{r=e.toInt(i)}catch(s){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(r<0||r>255){throw new Ice.VersionParseException("range error in version `"+t+"'")}return r}function r(e,t){return e+"."+t}})();(function(){var e=function t(e,n,i){this._pattern=e;this._deprecated=n;this._deprecatedBy=i};Object.defineProperty(e.prototype,"pattern",{get:function(){return this._pattern}});Object.defineProperty(e.prototype,"deprecated",{get:function(){return this._deprecated}});Object.defineProperty(e.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}});Ice.Property=e})();(function(){var e={};var t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",true,null),new t("/^Ice.ACM.Server/",true,null),new t("/^Ice.ACM.Timeout/",false,null),new t("/^Ice.ACM.Heartbeat/",false,null),new t("/^Ice.ACM.Close/",false,null),new t("/^Ice.ACM/",false,null),new t("/^Ice.ACM.Client.Timeout/",false,null),new t("/^Ice.ACM.Client.Heartbeat/",false,null),new t("/^Ice.ACM.Client.Close/",false,null),new t("/^Ice.ACM.Client/",false,null),new t("/^Ice.ACM.Server.Timeout/",false,null),new t("/^Ice.ACM.Server.Heartbeat/",false,null),new t("/^Ice.ACM.Server.Close/",false,null),new t("/^Ice.ACM.Server/",false,null),new t("/^Ice.Admin.ACM.Timeout/",false,null),new t("/^Ice.Admin.ACM.Heartbeat/",false,null),new t("/^Ice.Admin.ACM.Close/",false,null),new t("/^Ice.Admin.ACM/",false,null),new t("/^Ice.Admin.AdapterId/",false,null),new t("/^Ice.Admin.Endpoints/",false,null),new t("/^Ice.Admin.Locator.EndpointSelection/",false,null),new t("/^Ice.Admin.Locator.ConnectionCached/",false,null),new t("/^Ice.Admin.Locator.PreferSecure/",false,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",false,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",false,null),new t("/^Ice.Admin.Locator.Locator/",false,null),new t("/^Ice.Admin.Locator.Router/",false,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",false,null),new t("/^Ice.Admin.Locator.Context../",false,null),new t("/^Ice.Admin.Locator/",false,null),new t("/^Ice.Admin.PublishedEndpoints/",false,null),new t("/^Ice.Admin.ReplicaGroupId/",false,null),new t("/^Ice.Admin.Router.EndpointSelection/",false,null),new t("/^Ice.Admin.Router.ConnectionCached/",false,null),new t("/^Ice.Admin.Router.PreferSecure/",false,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",false,null),new t("/^Ice.Admin.Router.InvocationTimeout/",false,null),new t("/^Ice.Admin.Router.Locator/",false,null),new t("/^Ice.Admin.Router.Router/",false,null),new t("/^Ice.Admin.Router.CollocationOptimized/",false,null),new t("/^Ice.Admin.Router.Context../",false,null),new t("/^Ice.Admin.Router/",false,null),new t("/^Ice.Admin.ProxyOptions/",false,null),new t("/^Ice.Admin.ThreadPool.Size/",false,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",false,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",false,null),new t("/^Ice.Admin.ThreadPool.StackSize/",false,null),new t("/^Ice.Admin.ThreadPool.Serialize/",false,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",false,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",false,null),new t("/^Ice.Admin.MessageSizeMax/",false,null),new t("/^Ice.Admin.DelayCreation/",false,null),new t("/^Ice.Admin.Enabled/",false,null),new t("/^Ice.Admin.Facets/",false,null),new t("/^Ice.Admin.InstanceName/",false,null),new t("/^Ice.Admin.Logger.KeepLogs/",false,null),new t("/^Ice.Admin.Logger.KeepTraces/",false,null),new t("/^Ice.Admin.Logger.Properties/",false,null),new t("/^Ice.Admin.ServerId/",false,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",false,null),new t("/^Ice.BatchAutoFlush/",true,null),new t("/^Ice.BatchAutoFlushSize/",false,null),new t("/^Ice.ChangeUser/",false,null),new t("/^Ice.ClassGraphDepthMax/",false,null),new t("/^Ice.ClientAccessPolicyProtocol/",false,null),new t("/^Ice.Compression.Level/",false,null),new t("/^Ice.CollectObjects/",false,null),new t("/^Ice.Config/",false,null),new t("/^Ice.ConsoleListener/",false,null),new t("/^Ice.Default.CollocationOptimized/",false,null),new t("/^Ice.Default.EncodingVersion/",false,null),new t("/^Ice.Default.EndpointSelection/",false,null),new t("/^Ice.Default.Host/",false,null),new t("/^Ice.Default.Locator.EndpointSelection/",false,null),new t("/^Ice.Default.Locator.ConnectionCached/",false,null),new t("/^Ice.Default.Locator.PreferSecure/",false,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.Locator.InvocationTimeout/",false,null),new t("/^Ice.Default.Locator.Locator/",false,null),new t("/^Ice.Default.Locator.Router/",false,null),new t("/^Ice.Default.Locator.CollocationOptimized/",false,null),new t("/^Ice.Default.Locator.Context../",false,null),new t("/^Ice.Default.Locator/",false,null),new t("/^Ice.Default.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.InvocationTimeout/",false,null),new t("/^Ice.Default.Package/",false,null),new t("/^Ice.Default.PreferSecure/",false,null),new t("/^Ice.Default.Protocol/",false,null),new t("/^Ice.Default.Router.EndpointSelection/",false,null),new t("/^Ice.Default.Router.ConnectionCached/",false,null),new t("/^Ice.Default.Router.PreferSecure/",false,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.Router.InvocationTimeout/",false,null),new t("/^Ice.Default.Router.Locator/",false,null),new t("/^Ice.Default.Router.Router/",false,null),new t("/^Ice.Default.Router.CollocationOptimized/",false,null),new t("/^Ice.Default.Router.Context../",false,null),new t("/^Ice.Default.Router/",false,null),new t("/^Ice.Default.SlicedFormat/",false,null),new t("/^Ice.Default.SourceAddress/",false,null),new t("/^Ice.Default.Timeout/",false,null),new t("/^Ice.EventLog.Source/",false,null),new t("/^Ice.FactoryAssemblies/",false,null),new t("/^Ice.HTTPProxyHost/",false,null),new t("/^Ice.HTTPProxyPort/",false,null),new t("/^Ice.ImplicitContext/",false,null),new t("/^Ice.InitPlugins/",false,null),new t("/^Ice.IPv4/",false,null),new t("/^Ice.IPv6/",false,null),new t("/^Ice.LogFile/",false,null),new t("/^Ice.LogFile.SizeMax/",false,null),new t("/^Ice.LogStdErr.Convert/",false,null),new t("/^Ice.MessageSizeMax/",false,null),new t("/^Ice.Nohup/",false,null),new t("/^Ice.NullHandleAbort/",false,null),new t("/^Ice.Override.CloseTimeout/",false,null),new t("/^Ice.Override.Compress/",false,null),new t("/^Ice.Override.ConnectTimeout/",false,null),new t("/^Ice.Override.Timeout/",false,null),new t("/^Ice.Override.Secure/",false,null),new t("/^Ice.Package../",false,null),new t("/^Ice.Plugin../",false,null),new t("/^Ice.PluginLoadOrder/",false,null),new t("/^Ice.PreferIPv6Address/",false,null),new t("/^Ice.PrintAdapterReady/",false,null),new t("/^Ice.PrintProcessId/",false,null),new t("/^Ice.PrintStackTraces/",false,null),new t("/^Ice.ProgramName/",false,null),new t("/^Ice.RetryIntervals/",false,null),new t("/^Ice.ServerIdleTime/",false,null),new t("/^Ice.SOCKSProxyHost/",false,null),new t("/^Ice.SOCKSProxyPort/",false,null),new t("/^Ice.StdErr/",false,null),new t("/^Ice.StdOut/",false,null),new t("/^Ice.SyslogFacility/",false,null),new t("/^Ice.ThreadPool.Client.Size/",false,null),new t("/^Ice.ThreadPool.Client.SizeMax/",false,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",false,null),new t("/^Ice.ThreadPool.Client.StackSize/",false,null),new t("/^Ice.ThreadPool.Client.Serialize/",false,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",false,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",false,null),new t("/^Ice.ThreadPool.Server.Size/",false,null),new t("/^Ice.ThreadPool.Server.SizeMax/",false,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",false,null),new t("/^Ice.ThreadPool.Server.StackSize/",false,null),new t("/^Ice.ThreadPool.Server.Serialize/",false,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",false,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",false,null),new t("/^Ice.ThreadPriority/",false,null),new t("/^Ice.Trace.Admin.Properties/",false,null),new t("/^Ice.Trace.Admin.Logger/",false,null),new t("/^Ice.Trace.Locator/",false,null),new t("/^Ice.Trace.Network/",false,null),new t("/^Ice.Trace.Protocol/",false,null),new t("/^Ice.Trace.Retry/",false,null),new t("/^Ice.Trace.Slicing/",false,null),new t("/^Ice.Trace.ThreadPool/",false,null),new t("/^Ice.UDP.RcvSize/",false,null),new t("/^Ice.UDP.SndSize/",false,null),new t("/^Ice.TCP.Backlog/",false,null),new t("/^Ice.TCP.RcvSize/",false,null),new t("/^Ice.TCP.SndSize/",false,null),new t("/^Ice.UseApplicationClassLoader/",false,null),new t("/^Ice.UseSyslog/",false,null),new t("/^Ice.Warn.AMICallback/",false,null),new t("/^Ice.Warn.Connections/",false,null),new t("/^Ice.Warn.Datagrams/",false,null),new t("/^Ice.Warn.Dispatch/",false,null),new t("/^Ice.Warn.Endpoints/",false,null),new t("/^Ice.Warn.UnknownProperties/",false,null),new t("/^Ice.Warn.UnusedProperties/",false,null),new t("/^Ice.CacheMessageBuffers/",false,null),new t("/^Ice.ThreadInterruptSafe/",false,null),new t("/^Ice.Voip/",false,null)];
e.validProps=[e.IceProps];e.clPropNames=["Ice"];Ice.PropertyNames=e})();(function(){var e=Ice.HashMap;var t=Ice.AlreadyRegisteredException;var n=Ice.NotRegisteredException;var i=Ice.Class({__init__:function(){this._factoryMap=new e},add:function(e,n){var i,r;i=this._factoryMap.get(n);if(i!==undefined){r=new t;r.id=n;r.kindOfObject="object factory";throw r}this._factoryMap.set(n,e)},remove:function(e){var t,i;t=this._factoryMap.get(e);if(t===undefined){i=new n;i.id=e;i.kindOfObject="object factory";throw i}this._factoryMap.delete(e);t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var t=this._factoryMap,n=t.entries;this._factoryMap=new e;while(n!==null){n.value.destroy();n=n.next}}});Ice.ObjectFactoryManager=i})();(function(){var e=Ice.Promise;var t=Ice.Class(e,{__init__:function(t,n,i,r,s){e.call(this);if(t!==undefined){this._communicator=t;this._instance=t!==null?t.instance:null;this._operation=n;this._connection=i;this._proxy=r;this._adapter=s}}});var n=t.prototype;var i=Object.defineProperty;i(n,"communicator",{get:function(){return this._communicator}});i(n,"connection",{get:function(){return this._connection}});i(n,"proxy",{get:function(){return this._proxy}});i(n,"adapter",{get:function(){return this._adapter}});i(n,"operation",{get:function(){return this._operation}});Ice.AsyncResultBase=t})();(function(){t.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.OperationMode=t.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]);Ice.Current=t.defineStruct(function(e,t,n,i,r,s,o,c,a){this.adapter=e!==undefined?e:null;this.con=t!==undefined?t:null;this.id=n!==undefined?n:new Ice.Identity;this.facet=i!==undefined?i:"";this.operation=r!==undefined?r:"";this.mode=s!==undefined?s:Ice.OperationMode.Normal;this.ctx=o!==undefined?o:null;this.requestId=c!==undefined?c:0;this.encoding=a!==undefined?a:new Ice.EncodingVersion},false)})();(function(){Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}})})();(function(){var e=Ice.Class(Error,{__init__:function(t){if(t instanceof Ice.LocalException){this._ex=t}else{Ice.Debug.assert(t instanceof e);this._ex=t._ex}}});var t=e.prototype;Object.defineProperty(t,"inner",{get:function(){return this._ex}});Ice.RetryException=e})();(function(){Ice.EndpointSelectionType=t.defineEnum([["Random",0],["Ordered",1]])})();(function(){var e=Ice.Promise;var t=Ice.ReferenceMode;var n=Ice.Class({__init__:function(e,n,i){this._reference=e;this._response=e.getMode()==t.ModeTwoway;this._connection=n;this._compress=i},update:function(e,t){try{if(e===this){return t}else if(e.getConnection()===this._connection){return t}}catch(n){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=n})();(function(){var e=Ice.Debug;var t=Ice.HashMap;var n=Ice.Protocol;var i=Ice.StringUtil;var r=Ice.OperationMode;var s=Ice.Identity;var o={};o.traceSend=function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[];var s=_(r,e);t.trace(n.protocolCat,"sending "+I(s)+" "+r.join(""));e.pos=i}};o.traceRecv=function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[];var s=_(r,e);t.trace(n.protocolCat,"received "+I(s)+" "+r.join(""));e.pos=i}};o.trace=function(e,t,n,i){if(i.protocol>=1){var r=t.pos;t.pos=0;var s=[];s.push(e);_(s,t);n.trace(i.protocolCat,s.join(""));t.pos=r}};var c=new t;function a(e,t,n,i){if(!c.has(t)){var r="unknown "+e+" type `"+t+"'";i.trace(n,r);c.set(t,1)}}o.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());o.dumpOctets(n);e.pos=t};o.dumpOctets=function(e){var t=8;var n=[];for(var i=0;i<e.length;i+=t){var r;for(r=i;r-i<t;r++){if(r<e.length){var s=e[r];if(s<0){s+=256}var o;if(s<10){o="  "+s}else if(s<100){o=" "+s}else{o=""+s}n.push(o+" ")}else{n.push("    ")}}n.push('"');for(r=i;r<e.length&&r-i<t;r++){if(e[r]>=32&&e[r]<127){n.push(String.fromCharCode(e[r]))}else{n.push(".")}}n.push('"\n')}console.log(n.join(""))};Ice.TraceUtil=o;function u(e,t){var n=new s;n.__read(t);e.push("\nidentity = "+t.instance.identityToString(n));var r=Ice.StringSeqHelper.read(t);e.push("\nfacet = ");if(r.length>0){e.push(i.escapeString(r[0],""))}var o=t.readString();e.push("\noperation = "+o)}function l(e,t){var n=t.readInt();e.push("\nrequest id = "+n);if(n===0){e.push(" (oneway)")}d(e,t)}function h(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;i<n;++i){e.push("\nrequest #"+i+":");d(e,t)}}function f(t,i){var r=i.readInt();t.push("\nrequest id = "+r);var s=i.readByte();t.push("\nreply status = "+s+" ");switch(s){case n.replyOK:{t.push("(ok)");break}case n.replyUserException:{t.push("(user exception)");break}case n.replyObjectNotExist:case n.replyFacetNotExist:case n.replyOperationNotExist:{switch(s){case n.replyObjectNotExist:{t.push("(object not exist)");break}case n.replyFacetNotExist:{t.push("(facet not exist)");break}case n.replyOperationNotExist:{t.push("(operation not exist)");break}default:{e.assert(false);break}}u(t,i);break}case n.replyUnknownException:case n.replyUnknownLocalException:case n.replyUnknownUserException:{switch(s){case n.replyUnknownException:{t.push("(unknown exception)");break}case n.replyUnknownLocalException:{t.push("(unknown local exception)");break}case n.replyUnknownUserException:{t.push("(unknown user exception)");break}default:{e.assert(false);break}}var o=i.readString();t.push("\nunknown = "+o);break}default:{t.push("(unknown)");break}}if(s===n.replyOK||s===n.replyUserException){var c=i.skipEncaps();if(!c.equals(Ice.Encoding_1_0)){t.push("\nencoding = ");t.push(Ice.encodingVersionToString(c))}}}function d(e,t){u(e,t);var n=t.readByte();e.push("\nmode = "+n+" ");switch(r.valueOf(n)){case r.Normal:{e.push("(normal)");break}case r.Nonmutating:{e.push("(nonmutating)");break}case r.Idempotent:{e.push("(idempotent)");break}default:{e.push("(unknown)");break}}var i=t.readSize();e.push("\ncontext = ");while(i-- >0){var s=t.readString();var o=t.readString();e.push(s+"/"+o);if(i>0){e.push(", ")}}var c=t.skipEncaps();if(!c.equals(Ice.Encoding_1_0)){e.push("\nencoding = ");e.push(Ice.encodingVersionToString(c))}}function p(e,t){t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+I(n)+")");var i=t.readByte();e.push("\ncompression status = "+i+" ");switch(i){case 0:{e.push("(not compressed; do not compress response, if any)");break}case 1:{e.push("(not compressed; compress response, if any)");break}case 2:{e.push("(compressed; compress response, if any)");break}default:{e.push("(unknown)");break}}var r=t.readInt();e.push("\nmessage size = "+r);return n}function _(e,t){var i=p(e,t);switch(i){case n.closeConnectionMsg:case n.validateConnectionMsg:{break}case n.requestMsg:{l(e,t);break}case n.requestBatchMsg:{h(e,t);break}case n.replyMsg:{f(e,t);break}default:{break}}return i}function I(e){switch(e){case n.requestMsg:return"request";case n.requestBatchMsg:return"batch request";case n.replyMsg:return"reply";case n.closeConnectionMsg:return"close connection";case n.validateConnectionMsg:return"validate connection";default:return"unknown"}}})();(function(){var e=Ice.Logger;var t=null;Ice.getProcessLogger=function(){if(t===null){t=new e("","")}return t};Ice.setProcessLogger=function(e){t=e}})();(function(){var e=Ice.UnexpectedObjectException;var t=Ice.MemoryLimitException;Ice.ExUtil={throwUOE:function(t,n){var i=n.ice_id();throw new e("expected element of type `"+t+"' but received '"+i,i,t)},throwMemoryLimitException:function(e,n){throw new t("requested "+e+" bytes, maximum allowed is "+n+" bytes (see Ice.MessageSizeMax)")}}})();(function(){var e=Ice.StringUtil;var t=Ice.HashMap;var n=Ice.Promise;var i=Ice.PropertyNames;var r=Ice.Debug;var s=Ice.ProcessLogger;var o=Ice.getProcessLogger;var c=Ice.InitializationException;var a=0;var u=1;var l=Ice.Class({__init__:function(e,n){this._properties=new t;if(n!==undefined&&n!==null){for(var i=n._properties.entries;i!==null;i=i.next){this._properties.set(i.key,{value:i.value.value,used:false})}}if(e!==undefined&&e!==null){var r=this.parseIceCommandLineOptions(e);e.length=0;for(var s=0;s<r.length;++s){e.push(r[s])}}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);if(n!==undefined){n.used=true;return n.value}else{return t}},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);if(n!==undefined){n.used=true;return parseInt(n.value)}else{return t}},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,n){if(n===undefined||n===null){n=[]}var i=this._properties.get(t);if(i!==undefined){i.used=true;var r=e.splitString(i.value,", \t\r\n");if(r===null){o().warning("mismatched quotes in property "+t+"'s value, returning default value");return n}if(r.length===0){r=n}return r}else{return n}},getPropertiesForPrefix:function(e){var n=new t;for(var i=this._properties.entries;i!==null;i=i.next){if(e===undefined||e===null||i.key.indexOf(e)===0){i.value.used=true;n.set(i.key,i.value.value)}}return n},setProperty:function(e,t){if(e!==null&&e!==undefined){e=e.trim()}var n=o();if(e===null||e===undefined||e.length===0){throw new c("Attempt to set property with empty key")}var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s);for(var u=0;u<i.validProps.length;++u){var l=i.validProps[u][0].pattern;s=l.indexOf(".");r.assert(s!=-1);var h=l.substring(0,s-1);if(h!=a){continue}var f=false;var d=false;var p;for(var _=0;_<i.validProps[u][_].length&&!f;++_){l=i.validProps[u][_].pattern();var I=new RegExp(l);f=I.test(e);if(f&&i.validProps[u][_].deprecated){n.warning("deprecated property: "+e);if(i.validProps[u][_].deprecatedBy!==null){e=i.validProps[u][_].deprecatedBy}}if(f){break}else{I=new RegExp(l.toUpperCase());f=I.test(e.toUpperCase());if(f){d=true;p=l.substr(2);p=p.substr(0,p.length-1);p=p.replace(/\\/g,"");break}}}if(!f){n.warning("unknown property: "+e)}else if(d){n.warning("unknown property: `"+e+"'; did you mean `"+p+"'")}}}if(t!==undefined&&t!==null&&t.length>0){var g=this._properties.get(e);if(g!==undefined){g.value=t}else{this._properties.set(e,{value:t,used:false})}}else{this._properties.delete(e)}},getCommandLineOptions:function(){var e=[];for(var t=this._properties.entries;t!==null;t=t.next){e.push("--"+t.key+"="+t.pv.value)}return e},parseCommandLineOptions:function(e,t){if(e.length>0&&e.charAt(e.length-1)!="."){e+="."}e="--"+e;var n=[];var i=this;t.forEach(function(t){if(t.indexOf(e)===0){if(t.indexOf("=")===-1){t+="=1"}i.parseLine(t.substring(2))}else{n.push(t)}});return n},parseIceCommandLineOptions:function(e){var t=e.slice();for(var n=0;n<i.clPropNames.length;++n){t=this.parseCommandLineOptions(i.clPropNames[n],t)}return t},parse:function(e){var t=e.match(/[^\r\n]+/g);var n;while(n=t.shift()){this.parseLine(n)}},parseLine:function(e){var t="";var n="";var i=a;var r="";var s="";var c=false;for(var l=0;l<e.length;++l){var h=e.charAt(l);switch(i){case a:{switch(h){case"\\":if(l<e.length-1){h=e.charAt(++l);switch(h){case"\\":case"#":case"=":t+=r;r="";t+=h;break;case" ":if(t.length!==0){r+=h}break;default:t+=r;r="";t+="\\";t+=h;break}}else{t+=r;t+=h}break;case" ":case"\t":case"\r":case"\n":if(t.length!==0){r+=h}break;case"=":r="";i=u;break;case"#":c=true;break;default:t+=r;r="";t+=h;break}break}case u:{switch(h){case"\\":if(l<e.length-1){h=e.charAt(++l);switch(h){case"\\":case"#":case"=":n+=n.length===0?s:r;r="";s="";n+=h;break;case" ":r+=h;s+=h;break;default:n+=n.length===0?s:r;r="";s="";n+="\\";n+=h;break}}else{n+=n.length===0?s:r;n+=h}break;case" ":case"\t":case"\r":case"\n":if(n.length!==0){r+=h}break;case"#":c=true;break;default:n+=n.length===0?s:r;r="";s="";n+=h;break}break}}if(c){break}}n+=s;if(i===a&&t.length!==0||i==u&&t.length===0){o().warning('invalid config file entry: "'+e+'"');return}else if(t.length===0){return}this.setProperty(t,n)},clone:function(){return new l(null,this)},getUnusedProperties:function(){var e=[];for(var t=this._properties.entries;t!==null;t=t.next){if(!t.pv.used){e.push(t.key)}}return e}});l.createProperties=function(e,t){return new l(e,t)};Ice.Properties=l})();(function(){var e=Ice.Debug;var t=Ice.HashMap;var n=Ice.StringUtil;var i=Ice.Class({__init__:function(e,n){this._instance=e;this._adapterName=n;this._servantMapMap=new t(t.compareEquals);this._defaultServantMap=new t;this._locatorMap=new t},addServant:function(i,r,s){e.assert(this._instance!==null);if(s===null){s=""}var o=this._servantMapMap.get(r);if(o===undefined){o=new t;this._servantMapMap.set(r,o)}else{if(o.has(s)){var c=new Ice.AlreadyRegisteredException;c.id=this._instance.identityToString(r);c.kindOfObject="servant";if(s.length>0){c.id+=" -f "+n.escapeString(s,"")}throw c}}o.set(s,i)},addDefaultServant:function(t,n){e.assert(this._instance!==null);var i=this._defaultServantMap.get(n);if(i!==undefined){var r=new Ice.AlreadyRegisteredException;r.kindOfObject="default servant";r.id=n;throw r}this._defaultServantMap.set(n,t)},removeServant:function(t,i){e.assert(this._instance!==null);if(i===null){i=""}var r=this._servantMapMap.get(t);if(r===undefined||!r.has(i)){var s=new Ice.NotRegisteredException;s.id=this._instance.identityToString(t);s.kindOfObject="servant";if(i.length>0){s.id+=" -f "+n.escapeString(i,"")}throw s}var o=r.get(i);r.delete(i);if(r.size===0){this._servantMapMap.delete(t)}return o},removeDefaultServant:function(t){e.assert(this._instance!==null);var n=this._defaultServantMap.get(t);if(n===undefined){var i=new Ice.NotRegisteredException;i.kindOfObject="default servant";i.id=t;throw i}this._defaultServantMap.delete(t);return n},removeAllFacets:function(t){e.assert(this._instance!==null);var n=this._servantMapMap.get(t);if(n===undefined){var i=new Ice.NotRegisteredException;i.id=this._instance.identityToString(t);i.kindOfObject="servant";throw i}this._servantMapMap.delete(t);return n},findServant:function(e,t){if(t===null){t=""}var n=this._servantMapMap.get(e);var i=null;if(n===undefined){i=this._defaultServantMap.get(e.category);if(i===undefined){i=this._defaultServantMap.get("")}}else{i=n.get(t)}return i===undefined?null:i},findDefaultServant:function(t){e.assert(this._instance!==null);var n=this._defaultServantMap.get(t);return n===undefined?null:n},findAllFacets:function(n){e.assert(this._instance!==null);var i=this._servantMapMap.get(n);if(i!==undefined){return i.clone()}return new t},hasServant:function(t){var n=this._servantMapMap.get(t);if(n===undefined){return false}else{e.assert(n.size>0);return true}},addServantLocator:function(t,i){e.assert(this._instance!==null);var r=this._locatorMap.get(i);if(r!==undefined){var s=new Ice.AlreadyRegisteredException;s.id=n.escapeString(i,"");s.kindOfObject="servant locator";throw s}this._locatorMap.set(i,t)},removeServantLocator:function(t){e.assert(this._instance!==null);var i=this._locatorMap.get(t);if(i===undefined){var r=new Ice.NotRegisteredException;r.id=n.escapeString(t,"");r.kindOfObject="servant locator";throw r}this._locatorMap.delete(t);return i},findServantLocator:function(e){var t=this._locatorMap.get(e);return t===undefined?null:t},destroy:function(){e.assert(this._instance!==null);var t=this._instance.initializationData().logger;this._servantMapMap.clear();this._defaultServantMap.clear();var n=this._locatorMap.clone();this._locatorMap.clear();this._instance=null;for(var i=n.entries;i!==null;i=i.next){var r=i.value;try{r.deactivate(i.key)}catch(s){var o="exception during locator deactivation:\n"+"object adapter: `"+this._adapterName+"'\n"+"locator category: `"+i.key+"'\n"+s.toString();t.error(o)}}}});Ice.ServantManager=i})();(function(){var e=Ice.__M;var t=Ice.Debug;var n=Ice.ExUtil;var i=Ice.FormatType;var r=Ice.HashMap;var s=Ice.Object;var o=Ice.OptionalFormat;var c=Ice.Protocol;var a=Ice.TraceUtil;var u=Ice.ArrayUtil;var l=Ice.SlicedData;var h={};h.NoSlice=0;h.ObjectSlice=1;h.ExceptionSlice=2;var f=255;var d=1<<0;var p=1<<1;var _=1<<1|1<<0;var I=1<<2;var g=1<<3;var v=1<<4;var m=1<<5;Number.isNaN=Number.isNaN||function(e){return typeof e==="number"&&isNaN(e)};var y=function(e,t){this.index=e;this.patcher=t};var w=Ice.Class;var E=w({__init__:function(e,t,n,i){this._stream=e;this._encaps=t;this._sliceObjects=n;this._servantFactoryManager=i;this._patchMap=null;this._unmarshaledMap=new r;this._typeIdMap=null;this._typeIdIndex=0;this._objectList=null},readOpt:function(){return false},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(this._typeIdMap===null){this._typeIdMap=new r}if(e){n=this._stream.readSize();t=this._typeIdMap.get(n);if(t===undefined){throw new Ice.UnmarshalOutOfBoundsException}}else{t=this._stream.readString();this._typeIdMap.set(++this._typeIdIndex,t)}return t},newInstance:function(e){var t=this._servantFactoryManager.find(e);var n=null;if(t!==undefined){n=t.create(e)}if(n===null||n===undefined){t=this._servantFactoryManager.find("");if(t!==undefined){n=t.create(e)}}if(n===null||n===undefined){n=this._stream.createObject(e)}return n},addPatchEntry:function(e,n){t.assert(e>0);var i=this._unmarshaledMap.get(e);if(i!==undefined&&i!==null){n.call(null,i);return}if(this._patchMap===null){this._patchMap=new r}var s=this._patchMap.get(e);if(s===undefined){s=[];this._patchMap.set(e,s)}s.push(n)},unmarshal:function(e,n){var i,r,s;this._unmarshaledMap.set(e,n);n.__read(this._stream);if(this._patchMap!==null){s=this._patchMap.get(e);if(s!==undefined){t.assert(s.length>0);for(i=0,r=s.length;i<r;++i){s[i](n)}this._patchMap.delete(e)}}if((this._patchMap===null||this._patchMap.size===0)&&this._objectList===null){try{n.ice_postUnmarshal()}catch(o){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+o.toString())}}else{if(this._objectList===null){this._objectList=[]}this._objectList.push(n);if(this._patchMap===null||this._patchMap.size===0){for(i=0,r=this._objectList.length;i<r;i++){try{this._objectList[i].ice_postUnmarshal()}catch(o){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+o.toString())}}this._objectList=[]}}}});var x=w(E,{__init__:function(e,t,n,i){E.call(this,e,t,n,i);this._sliceType=h.NoSlice},readObject:function(e){t.assert(e!==null);var n=this._stream.readInt();if(n>0){throw new Ice.MarshalException("invalid object id")}n=-n;if(n===0){e.call(null,null)}else{this.addPatchEntry(n,e)}},throwException:function(){t.assert(this._sliceType===h.NoSlice);var e=this._stream.readBool();this._sliceType=h.ExceptionSlice;this._skipFirstSlice=false;this.startSlice();var n=this._typeId;while(true){var i=this._stream.createUserException(this._typeId);if(i!==null){i.__read(this._stream);if(e){this.readPendingObjects()}throw i}this.skipSlice();try{this.startSlice()}catch(r){if(r instanceof Ice.UnmarshalOutOfBoundsException){r.reason="unknown exception type `"+n+"'"}throw r}}},startInstance:function(e){t.assert(this._sliceType===e);this._skipFirstSlice=true},endInstance:function(){var e;if(this._sliceType===h.ObjectSlice){this.startSlice();e=this._stream.readSize();if(e!==0){throw new Ice.MarshalException("invalid Object slice")}this.endSlice()}this._sliceType=h.NoSlice;return null},startSlice:function(){var e;if(this._skipFirstSlice){this._skipFirstSlice=false;return this._typeId}if(this._sliceType===h.ObjectSlice){e=this._stream.readBool();this._typeId=this.readTypeId(e)}else{this._typeId=this._stream.readString()}this._sliceSize=this._stream.readInt();if(this._sliceSize<4){throw new Ice.UnmarshalOutOfBoundsException}return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;if(this._sliceType===h.ObjectSlice){a.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}else{a.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}}t.assert(this._sliceSize>=4);this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{t=this._stream.readSize();for(e=t;e>0;--e){this.readInstance()}}while(t>0);if(this._patchMap!==null&&this._patchMap.size!==0){throw new Ice.MarshalException("index for class received, but no instance")}},readInstance:function(){var e=this._stream.readInt(),t,n=null;if(e<=0){throw new Ice.MarshalException("invalid object id")}this._sliceType=h.ObjectSlice;this._skipFirstSlice=false;this.startSlice();t=this._typeId;while(true){if(this._typeId==s.ice_staticId()){throw new Ice.NoObjectFactoryException("",t)}n=this.newInstance(this._typeId);if(n){break}if(!this._sliceObjects){throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId)}this.skipSlice();this.startSlice()}this.unmarshal(e,n)}});var S=w(E,{__init__:function(e,t,n,i){E.call(this,e,t,n,i);this._current=null;this._objectIdIndex=1},readObject:function(e){t.assert(e!==undefined);var n=this._stream.readSize();if(n<0){throw new Ice.MarshalException("invalid object id")}if(n===0){if(e!==null){e.call(null,null)}}else if(this._current!==null&&(this._current.sliceFlags&g)!==0){if(e!==null){if(this._current.indirectPatchList===null){this._current.indirectPatchList=[]}var i=new y;i.index=n-1;i.patcher=e;this._current.indirectPatchList.push(i)}}else{this.readInstance(n,e)}},throwException:function(){t.assert(this._current===null);this.push(h.ExceptionSlice);this.startSlice();var e=this._current.typeId;while(true){var n=this._stream.createUserException(this._current.typeId);if(n!==null){n.__read(this._stream);throw n}this.skipSlice();if((this._current.sliceFlags&m)!==0){if(e.indexOf("::")===0){throw new Ice.UnknownUserException(e.substr(2))}throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){t.assert(e!==undefined);t.assert(this._current.sliceType!==null&&this._current.sliceType===e);this._current.skipFirstSlice=true},endInstance:function(e){var t=null;if(e){t=this.readSlicedData()}if(this._current.slices!==null){this._current.slices.length=0;this._current.indirectionTables.length=0}this._current=this._current.previous;return t},startSlice:function(){if(this._current.skipFirstSlice){this._current.skipFirstSlice=false;return this._current.typeId}this._current.sliceFlags=this._stream.readByte();if(this._current.sliceType===h.ObjectSlice){if((this._current.sliceFlags&_)===_){this._current.typeId="";this._current.compactId=this._stream.readSize()}else if((this._current.sliceFlags&(p|d))!==0){this._current.typeId=this.readTypeId((this._current.sliceFlags&p)!==0);this._current.compactId=-1}else{this._current.typeId="";this._current.compactId=-1}}else{this._current.typeId=this._stream.readString();this._current.compactId=-1}if((this._current.sliceFlags&v)!==0){this._current.sliceSize=this._stream.readInt();if(this._current.sliceSize<4){throw new Ice.UnmarshalOutOfBoundsException}}else{this._current.sliceSize=0}return this._current.typeId},endSlice:function(){var e,n,i=[],r;if((this._current.sliceFlags&I)!==0){this._stream.skipOpts()}if((this._current.sliceFlags&g)!==0){r=this._stream.readAndCheckSeqSize(1);for(n=0;n<r;++n){i[n]=this.readInstance(this._stream.readSize(),null)}if(i.length===0){throw new Ice.MarshalException("empty indirection table")}if((this._current.indirectPatchList===null||this._current.indirectPatchList.length===0)&&(this._current.sliceFlags&I)===0){throw new Ice.MarshalException("no references to indirection table")}if(this._current.indirectPatchList!==null){for(n=0,r=this._current.indirectPatchList.length;n<r;++n){e=this._current.indirectPatchList[n];t.assert(e.index>=0);if(e.index>=i.length){throw new Ice.MarshalException("indirection out of range")}this.addPatchEntry(i[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;var n=this._stream.instance.traceLevels().slicingCat;if(this._current.sliceType===h.ExceptionSlice){a.traceSlicing("exception",this._current.typeId,n,e)}else{a.traceSlicing("object",this._current.typeId,n,e)}}var i=this._stream.pos;if((this._current.sliceFlags&v)!==0){t.assert(this._current.sliceSize>=4);this._stream.skip(this._current.sliceSize-4)}else{if(this._current.sliceType===h.ObjectSlice){throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing "+"(the sender should use the sliced format instead)",this._current.typeId)}if(this._current.typeId.indexOf("::")===0){throw new Ice.UnknownUserException(this._current.typeId.substring(2))}throw new Ice.UnknownUserException(this._current.typeId)}var r=new Ice.SliceInfo;r.typeId=this._current.typeId;r.compactId=this._current.compactId;r.hasOptionalMembers=(this._current.sliceFlags&I)!==0;r.isLastSlice=(this._current.sliceFlags&m)!==0;var s=this._stream._buf;var o=s.position;var c=o;if(r.hasOptionalMembers){--c}s.position=i;r.bytes=s.getArray(c-i);s.position=o;if(this._current.slices===null){this._current.slices=[];this._current.indirectionTables=[]}if((this._current.sliceFlags&g)!==0){var u=this._stream.readAndCheckSeqSize(1);var l=[];for(var f=0;f<u;++f){l[f]=this.readInstance(this._stream.readSize(),null)}this._current.indirectionTables.push(l)}else{this._current.indirectionTables.push(null)}this._current.slices.push(r)},readOpt:function(e,t){if(this._current===null){return this._stream.readOptImpl(e,t)}if((this._current.sliceFlags&I)!==0){return this._stream.readOptImpl(e,t)}return false},readInstance:function(e,n){t.assert(e>0);var i,r=null;if(e>1){if(n!==null){this.addPatchEntry(e,n)}return e}this.push(h.ObjectSlice);e=++this._objectIdIndex;this.startSlice();i=this._current.typeId;while(true){if(this._current.compactId>=0){this._current.typeId="";if(this._current.typeId.length===0){this._current.typeId=this._stream.getTypeId(this._current.compactId)}}if(this._current.typeId.length>0){r=this.newInstance(this._current.typeId);if(r!==null&&r!==undefined){break}}if(!this._sliceObjects){throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId)}this.skipSlice();if((this._current.sliceFlags&m)!==0){r=new Ice.UnknownSlicedObject(i);break}this.startSlice()}this.unmarshal(e,r);if(this._current===null&&this._patchMap!==null&&this._patchMap.size!==0){throw new Ice.MarshalException("index for class received, but no instance")}if(n!==null){n.call(null,r)}return e},readSlicedData:function(){var e,n,i,r,o,c;if(this._current.slices===null){return null}t.assert(this._current.slices.length===this._current.indirectionTables.length);for(e=0,n=this._current.slices.length;e<n;++e){i=this._current.indirectionTables[e];r=this._current.slices[e];r.objects=[];c=i?i.length:0;for(o=0;o<c;++o){this.addPatchEntry(i[o],b(r.objects,o,s))}}return new l(u.clone(this._current.slices))},push:function(e){if(this._current===null){this._current=new S.InstanceData(null)}else{this._current=!this._current.next?new S.InstanceData(this._current):this._current.next}this._current.sliceType=e;this._current.skipFirstSlice=false}});S.InstanceData=function(e){if(e!==null){e.next=this}this.previous=e;this.next=null;this.sliceType=null;this.skipFirstSlice=false;this.slices=null;this.indirectionTables=null;this.sliceFlags=0;this.sliceSize=0;this.typeId=null;this.compactId=0;this.indirectPatchList=null};var b=function(e,t,i){return function(r){if(r!==null&&!(r instanceof i)){n.throwUOE(i.ice_staticId(),r)}e[t]=r}};var C=w({__init__:function(e,t){this._stream=e;this._encaps=t;this._marshaledMap=new r;this._typeIdMap=null;this._typeIdIndex=0},writeOpt:function(){return false},writePendingObjects:function(){return undefined},registerTypeId:function(e){if(this._typeIdMap===null){this._typeIdMap=new r}var t=this._typeIdMap.get(e);if(t!==undefined){return t}this._typeIdMap.set(e,++this._typeIdIndex);return-1}});var P=w(C,{__init__:function(e,t){C.call(this,e,t);this._sliceType=h.NoSlice;this._writeSlice=0;this._objectIdIndex=0;this._toBeMarshaledMap=new r},writeObject:function(e){t.assert(e!==undefined);if(e!==null){this._stream.writeInt(-this.registerObject(e))}else{this._stream.writeInt(0)}},writeUserException:function(e){t.assert(e!==null&&e!==undefined);var n=e.__usesClasses();this._stream.writeBool(n);e.__write(this._stream);if(n){this.writePendingObjects()}},startInstance:function(e){this._sliceType=e},endInstance:function(){if(this._sliceType===h.ObjectSlice){this.startSlice(s.ice_staticId(),-1,true);this._stream.writeSize(0);this.endSlice()}this._sliceType=h.NoSlice},startSlice:function(e){if(this._sliceType===h.ObjectSlice){var t=this.registerTypeId(e);if(t<0){this._stream.writeBool(false);this._stream.writeString(e)}else{this._stream.writeBool(true);this._stream.writeSize(t)}}else{this._stream.writeString(e)}this._stream.writeInt(0);this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){var e=this,t=function(t,n){e._stream.writeInt(n);try{t.ice_preMarshal()}catch(i){e._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+i.toString())}t.__write(e._stream)},n;while(this._toBeMarshaledMap.size>0){this._marshaledMap.merge(this._toBeMarshaledMap);n=this._toBeMarshaledMap;this._toBeMarshaledMap=new r;this._stream.writeSize(n.size);n.forEach(t)}this._stream.writeSize(0)},registerObject:function(e){t.assert(e!==null);var n=this._toBeMarshaledMap.get(e);if(n!==undefined){return n}n=this._marshaledMap.get(e);if(n!==undefined){return n}this._toBeMarshaledMap.set(e,++this._objectIdIndex);return this._objectIdIndex}});var M=w(C,{__init__:function(e,t){C.call(this,e,t);this._current=null;this._objectIdIndex=1},writeObject:function(e){t.assert(e!==undefined);var n,s;if(e===null){this._stream.writeSize(0)}else if(this._current!==null&&this._encaps.format===i.SlicedFormat){if(this._current.indirectionTable===null){this._current.indirectionTable=[];this._current.indirectionMap=new r}n=this._current.indirectionMap.get(e);if(n===undefined){this._current.indirectionTable.push(e);s=this._current.indirectionTable.length;this._current.indirectionMap.set(e,s);this._stream.writeSize(s)}else{this._stream.writeSize(n)}}else{this.writeInstance(e)}},writePendingObjects:function(){return undefined},writeUserException:function(e){t.assert(e!==null&&e!==undefined);e.__write(this._stream)},startInstance:function(e,t){if(this._current===null){this._current=new M.InstanceData(null)}else{this._current=this._current.next===null?new M.InstanceData(this._current):this._current.next}this._current.sliceType=e;this._current.firstSlice=true;if(t!==null&&t!==undefined){this.writeSlicedData(t)}},endInstance:function(){this._current=this._current.previous},startSlice:function(e,n,r){t.assert((this._current.indirectionTable===null||this._current.indirectionTable.length===0)&&(this._current.indirectionMap===null||this._current.indirectionMap.size===0));this._current.sliceFlagsPos=this._stream.pos;this._current.sliceFlags=0;if(this._encaps.format===i.SlicedFormat){this._current.sliceFlags|=v}if(r){this._current.sliceFlags|=m}this._stream.writeByte(0);if(this._current.sliceType===h.ObjectSlice){if(this._encaps.format===i.SlicedFormat||this._current.firstSlice){if(n>=0){this._current.sliceFlags|=_;this._stream.writeSize(n)}else{var s=this.registerTypeId(e);if(s<0){this._current.sliceFlags|=d;this._stream.writeString(e)}else{this._current.sliceFlags|=p;this._stream.writeSize(s)}}}}else{this._stream.writeString(e)}if((this._current.sliceFlags&v)!==0){
this._stream.writeInt(0)}this._current.writeSlice=this._stream.pos;this._current.firstSlice=false},endSlice:function(){var e,n,r;if((this._current.sliceFlags&I)!==0){this._stream.writeByte(f)}if((this._current.sliceFlags&v)!==0){e=this._stream.pos-this._current.writeSlice+4;this._stream.rewriteInt(e,this._current.writeSlice-4)}if(this._current.indirectionTable!==null&&this._current.indirectionTable.length!==0){t.assert(this._encaps.format===i.SlicedFormat);this._current.sliceFlags|=g;this._stream.writeSize(this._current.indirectionTable.length);for(n=0,r=this._current.indirectionTable.length;n<r;++n){this.writeInstance(this._current.indirectionTable[n])}this._current.indirectionTable.length=0;this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){if(this._current===null){return this._stream.writeOptImpl(e,t)}if(this._stream.writeOptImpl(e,t)){this._current.sliceFlags|=I;return true}return false},writeSlicedData:function(e){t.assert(e!==null&&e!==undefined);if(this._encaps.format!==i.SlicedFormat){return}var n,s,o,c,a;for(n=0,s=e.slices.length;n<s;++n){o=e.slices[n];this.startSlice(o.typeId,o.compactId,o.isLastSlice);this._stream.writeBlob(o.bytes);if(o.hasOptionalMembers){this._current.sliceFlags|=I}if(o.objects!==null&&o.objects.length>0){if(this._current.indirectionTable===null){this._current.indirectionTable=[];this._current.indirectionMap=new r}for(c=0,a=o.objects.length;c<a;++c){this._current.indirectionTable.push(o.objects[c])}}this.endSlice()}},writeInstance:function(e){t.assert(e!==null&&e!==undefined);var n=this._marshaledMap.get(e);if(n!==undefined){this._stream.writeSize(n);return}this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(i){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+i.toString())}this._stream.writeSize(1);e.__write(this._stream)}});M.InstanceData=function(e){t.assert(e!==undefined);if(e!==null){e.next=this}this.previous=e;this.next=null;this.sliceType=null;this.firstSlice=false;this.sliceFlags=0;this.writeSlice=0;this.sliceFlagsPos=0;this.indirectionTable=null;this.indirectionMap=null};var O=w({__init__:function(){this.start=0;this.sz=0;this.encoding=null;this.encoding_1_0=false;this.decoder=null;this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e;this.encoding_1_0=e.equals(Ice.Encoding_1_0)}});var k=w({__init__:function(){this.start=0;this.format=i.DefaultFormat;this.encoding=null;this.encoding_1_0=false;this.encoder=null;this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e;this.encoding_1_0=e.equals(Ice.Encoding_1_0)}});var A=w({__init__:function(e,t,n){this._instance=e;this._closure=null;this._encoding=t;this._readEncapsStack=null;this._writeEncapsStack=null;this._readEncapsCache=null;this._writeEncapsCache=null;this._sliceObjects=true;this._startSeq=-1;this._sizePos=-1;if(n!==undefined){this._buf=new Ice.Buffer(n)}else{this._buf=new Ice.Buffer}},reset:function(){this._buf.reset();this.clear()},clear:function(){if(this._readEncapsStack!==null){t.assert(this._readEncapsStack.next);this._readEncapsStack.next=this._readEncapsCache;this._readEncapsCache=this._readEncapsStack;this._readEncapsCache.reset();this._readEncapsStack=null}if(this._writeEncapsStack!==null){t.assert(this._writeEncapsStack.next);this._writeEncapsStack.next=this._writeEncapsCache;this._writeEncapsCache=this._writeEncapsStack;this._writeEncapsCache.reset();this._writeEncapsStack=null}this._startSeq=-1;this._sliceObjects=true},swap:function(e){t.assert(this._instance===e._instance);var n,i,r,s,o;n=e._buf;e._buf=this._buf;this._buf=n;i=e._closure;e._closure=this._closure;this._closure=i;this.resetEncaps();e.resetEncaps();r=e._startSeq;e._startSeq=this._startSeq;this._startSeq=r;s=e._minSeqSize;e._minSeqSize=this._minSeqSize;this._minSeqSize=s;o=e._sizePos;e._sizePos=this._sizePos;this._sizePos=o},resetEncaps:function(){this._readEncapsStack=null;this._writeEncapsStack=null},resize:function(e){this._buf.resize(e);this._buf.position=e},prepareWrite:function(){this._buf.position=0;return this._buf},startWriteObject:function(e){t.assert(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null);this._writeEncapsStack.encoder.startInstance(h.ObjectSlice,e)},endWriteObject:function(){t.assert(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null);this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);this._readEncapsStack.decoder.startInstance(h.ObjectSlice)},endReadObject:function(e){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);return this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){t.assert(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null);this._writeEncapsStack.encoder.startInstance(h.ExceptionSlice,e)},endWriteException:function(){t.assert(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null);this._writeEncapsStack.encoder.endInstance()},startReadException:function(){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);this._readEncapsStack.decoder.startInstance(h.ExceptionSlice)},endReadException:function(e){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);return this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){if(e===undefined){if(this._writeEncapsStack!==null){e=this._writeEncapsStack.encoding;t=this._writeEncapsStack.format}else{e=this._encoding;t=i.DefaultFormat}}c.checkSupportedEncoding(e);var n=this._writeEncapsCache;if(n!==null){n.reset();this._writeEncapsCache=this._writeEncapsCache.next}else{n=new k}n.next=this._writeEncapsStack;this._writeEncapsStack=n;this._writeEncapsStack.format=t;this._writeEncapsStack.setEncoding(e);this._writeEncapsStack.start=this._buf.limit;this.writeInt(0);this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){t.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start;var n=this._buf.limit-e;this._buf.putIntAt(e,n);var i=this._writeEncapsStack;this._writeEncapsStack=i.next;i.next=this._writeEncapsCache;this._writeEncapsCache=i;this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(this._writeEncapsStack===null){throw new Ice.EncapsulationException("not in an encapsulation")}this.endWriteEncaps()},writeEmptyEncaps:function(e){c.checkSupportedEncoding(e);this.writeInt(6);e.__write(this)},writeEncaps:function(e){if(e.length<6){throw new Ice.EncapsulationException}this.expand(e.length);this._buf.putArray(e)},getWriteEncoding:function(){return this._writeEncapsStack!==null?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;if(e!==null){e.reset();this._readEncapsCache=this._readEncapsCache.next}else{e=new O}e.next=this._readEncapsStack;this._readEncapsStack=e;this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6){throw new Ice.UnmarshalOutOfBoundsException}if(t-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;n.__read(this);c.checkSupportedEncoding(n);this._readEncapsStack.setEncoding(n);return n},endReadEncaps:function(){t.assert(this._readEncapsStack!==null);if(!this._readEncapsStack.encoding_1_0){this.skipOpts();if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){throw new Ice.EncapsulationException}}else if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz){throw new Ice.EncapsulationException}try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}var n=this._readEncapsStack;this._readEncapsStack=n.next;n.next=this._readEncapsCache;this._readEncapsCache=n;this._readEncapsCache.reset()},skipEmptyEncaps:function(){var e=this.readInt();if(e<6){throw new Ice.EncapsulationException}if(e-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}var t=new Ice.EncodingVersion;t.__read(this);if(t.equals(Ice.Encoding_1_0)){if(e!=6){throw new Ice.EncapsulationException}}else{this._buf.position=this._buf.position+e-6}return t},endReadEncapsChecked:function(){if(this._readEncapsStack===null){throw new Ice.EncapsulationException("not in an encapsulation")}this.endReadEncaps()},readEncaps:function(e){t.assert(e!==undefined);var n=this.readInt();if(n<6){throw new Ice.UnmarshalOutOfBoundsException}if(n-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}if(e!==null){e.__read(this);this._buf.position=this._buf.position-6}else{this._buf.position=this._buf.position-4}try{return this._buf.getArray(n)}catch(i){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return this._readEncapsStack!==null?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){t.assert(this._readEncapsStack!==null);return this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6){throw new Ice.UnmarshalOutOfBoundsException}var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(n){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,n,i){t.assert(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null);this._writeEncapsStack.encoder.startSlice(e,n,i)},endWriteSlice:function(){t.assert(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null);this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);return this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);this._readEncapsStack.decoder.endSlice()},skipSlice:function(){t.assert(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null);this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){if(this._readEncapsStack!==null&&this._readEncapsStack.decoder!==null){this._readEncapsStack.decoder.readPendingObjects()}else if(this._readEncapsStack!==null&&this._readEncapsStack.encoding_1_0||this._readEncapsStack===null&&this._encoding.equals(Ice.Encoding_1_0)){this.skipSize()}},writePendingObjects:function(){if(this._writeEncapsStack!==null&&this._writeEncapsStack.encoder!==null){this._writeEncapsStack.encoder.writePendingObjects()}else if(this._writeEncapsStack!==null&&this._writeEncapsStack.encoding_1_0||this._writeEncapsStack===null&&this._encoding.equals(Ice.Encoding_1_0)){this.writeSize(0)}},writeSize:function(e){if(e>254){this.expand(5);this._buf.put(255);this._buf.putInt(e)}else{this.expand(1);this._buf.put(e)}},readSize:function(){try{var e=this._buf.get();if(e===255){var t=this._buf.getInt();if(t<0){throw new Ice.UnmarshalOutOfBoundsException}return t}return e}catch(n){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(t===0){return t}if(this._startSeq===-1||this._buf.position>this._startSeq+this._minSeqSize){this._startSeq=this._buf.position;this._minSeqSize=t*e}else{this._minSeqSize+=t*e}if(this._startSeq+this._minSeqSize>this._buf.limit){throw new Ice.UnmarshalOutOfBoundsException}return t},startSize:function(){var e=this._buf.position;this.writeInt(0);return e},endSize:function(e){t.assert(e>=0);this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){if(e===null){return}this.expand(e.length);this._buf.putArray(e)},readBlob:function(e){if(this._buf.remaining<e){throw new Ice.UnmarshalOutOfBoundsException}try{return this._buf.getArray(e)}catch(t){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,n){t.assert(this._writeEncapsStack!==null);if(this._writeEncapsStack.encoder!==null){return this._writeEncapsStack.encoder.writeOpt(e,n)}return this.writeOptImpl(e,n)},readOpt:function(e,n){t.assert(this._readEncapsStack!==null);if(this._readEncapsStack.decoder!==null){return this._readEncapsStack.decoder.readOpt(e,n)}return this.readOptImpl(e,n)},writeOptValue:function(e,t,n,i){if(i!==undefined){if(this.writeOpt(e,t)){n.call(this,i)}}},readOptValue:function(e,t,n){if(this.readOpt(e,t)){return n.call(this)}else{return undefined}},writeByte:function(e){this.expand(1);this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){if(e===null||e.length===0){this.writeSize(0)}else{this.writeSize(e.length);this.expand(e.length);this._buf.putArray(e)}},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1);this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return this._buf.get()===1}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2);this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4);this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8);this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4);this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8);this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){if(e===null||e.length===0){this.writeSize(0)}else{this._buf.writeString(this,e)}},readString:function(){var e=this.readSize();if(e===0){return""}if(this._buf.remaining<e){throw new Ice.UnmarshalOutOfBoundsException}try{return this._buf.getString(e)}catch(t){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(t!==undefined){if(this.writeOpt(e,o.FSize)){var n=this.startSize();this.writeProxy(t);this.endSize(n)}}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){if(this.readOpt(e,o.FSize)){this.skip(4);return this.readProxy(t)}else{return undefined}},writeEnum:function(e){if(this.isWriteEncoding_1_0()){if(e.maxValue<127){this.writeByte(e.value)}else if(e.maxValue<32767){this.writeShort(e.value)}else{this.writeInt(e.value)}}else{this.writeSize(e.value)}},readEnum:function(e){var t;if(this.getReadEncoding().equals(Ice.Encoding_1_0)){if(e.maxValue<127){t=this.readByte()}else if(e.maxValue<32767){t=this.readShort()}else{t=this.readInt()}}else{t=this.readSize()}var n=e.valueOf(t);if(n===undefined){throw new Ice.MarshalException("enumerator value "+t+" is out of range")}return n},readOptEnum:function(e,t){if(this.readOpt(e,o.Size)){return this.readEnum(t)}else{return undefined}},writeObject:function(e){this.initWriteEncaps();this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){if(t!==undefined){if(this.writeOpt(e,o.Class)){this.writeObject(t)}}},readObject:function(e,t){this.initReadEncaps();this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,function(i){if(i!==null&&!i.ice_instanceof(t)){n.throwUOE(t.ice_staticId(),i)}e(i)})},readOptObject:function(e,t,n){if(this.readOpt(e,o.Class)){this.readObject(t,n)}else{t(undefined)}},writeUserException:function(e){this.initWriteEncaps();this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps();this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,i,r,s,c;if(this.isReadEncoding_1_0()){return false}while(true){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz){return false}i=this.readByte();if(i===f){this._buf.position-=1;return false}r=o.valueOf(i&7);s=i>>3;if(s===30){s=this.readSize()}if(s>e){c=s<30?1:s<255?2:6;this._buf.position-=c;return false}if(s<e){this.skipOpt(r)}else{if(r!==t){throw new Ice.MarshalException("invalid optional data member `"+s+"': unexpected format")}return true}}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0()){return false}var n=t.value;if(e<30){n|=e<<3;this.writeByte(n)}else{n|=240;this.writeByte(n);this.writeSize(e)}return true},skipOpt:function(e){switch(e){case o.F1:this.skip(1);break;case o.F2:this.skip(2);break;case o.F4:this.skip(4);break;case o.F8:this.skip(8);break;case o.Size:this.skipSize();break;case o.VSize:this.skip(this.readSize());break;case o.FSize:this.skip(this.readInt());break;case o.Class:this.readObject(null,Ice.Object);break}},skipOpts:function(){var e,t,n;while(true){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz){return}e=this.readByte();t=e<0?e+256:e;if(t===f){return}n=o.valueOf(t&7);if(t>>3===30){this.skipSize()}this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}this._buf.position+=e},skipSize:function(){var e=this.readByte();if(e===255){this.skip(4)}},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var n=null,i;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";i=e.type(r);if(i!==undefined){n=new i}}catch(s){throw new Ice.NoObjectFactoryException("no object factory",t,s)}return n},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return t===undefined?"":t},isReadEncoding_1_0:function(){return this._readEncapsStack!==null?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(this._readEncapsStack===null){this._readEncapsStack=this._readEncapsCache;if(this._readEncapsStack!==null){this._readEncapsCache=this._readEncapsCache.next}else{this._readEncapsStack=new O}this._readEncapsStack.setEncoding(this._encoding);this._readEncapsStack.sz=this._buf.limit}if(this._readEncapsStack.decoder===null){var e=this._instance.servantFactoryManager();if(this._readEncapsStack.encoding_1_0){this._readEncapsStack.decoder=new x(this,this._readEncapsStack,this._sliceObjects,e)}else{this._readEncapsStack.decoder=new S(this,this._readEncapsStack,this._sliceObjects,e)}}},initWriteEncaps:function(){if(!this._writeEncapsStack){this._writeEncapsStack=this._writeEncapsCache;if(this._writeEncapsStack){this._writeEncapsCache=this._writeEncapsCache.next}else{this._writeEncapsStack=new k}this._writeEncapsStack.setEncoding(this._encoding)}if(this._writeEncapsStack.format===i.DefaultFormat){this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat}if(!this._writeEncapsStack.encoder){if(this._writeEncapsStack.encoding_1_0){this._writeEncapsStack.encoder=new P(this,this._writeEncapsStack)}else{this._writeEncapsStack.encoder=new M(this,this._writeEncapsStack)}}},createUserException:function(t){var n=null,i;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";i=e.type(r);if(i!==undefined){n=new i}}catch(s){throw new Ice.MarshalException(s)}return n}});var T=Object.defineProperty;T(A.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}});T(A.prototype,"size",{get:function(){return this._buf.limit}});T(A.prototype,"instance",{get:function(){return this._instance}});T(A.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}});T(A.prototype,"buffer",{get:function(){return this._buf}});var L=function(e,t,n,i,r,s){var o={write:function(t,n){return e.call(t,n)},read:function(e){return t.call(e)},writeOpt:function(t,n,r){t.writeOptValue(n,i,e,r)},readOpt:function(e,n){return e.readOptValue(n,i,t)}};if(r!==undefined&&s!==undefined){o.validate=function(e){return e>=r&&e<=s}}T(o,"minWireSize",{get:function(){return n}});return o};var F=A.prototype;var R=0;var D=255;var j=-32768;var z=32767;var q=0;var B=4294967295;var U=-2147483648;var H=2147483647;var N=-3.4028234664e38;var W=3.4028234664e38;Ice.ByteHelper=L(F.writeByte,F.readByte,1,Ice.OptionalFormat.F1,R,D);Ice.ShortHelper=L(F.writeShort,F.readShort,2,Ice.OptionalFormat.F2,j,z);Ice.IntHelper=L(F.writeInt,F.readInt,4,Ice.OptionalFormat.F4,U,H);Ice.FloatHelper=L(F.writeFloat,F.readFloat,4,Ice.OptionalFormat.F4,N,W);Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=N&&e<=W};Ice.DoubleHelper=L(F.writeDouble,F.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE);Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE};Ice.BoolHelper=L(F.writeBool,F.readBool,1,Ice.OptionalFormat.F1);Ice.LongHelper=L(F.writeLong,F.readLong,8,Ice.OptionalFormat.F8);Ice.LongHelper.validate=function(e){return e.low>=q&&e.low<=B&&e.high>=q&&e.high<=B};Ice.StringHelper=L(F.writeString,F.readString,1,Ice.OptionalFormat.VSize);Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;e.readObject(function(e){t=e},Ice.Object);return t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,F.writeObject,n)},readOpt:function(e,t){var n;e.readOptObject(t,function(e){n=e},Ice.Object);return n}};T(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}});Ice.BasicStream=A})();(function(){Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2}})();(function(){var e=Ice.Class({__init__:function(e,t,n,i){this._instance=e;this._traceLevel=e.traceLevels().network;this._traceCategory=e.traceLevels().networkCat;this._logger=e.initializationData().logger;this._properties=e.initializationData().properties;this._type=t;this._protocol=n;this._secure=i},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}});Ice.ProtocolInstance=e})();(function(){t.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",false,"Ice.Endpoint")})();(function(){var e=Ice.AsyncResultBase;var t=Ice.Debug;var n=Ice.Promise;var i=Ice.Protocol;var r=Ice.UserException;var s=Ice.BasicStream;var o=Ice.Class(e,{__init__:function(t,n,r,o,c,a){e.call(this,t,n,r,o,c);if(t===undefined){return}this._completed=a;this._is=null;this._os=t!==null?new s(this._instance,i.currentProtocolEncoding):null;this._state=0;this._exception=null;this._sentSynchronously=false},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&o.Done)>0},isSent:function(){return(this._state&o.Sent)>0},throwLocalException:function(){if(this._exception!==null){throw this._exception}},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){t.assert((this._state&o.Done)===0);this._state|=o.Sent;if(e){this._state|=o.Done|o.OK;this._cancellationHandler=null;this.succeed(this)}},__markFinished:function(e,n){t.assert((this._state&o.Done)===0);this._state|=o.Done;if(e){this._state|=o.OK}this._cancellationHandler=null;if(n){n(this)}else{this.succeed(this)}},__markFinishedEx:function(e){t.assert((this._state&o.Done)===0);this._exception=e;this._state|=o.Done;this._cancellationHandler=null;this.fail(e,this)},__cancel:function(e){this._cancellationException=e;if(this._cancellationHandler){this._cancellationHandler.asyncRequestCanceled(this,e)}},__cancelable:function(e){if(this._cancellationException){try{throw this._cancellationException}finally{this._cancellationException=null}}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){this._is.startReadEncaps();return this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps()},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){t.assert((this._state&o.Done)!==0);if((this._state&o.OK)===0){try{this._is.startReadEncaps();this._is.throwException()}catch(e){if(e instanceof r){this._is.endReadEncaps()}throw e}}}});o.OK=1;o.Done=2;o.Sent=4;Ice.AsyncResult=o})();(function(){Ice.Address=function(e,t){this.host=e;this.port=t}})();(function(){var e=Ice.BasicStream;var t=Ice.Debug;var n=Ice.ExUtil;var i=Ice.Class;var r=Ice.Protocol;var s=20+8;var o=i({__init__:function(t,n){this._batchStreamInUse=false;this._batchRequestNum=0;this._batchStream=new e(t,r.currentProtocolEncoding);this._batchStream.writeBlob(r.requestBatchHdr);this._batchMarker=this._batchStream.size;this._exception=null;this._maxSize=t.batchAutoFlushSize();if(this._maxSize>0&&n){var i=t.initializationData().properties;var o=i.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65535-s);if(o<this._maxSize){this._maxSize=o}}},prepareBatchRequest:function(e){if(this._exception){throw this._exception}this._batchStream.swap(e)},finishBatchRequest:function(e,n,i){this._batchStream.swap(e);try{if(this._maxSize>0&&this._batchStream.size>=this._maxSize){n.ice_flushBatchRequests()}t.assert(this._batchMarker<this._batchStream.size);this._batchMarker=this._batchStream.size;++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e);this._batchStream.resize(this._batchMarker)},swap:function(e){if(this._batchRequestNum===0){return 0}var t=null;if(this._batchMarker<this._batchStream.size){var n=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker;t=this._batchStream.buffer.getArray(n);this._batchStream.resize(this._batchMarker)}var i=this._batchRequestNum;this._batchStream.swap(e);this._batchRequestNum=0;this._batchStream.writeBlob(r.requestBatchHdr);this._batchMarker=this._batchStream.size;if(t!==null){this._batchStream.writeBlob(t)}return i},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===r.requestBatchHdr.length}});Ice.BatchRequestQueue=o})();(function(){var e=Ice.HashMap;var t=Ice.CommunicatorDestroyedException;var n=Ice.Class({__init__:function(t){this._logger=t;this._destroyed=false;this._tokenId=0;this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach(function(t,n){e.cancel(t)});this._destroyed=true;this._tokens.clear()},schedule:function(e,i){if(this._destroyed){throw new t}var r=this._tokenId++;var s=this;var o=n.setTimeout(function(){s.handleTimeout(r)},i);this._tokens.set(r,{callback:e,id:o,isInterval:false});return r},scheduleRepeated:function(e,i){if(this._destroyed){throw new t}var r=this._tokenId++;var s=this;var o=n.setInterval(function(){s.handleInterval(r)},i);this._tokens.set(r,{callback:e,id:o,isInterval:true});return r},cancel:function(e){if(this._destroyed){return false}var t=this._tokens.get(e);if(t===undefined){return false}this._tokens.delete(e);if(t.isInterval){n.clearInterval(t.id)}else{n.clearTimeout(t.id)}return true},handleTimeout:function(e){if(this._destroyed){return}var t=this._tokens.get(e);if(t!==undefined){this._tokens.delete(e);try{t.callback()}catch(n){this._logger.warning("uncaught exception while executing timer:\n"+n)}}},handleInterval:function(e){if(this._destroyed){return}var t=this._tokens.get(e);if(t!==undefined){try{t.callback()}catch(n){this._logger.warning("uncaught exception while executing timer:\n"+n)}}}});n.setTimeout=Ice.Timer.setTimeout;n.clearTimeout=Ice.Timer.clearTimeout;n.setInterval=Ice.Timer.setInterval;n.clearInterval=Ice.Timer.clearInterval;n.setImmediate=Ice.Timer.setImmediate;Ice.Timer=n})();(function(){var e=Ice.Class;var t=e({__init__:function(e){this._instance=e;this._requests=[]},add:function(e,t){if(this._instance===null){throw new Ice.CommunicatorDestroyedException}var i=new n(this._instance,this,e);e.__cancelable(i);i.token=this._instance.timer().schedule(function(){i.run()},t);this._requests.push(i)},destroy:function(){for(var e=0;e<this._requests.length;++e){this._instance.timer().cancel(this._requests[e].token);this._requests[e].destroy()}this._requests=[];this._instance=null},remove:function(e){var t=this._requests.indexOf(e);if(t>=0){this._requests.splice(t,1)}},cancel:function(e){var t=this._requests.indexOf(e);if(t>=0){this._requests.splice(t,1);return this._instance.timer().cancel(e.token)}return false}});Ice.RetryQueue=t;var n=e({__init__:function(e,t,n,i){this._instance=e;this._queue=t;this._outAsync=n},run:function(){this._outAsync.__retry();this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){if(this._queue.cancel(this)){if(this._instance.traceLevels().retry>=1){this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString())}this._outAsync.__completedEx(t)}}})})();(function(){var e=Ice.ArrayUtil;var t=Ice.Debug;var n=Ice.HashMap;var i=Ice.Promise;var r=Ice.Class({__init__:function(e){this._router=e;t.assert(this._router!==null);this._clientEndpoints=null;this._serverEndpoints=null;this._adapter=null;this._identities=new n(n.compareEquals);this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[];this._serverEndpoints=[];this._adapter=null;this._identities.clear()},equals:function(e){if(this===e){return true}if(e instanceof r){return this._router.equals(e._router)}return false},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new i;if(this._clientEndpoints!==null){e.succeed(this._clientEndpoints)}else{var t=this;this._router.getClientProxy().then(function(n){t.setClientEndpoints(n,e)}).exception(function(t){e.fail(t)})}return e},getServerEndpoints:function(){if(this._serverEndpoints!==null){return(new i).succeed(this._serverEndpoints)}else{var e=this;return this._router.getServerProxy().then(function(t){return e.setServerEndpoints(t)})}},addProxy:function(e){t.assert(e!==null);if(this._identities.has(e.ice_getIdentity())){return(new i).succeed()}else{var n=this;return this._router.addProxies([e]).then(function(t){n.addAndEvictProxies(e,t)})}},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.delete(e.getIdentity())},setClientEndpoints:function(e,t){if(this._clientEndpoints===null){if(e===null){this._clientEndpoints=this._router.__reference().getEndpoints();t.succeed(this._clientEndpoints)}else{e=e.ice_router(null);var n=this;this._router.ice_getConnection().then(function(i){var r=e.ice_timeout(i.timeout());n._clientEndpoints=r.__reference().getEndpoints();t.succeed(n._clientEndpoints)}).exception(function(e){t.fail(e)})}}else{t.succeed(this._clientEndpoints)}},setServerEndpoints:function(e){if(e===null){throw new Ice.NoEndpointException}e=e.ice_router(null);this._serverEndpoints=e.__reference().getEndpoints();return this._serverEndpoints},addAndEvictProxies:function(t,n){var i=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),function(e,t){return e.equals(t);
});if(i>=0){this._evictedIdentities.splice(i,1)}else{this._identities.set(t.ice_getIdentity(),1)}for(var r=0;r<n.length;++r){this._identities.delete(n[r].ice_getIdentity())}}});Ice.RouterInfo=r})();(function(){var e=Ice.AsyncStatus;var t=Ice.AsyncResult;var n=Ice.BasicStream;var i=Ice.Debug;var r=Ice.HashMap;var s=Ice.RetryException;var o=Ice.OperationMode;var c=Ice.Protocol;var a=Ice.Identity;var u=Ice.Class(t,{__init__:function(e,i,r,s,o){if(e!==undefined){t.call(this,e,i,r,s,o);this._os=new n(this._instance,c.currentProtocolEncoding)}else{t.call(this)}},__os:function(){return this._os},__sent:function(){this.__markSent(true)},__completedEx:function(e){this.__markFinishedEx(e)}});var l=Ice.Class(u,{__init__:function(e,n){if(e!==undefined){u.call(this,e.ice_getCommunicator(),n,null,e,null);this._mode=null;this._cnt=0;this._sent=false;this._handler=null}else{t.call(this)}},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this._proxy.__updateRequestHandler(this._handler,null);this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(false)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var n=this._proxy.__reference().getInvocationTimeout();if(n>0){var i=this;this._timeoutToken=this._instance.timer().schedule(function(){i.__cancel(new Ice.InvocationTimeoutException)},n)}}while(true){try{this._sent=false;this._handler=this._proxy.__getRequestHandler();var r=this._handler.sendAsyncRequest(this);if((r&e.Sent)>0){if(t){this._sentSynchronously=true}}return}catch(o){if(o instanceof s){this._proxy.__updateRequestHandler(this._handler,null)}else{var c=this.__handleException(o);if(c>0){this._instance.retryQueue().add(this,c);return}}}}}catch(o){this.__markFinishedEx(o)}},__markSent:function(e){this._sent=true;if(e){if(this._timeoutToken){this._instance.timer().cancel(this._timeoutToken)}}u.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){if(this._timeoutToken){this._instance.timer().cancel(this._timeoutToken)}u.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt);return t.value}});var h=Ice.Class(l,{__init__:function(e,t,n){if(e!==undefined){l.call(this,e,t);this._encoding=c.getCompatibleEncoding(this._proxy.__reference().getEncoding());this._completed=n}else{l.call(this)}},__prepare:function(e,t,n){c.checkSupportedProtocol(c.getCompatibleProtocol(this._proxy.__reference().getProtocol()));this._mode=t;if(n===null){n=h._emptyContext}if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os)}else{this._os.writeBlob(c.requestHdr)}var i=this._proxy.__reference();i.getIdentity().__write(this._os);var s=i.getFacet();if(s===null||s.length===0){Ice.StringSeqHelper.write(this._os,null)}else{Ice.StringSeqHelper.write(this._os,[s])}this._os.writeString(this._operation);this._os.writeByte(t.value);if(n!==undefined){if(n!==null&&!(n instanceof r)){throw new Error("illegal context value, expecting null or HashMap")}Ice.ContextHelper.write(this._os,n)}else{var o=i.getInstance().getImplicitContext();var a=i.getContext();if(o===null){Ice.ContextHelper.write(this._os,a)}else{o.write(a,this._os)}}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,n){return e.sendAsyncRequest(this,t,n,0)},__abort:function(e){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os)}l.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._sentSynchronously=true;this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation);this.__markFinished(true);return}this.__invokeImpl(true)},__completed:function(e){i.assert(this._proxy.ice_isTwoway());var t;try{if(this._is===null){this._is=new n(this._instance,c.currentProtocolEncoding)}this._is.swap(e);t=this._is.readByte();switch(t){case c.replyOK:case c.replyUserException:{break}case c.replyObjectNotExist:case c.replyFacetNotExist:case c.replyOperationNotExist:{var r=new a;r.__read(this._is);var s=Ice.StringSeqHelper.read(this._is);var o;if(s.length>0){if(s.length>1){throw new Ice.MarshalException}o=s[0]}else{o=""}var u=this._is.readString();var l=null;switch(t){case c.replyObjectNotExist:{l=new Ice.ObjectNotExistException;break}case c.replyFacetNotExist:{l=new Ice.FacetNotExistException;break}case c.replyOperationNotExist:{l=new Ice.OperationNotExistException;break}default:{i.assert(false);break}}l.id=r;l.facet=o;l.operation=u;throw l}case c.replyUnknownException:case c.replyUnknownLocalException:case c.replyUnknownUserException:{var h=this._is.readString();var f=null;switch(t){case c.replyUnknownException:{f=new Ice.UnknownException;break}case c.replyUnknownLocalException:{f=new Ice.UnknownLocalException;break}case c.replyUnknownUserException:{f=new Ice.UnknownUserException;break}default:{i.assert(false);break}}f.unknown=h;throw f}default:{throw new Ice.UnknownReplyStatusException}}this.__markFinished(t==c.replyOK,this._completed)}catch(d){this.__completedEx(d)}},__startWriteParams:function(e){this._os.startWriteEncaps(this._encoding,e);return this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){if(e===null||e.length===0){this._os.writeEmptyEncaps(this._encoding)}else{this._os.writeEncaps(e)}},__is:function(){return this._is},__startReadParams:function(){this._is.startReadEncaps();return this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps()},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){i.assert((this._state&t.Done)!==0);if((this._state&t.OK)===0){try{this._is.startReadEncaps();this._is.throwException()}catch(e){if(e instanceof Ice.UserException){this._is.endReadEncaps()}throw e}}}});h._emptyContext=new r;var f=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t);this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(t,n,i){if(this._batchRequestNum===0){this.__sent();return e.Sent}return t.sendAsyncRequest(this,n,i,this._batchRequestNum)},__invoke:function(){c.checkSupportedProtocol(c.getCompatibleProtocol(this._proxy.__reference().getProtocol()));this.__invokeImpl(true)}});var d=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t)},__invokeRemote:function(t,n,i){this.__markFinished(true,function(e){e.succeed(t)});return e.Sent},__invoke:function(){this.__invokeImpl(true)}});var p=Ice.Class(u,{__init__:function(e,t,n){u.call(this,t,n,e,null,null)},__invoke:function(){try{var t=this._connection.getBatchRequestQueue().swap(this._os);var n;if(t===0){this.__sent();n=e.Sent}else{n=this._connection.sendAsyncRequest(this,false,false,t)}if((n&e.Sent)>0){this._sentSynchronously=true}}catch(i){this.__completedEx(i)}}});Ice.OutgoingAsync=h;Ice.ProxyFlushBatch=f;Ice.ProxyGetConnection=d;Ice.ConnectionFlushBatch=p})();(function(){var e=Ice.ArrayUtil;var t=Ice.AsyncResultBase;var n=Ice.AsyncResult;var i=Ice.Debug;var r=Ice.FormatType;var s=Ice.HashMap;var o=Ice.OutgoingAsync;var c=Ice.ProxyFlushBatch;var a=Ice.ProxyGetConnection;var u=Ice.ReferenceMode;var l=Ice.OperationMode;var h=Ice.Class({__init__:function(){this._reference=null;this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(e===undefined||e===null||e.name.length===0){throw new Ice.IllegalIdentityException}if(e.equals(this._reference.getIdentity())){return this}else{var t=new h;t.__setup(this._reference.changeIdentity(e));return t}},ice_getContext:function(){return new s(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(e===undefined||e===null){e=""}if(e===this._reference.getFacet()){return this}else{var t=new h;t.__setup(this._reference.changeFacet(e));return t}},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){if(e===undefined||e===null){e=""}if(e===this._reference.getAdapterId()){return this}else{return this.__newInstance(this._reference.changeAdapterId(e))}},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){if(t===undefined||t===null){t=[]}if(e.equals(t,this._reference.getEndpoints())){return this}else{return this.__newInstance(this._reference.changeEndpoints(t))}},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1){throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e)}if(e===this._reference.getLocatorCacheTimeout()){return this}else{return this.__newInstance(this._reference.changeLocatorCacheTimeout(e))}},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&e!==-1){throw new Error("invalid value passed to ice_invocationTimeout: "+e)}if(e===this._reference.getInvocationTimeout()){return this}else{return this.__newInstance(this._reference.changeInvocationTimeout(e))}},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){if(e===this._reference.getCacheConnection()){return this}else{return this.__newInstance(this._reference.changeCacheConnection(e))}},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){if(e===this._reference.getEndpointSelection()){return this}else{return this.__newInstance(this._reference.changeEndpointSelection(e))}},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){if(e===this._reference.getSecure()){return this}else{return this.__newInstance(this._reference.changeSecure(e))}},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){if(e.equals(this._reference.getEncoding())){return this}else{return this.__newInstance(this._reference.changeEncoding(e))}},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){if(e===this._reference.getPreferSecure()){return this}else{return this.__newInstance(this._reference.changePreferSecure(e))}},ice_getRouter:function(){var e=this._reference.getRouterInfo();return e!==null?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);if(t.equals(this._reference)){return this}else{return this.__newInstance(t)}},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return e!==null?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);if(t.equals(this._reference)){return this}else{return this.__newInstance(t)}},ice_isTwoway:function(){return this._reference.getMode()===u.ModeTwoway},ice_twoway:function(){if(this._reference.getMode()===u.ModeTwoway){return this}else{return this.__newInstance(this._reference.changeMode(u.ModeTwoway))}},ice_isOneway:function(){return this._reference.getMode()===u.ModeOneway},ice_oneway:function(){if(this._reference.getMode()===u.ModeOneway){return this}else{return this.__newInstance(this._reference.changeMode(u.ModeOneway))}},ice_isBatchOneway:function(){return this._reference.getMode()===u.ModeBatchOneway},ice_batchOneway:function(){if(this._reference.getMode()===u.ModeBatchOneway){return this}else{return this.__newInstance(this._reference.changeMode(u.ModeBatchOneway))}},ice_isDatagram:function(){return this._reference.getMode()===u.ModeDatagram},ice_datagram:function(){if(this._reference.getMode()===u.ModeDatagram){return this}else{return this.__newInstance(this._reference.changeMode(u.ModeDatagram))}},ice_isBatchDatagram:function(){return this._reference.getMode()===u.ModeBatchDatagram},ice_batchDatagram:function(){if(this._reference.getMode()===u.ModeBatchDatagram){return this}else{return this.__newInstance(this._reference.changeMode(u.ModeBatchDatagram))}},ice_compress:function(e){var t=this._reference.changeCompress(e);if(t.equals(this._reference)){return this}else{return this.__newInstance(t)}},ice_timeout:function(e){if(e<1&&e!==-1){throw new Error("invalid value passed to ice_timeout: "+e)}var t=this._reference.changeTimeout(e);if(t.equals(this._reference)){return this}else{return this.__newInstance(t)}},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);if(t.equals(this._reference)){return this}else{return this.__newInstance(t)}},ice_getConnection:function(){var e=new a(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new c(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){if(this===e){return true}if(e instanceof h){return this._reference.equals(e._reference)}return false},__reference:function(){return this._reference},__copyFrom:function(e){i.assert(this._reference===null);i.assert(this._requestHandler===null);this._reference=e._reference;this._requestHandler=e._requestHandler},__handleException:function(e,t,n,i,r,s){this.__updateRequestHandler(t,null);if(e instanceof Ice.LocalException&&(!i||n==l.Nonmutating||n==l.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)){try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,s)}catch(o){if(o instanceof Ice.CommunicatorDestroyedException){throw e}else{throw o}}}else{throw e}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway()){throw new Error("`"+e+"' can only be called with a twoway proxy")}},__getRequestHandler:function(){if(this._reference.getCacheConnection()){if(this._requestHandler){return this._requestHandler}}return this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){if(!this._batchRequestQueue){this._batchRequestQueue=this._reference.getBatchRequestQueue()}return this._batchRequestQueue},__setRequestHandler:function(e){if(this._reference.getCacheConnection()){if(!this._requestHandler){this._requestHandler=e}return this._requestHandler}return e},__updateRequestHandler:function(e,t){if(this._reference.getCacheConnection()&&e!==null){if(this._requestHandler&&this._requestHandler!==t){this._requestHandler=this._requestHandler.update(e,t)}}},__setup:function(e){i.assert(this._reference===null);this._reference=e},__newInstance:function(e){var t=new this.constructor;t.__setup(e);return t},ice_instanceof:function(e){if(e){if(this instanceof e){return true}return this.constructor.__instanceof(e)}return false}});h.__invoke=function(e,t,n,i,r,s,c,a,u){if(c!==null||a.length>0){e.__checkAsyncTwowayOnly(t)}var l=new o(e,t,function(e){h.__completed(e,c,a)});try{l.__prepare(t,n,r);if(s===null){l.__writeEmptyParams()}else{var f=l.__startWriteParams(i);s.call(null,f,u);l.__endWriteParams()}l.__invoke()}catch(d){l.__abort(d)}return l};h.__completed=function(e,t,n){if(!h.__check(e,n)){return}try{if(t===null){e.__readEmptyParams();e.succeed(e)}else{var i=t(e);e.succeed.apply(e,i)}}catch(r){h.__dispatchLocalException(e,r);return}};h.__returns_bool=function(e,t){t.push(e.readBool())};h.__returns_byte=function(e,t){t.push(e.readByte())};h.__returns_short=function(e,t){t.push(e.readShort())};h.__returns_int=function(e,t){t.push(e.readInt())};h.__returns_long=function(e,t){t.push(e.readLong())};h.__returns_float=function(e,t){t.push(e.readFloat())};h.__returns_double=function(e,t){t.push(e.readDouble())};h.__returns_string=function(e,t){t.push(e.readString())};h.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())};h.__returns_Object=function(e,t){e.readObject(function(e){t.push(e)},Ice.Object);e.readPendingObjects()};h.__check=function(e,t){try{e.__throwUserException()}catch(n){if(n instanceof Ice.UserException){if(t!==null){for(var i=0;i<t.length;++i){if(n instanceof t[i]){e.fail(n,e);return false}}}e.fail(new Ice.UnknownUserException(n.ice_name()),e);return false}else{e.fail(n,e);return false}}return true};h.__dispatchLocalException=function(e,t){e.fail(t,e)};h.ice_staticId=Ice.Object.ice_staticId;h.checkedCast=function(e,n,i){var r=null;if(e===undefined||e===null){r=new t(null,"checkedCast",null,null,null);r.succeed(null,r)}else{if(n!==undefined){e=e.ice_facet(n)}var s=this;r=new t(e.ice_getCommunicator(),"checkedCast",null,e,null);e.ice_isA(this.ice_staticId(),i).then(function(t,n){if(n){var i=new s;i.__copyFrom(e);r.succeed(i,r)}else{r.succeed(null,r)}}).exception(function(e){if(e instanceof Ice.FacetNotExistException){r.succeed(null,r)}else{r.fail(e,r)}})}return r};h.uncheckedCast=function(e,t){var n=null;if(e!==undefined&&e!==null){n=new this;if(t!==undefined){e=e.ice_facet(t)}n.__copyFrom(e)}return n};Object.defineProperty(h,"minWireSize",{get:function(){return 2}});h.write=function(e,t){e.writeProxy(t)};h.read=function(e){return e.readProxy(this)};h.writeOpt=function(e,t,n){e.writeOptProxy(t,n)};h.readOpt=function(e,t){return e.readOptProxy(t,this)};h.__instanceof=function(e){if(e===this){return true}for(var t in this.__implements){if(this.__implements[t].__instanceof(e)){return true}}if(this.__parent){return this.__parent.__instanceof(e)}return false};var f=Ice.Slice;f.defineProxy=function(e,t,n){var i=function(){e.call(this)};i.__parent=e;i.__implements=n;i.prototype=new e;i.prototype.constructor=i;i.ice_staticId=t;i.checkedCast=h.checkedCast;i.uncheckedCast=h.uncheckedCast;i.write=h.write;i.writeOpt=h.writeOpt;i.read=h.read;i.readOpt=h.readOpt;i.__instanceof=h.__instanceof;Object.defineProperty(i,"minWireSize",{get:function(){return 2}});return i};Ice.ObjectPrx=h})();(function(){Object.defineProperty(Ice,"TCPEndpointType",{value:1});Object.defineProperty(Ice,"SSLEndpointType",{value:2});Object.defineProperty(Ice,"UDPEndpointType",{value:3});Object.defineProperty(Ice,"WSEndpointType",{value:4});Object.defineProperty(Ice,"WSSEndpointType",{value:5});Ice.EndpointInfo=t.defineLocalObject(function(e,t){this.timeout=e!==undefined?e:0;this.compress=t!==undefined?t:false});Ice.Endpoint=t.defineLocalObject();Ice.IPEndpointInfo=t.defineLocalObject(function(e,t,n,i,r){Ice.EndpointInfo.call(this,e,t);this.host=n!==undefined?n:"";this.port=i!==undefined?i:0;this.sourceAddress=r!==undefined?r:""},Ice.EndpointInfo);Ice.TCPEndpointInfo=t.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo);Ice.UDPEndpointInfo=t.defineLocalObject(function(e,t,n,i,r,s,o){Ice.IPEndpointInfo.call(this,e,t,n,i,r);this.mcastInterface=s!==undefined?s:"";this.mcastTtl=o!==undefined?o:0},Ice.IPEndpointInfo);Ice.WSEndpointInfo=t.defineLocalObject(function(e,t,n,i,r,s){Ice.TCPEndpointInfo.call(this,e,t,n,i,r);this.resource=s!==undefined?s:""},Ice.TCPEndpointInfo);Ice.OpaqueEndpointInfo=t.defineLocalObject(function(e,t,n,i){Ice.EndpointInfo.call(this,e,t);this.rawEncoding=n!==undefined?n:new Ice.EncodingVersion;this.rawBytes=i!==undefined?i:null},Ice.EndpointInfo)})();(function(){var e=Ice.Class;var t=e(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t=[];var n;var i="`"+this.protocol();for(n=0;n<e.length;++n){if(e[n].search(/[ \t\n\r]+/)!==-1){i+=' "'+e[n]+'"'}else{i+=" "+e[n]}}i+="'";n=0;while(n<e.length){var r=e[n++];if(r.length<2||r.charAt(0)!="-"){t.push(r);continue}var s=null;if(n<e.length&&e[n].charAt(0)!="-"){s=e[n++]}if(!this.checkOption(r,s,i)){t.push(r);if(s!==null){t.push(s)}}}e.length=0;for(n=0;n<t.length;n++){e.push(t[n])}},equals:function(e){if(!(e instanceof t)){return false}return this.compareTo(e)===0},checkOption:function(){return false}});Ice.EndpointI=t})();(function(){})();(function(){var e=Ice.__M;var t=Ice.Class;var n=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx];function i(t){var i=t[0];var r=typeof i;if(r==="number"){i=n[t[0]]}else if(r==="string"){i=e.type(i)}return{type:i,isObject:t[1]===true,tag:t[2]}}function r(e,t){var n={};var r;var s;n.name=e;n.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal;n.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal;n.amd=t[3]?true:false;n.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat;if(n.amd){n.servantMethod=e+"_async"}else{n.servantMethod=t[0]?t[0]:e}var o;if(t[5]){o=i(t[5]);o.pos=0}n.returns=o;var c=[];var a=[];if(t[6]){for(r=0;r<t[6].length;++r){s=i(t[6][r]);s.pos=r;c.push(s);if(s.tag){a.push(s)}}}a.sort(function(e,t){return e.tag-t.tag});n.inParams=c;n.inParamsOpt=a;var u=[];var l=[];if(t[7]){var h=o?1:0;for(r=0;r<t[7].length;++r){s=i(t[7][r]);s.pos=r+h;u.push(s);if(s.tag){l.push(s)}}}if(o&&o.tag){l.push(o)}l.sort(function(e,t){return e.tag-t.tag});n.outParams=u;n.outParamsOpt=l;var f=[];if(t[8]){for(r=0;r<t[8].length;++r){f.push(t[8][r])}}n.exceptions=f;n.sendsClasses=t[9]===true;n.returnsClasses=t[10]===true;return n}var s=t({__init__:function(e){this.raw=e;this.parsed={}},find:function(e){var t=this.parsed[e];if(t===undefined&&this.raw[e]!==undefined){t=r(e,this.raw[e]);this.parsed[e]=t}return t}});function o(e,t,n,i,r,s,o){var c,a,u;for(c=0;c<n.length;++c){a=n[c];if(!a.tag){u=a.type.read(e);s[a.pos+o]=u}}if(t){u=t.type.read(e);s[t.pos+o]=u}for(c=0;c<i.length;++c){a=i[c];u=a.type.readOpt(e,a.tag);s[a.pos+o]=u}if(r){e.readPendingObjects()}}function c(e,t,n,i,r,s){var o,c;for(o=0;o<i.length;++o){c=i[o];if(!c.tag){c.type.write(e,t[c.pos])}}if(n){n.type.write(e,t[n.pos])}for(o=0;o<r.length;++o){c=r[o];c.type.writeOpt(e,c.tag,t[c.pos])}if(s){e.writePendingObjects()}}var a=t({__init__:function(e,t){this.incomingAsync=e;this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(true)){try{this.__sendResponse(e);this.incomingAsync.__response()}catch(t){this.incomingAsync.__exception(t)}}},ice_exception:function(e){if(this.__checkException(e)){if(this.incomingAsync.__validateResponse(false)){this.__sendException(e);this.incomingAsync.__response()}}else{this.incomingAsync.ice_exception(e)}},__sendResponse:function(e){if(this.op.returns===undefined&&this.op.outParams.length===0){if(e&&e.length>0){throw new Error("ice_response called with invalid arguments")}else{this.incomingAsync.__writeEmptyParams()}}else{var t=this.incomingAsync.__startWriteParams(this.op.format);var n;if(this.op.returns&&!this.op.returns.tag){n=this.op.returns}c(t,e,n,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses);this.incomingAsync.__endWriteParams(true)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t){if(e instanceof this.op.exceptions[t]){return true}}return false},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}});var u=function(e,t,n,i){var r=e[t.servantMethod];if(r===undefined||typeof r!=="function"){var s=i.adapter.getCommunicator();var c="servant for identity "+s.identityToString(i.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(c)}var u=new a(n,t);try{var l=t.amd?[null]:[];if(t.inParams.length===0){n.readEmptyParams()}else{var h=n.startReadParams();var f=t.amd?1:0;o(h,undefined,t.inParams,t.inParamsOpt,t.sendsClasses,l,f);n.endReadParams();if(t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0)){for(var d=0;d<t.inParams.length;++d){var p=t.inParams[d];if(p.isObject&&l[p.pos+f]!==undefined){l[p.pos+f]=l[p.pos+f].value}}}}l.push(i);if(t.amd){l[0]=u;try{r.apply(e,l)}catch(_){u.ice_exception(_)}return Ice.DispatchStatus.DispatchAsync}else{var I=t.outParams.length;if(t.returns){++I}var g=r.apply(e,l);if(I>1&&!(g instanceof Array)){throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+I)}else if(I===1){g=[g]}u.__sendResponse(g);return Ice.DispatchStatus.DispatchOK}}catch(_){if(u.__checkException(_)){u.__sendException(_);return Ice.DispatchStatus.DispatchUserException}else{throw _}}};function l(e,t,n){var i;for(var r=0;i===undefined&&r<e.length;++r){var s=e[r];i=s[t];if(i===undefined){if(n.indexOf(s)===-1){n.push(s)}if(s.__implements){i=l(s.__implements,t,n)}}}return i}var h="__op_";function f(e,t){var n=h+t;var i=e[n];var r;if(i===undefined){r=[];var s=e;while(s&&i===undefined){if(s.__implements){i=l(s.__implements,n,r)}s=s.__parent}if(i!==undefined){e[n]=i}}if(i===undefined){var o;if(e.__ops){o=e.__ops.find(t)}var c;if(o===undefined){var a=e.__parent;while(o===undefined&&a){if(a.__ops){if((o=a.__ops.find(t))!==undefined){c=a}}a=a.__parent}for(var f=0;o===undefined&&f<r.length;++f){var d=r[f];if(d.__ops){if((o=d.__ops.find(t))!==undefined){c=d}}}}if(o!==undefined){i=function(e,t,n){return u(e,o,t,n)};e[n]=i;if(c){c[n]=i}}}return i}function d(e,t,n){var i=n[0]?n[0]:t;var s=null;e.prototype[i]=function(){var e=arguments;if(s===null){s=r(t,n)}var i=e[s.inParams.length];var a=null;if(s.inParams.length>0){a=function(e,t){var n,i,r;for(n=0;n<s.inParams.length;++n){i=s.inParams[n];r=t[i.pos];if(!i.tag||r!==undefined){if(typeof i.type.validate==="function"){if(!i.type.validate(r)){throw new Ice.MarshalException("invalid value for argument "+(n+1)+" in operation `"+s.servantMethod+"'")}}}}c(e,t,undefined,s.inParams,s.inParamsOpt,s.sendsClasses)}}var u=null;if(s.returns||s.outParams.length>0){u=function(e){var t=[];var n=e.__startReadParams();var i;if(s.returns&&!s.returns.tag){i=s.returns}o(n,i,s.outParams,s.outParamsOpt,s.returnsClasses,t,0);e.__endReadParams();if(s.returnsClasses||s.outParamsOpt.length>0){var r=0;if(s.returns&&s.returns.isObject&&t[s.returns.pos+r]!==undefined){t[s.returns.pos+r]=t[s.returns.pos+r].value}for(var c=0;c<s.outParams.length;++c){var a=s.outParams[c];if(a.isObject&&t[a.pos+r]!==undefined){t[a.pos+r]=t[a.pos+r].value}}}t.push(e);return t}}return Ice.ObjectPrx.__invoke(this,s.name,s.sendMode,s.format,i,a,u,s.exceptions,Array.prototype.slice.call(e))}}var p=Ice.Slice;p.defineOperations=function(e,t,n){if(n){e.__ops=new s(n)}e.prototype.__dispatch=function(t,n){var i=f(e,n.operation);if(i===undefined||typeof i!=="function"){throw new Ice.OperationNotExistException(n.id,n.facet,n.operation)}return i.call(i,this,t,n)};if(n){for(var i in n){d(t,i,n[i])}}if(t.__implements){for(var r in t.__implements){var o=t.__implements[r].prototype;for(var c in o){if(typeof o[c]=="function"&&t.prototype[c]===undefined){t.prototype[c]=o[c]}}}}};p.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})})();(function(){var e=Ice.Address;var t=Ice.HashUtil;var n=Ice.StringUtil;var i=Ice.Class;var r=Ice.EndpointParseException;var s=i(Ice.EndpointI,{__init__:function(e,t,n,i,r){this._instance=e;this._host=t===undefined?null:t;this._port=n===undefined?null:n;this._sourceAddr=i===undefined?null:i;this._connectionId=r===undefined?"":r},streamWrite:function(e){e.startWriteEncaps();this.streamWriteImpl(e);e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;this.fillEndpointInfo(e);return e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){if(e===this._connectionId){return this}else{return this.createEndpoint(this._host,this._port,e)}},hashCode:function(){if(this._hashCode===undefined){this._hashCode=this.hashInit(5381)}return this._hashCode},options:function(){var e="";if(this._host!==null&&this._host.length>0){e+=" -h ";var t=this._host.indexOf(":")!=-1;if(t){e+='"'}e+=this._host;if(t){e+='"'}}e+=" -p "+this._port;if(this._sourceAddr!==null&&this._sourceAddr.length>0){e+=" --sourceAddr "+this._sourceAddr}return e},compareTo:function(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof s)){return this.type()<e.type()?-1:1}if(this._port<e._port){return-1}else if(e._port<this._port){return 1}if(this._host!=e._host){return this._host<e._host?-1:1}if(this._sourceAddr!=e._sourceAddr){return this._sourceAddr<e._sourceAddr?-1:1}if(this._connectionId!=e._connectionId){return this._connectionId<e._connectionId?-1:1}return 0},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host);e.writeInt(this._port)},hashInit:function(e){e=t.addNumber(e,this.type());e=t.addString(e,this._host);e=t.addNumber(e,this._port);e=t.addString(e,this._sourceAddr);e=t.addString(e,this._connectionId);return e},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()};e.datagram=function(){return t.datagram()};e.secure=function(){return t.secure()};e.host=this._host;e.port=this._port;e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){Ice.EndpointI.prototype.initWithOptions.call(this,e);if(this._host===null||this._host.length===0){this._host=this._instance.defaultHost()}else if(this._host=="*"){if(t){this._host=""}else{throw new r("`-h *' not valid for proxy endpoint `"+this+"'")}}if(this._host===null){this._host=""}if(this._sourceAddr===null){if(!t){this._sourceAddr=this._instance.defaultSourceAddress()}}else if(t){throw new r("`--sourceAddress not valid for object adapter endpoint `"+this+"'")}},initWithStream:function(e){this._host=e.readString();this._port=e.readInt()},checkOption:function(e,t,i){if(e==="-h"){if(t===null){throw new r("no argument provided for -h option in endpoint "+i)}this._host=t}else if(e==="-p"){if(t===null){throw new r("no argument provided for -p option in endpoint "+i)}try{this._port=n.toInt(t)}catch(s){throw new r("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535){throw new r("port value `"+t+"' out of range in endpoint "+i)}}else if(e==="--sourceAddress"){if(t===null){throw new r("no argument provided for --sourceAddress option in endpoint "+i)}this._sourceAddr=t}else{return false}return true}});Ice.IPEndpointI=s})();(function(){Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType});IceSSL.EndpointInfo=t.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo);IceSSL.WSSEndpointInfo=t.defineLocalObject(function(e,t,n,i,r,s){IceSSL.EndpointInfo.call(this,e,t,n,i,r);this.resource=s!==undefined?s:""},IceSSL.EndpointInfo)})();(function(){Ice.ConnectionInfo=t.defineLocalObject(function(e,t,n,i,r){this.incoming=e!==undefined?e:false;this.adapterName=t!==undefined?t:"";this.connectionId=n!==undefined?n:"";this.rcvSize=i!==undefined?i:0;this.sndSize=r!==undefined?r:0});Ice.ConnectionCallback=t.defineLocalObject();Ice.ACMClose=t.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]);Ice.ACMHeartbeat=t.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]);Ice.ACM=t.defineStruct(function(e,t,n){this.timeout=e!==undefined?e:0;this.close=t!==undefined?t:Ice.ACMClose.CloseOff;this.heartbeat=n!==undefined?n:Ice.ACMHeartbeat.HeartbeatOff},true);Ice.Connection=t.defineLocalObject();Ice.IPConnectionInfo=t.defineLocalObject(function(e,t,n,i,r,s,o,c,a){Ice.ConnectionInfo.call(this,e,t,n,i,r);this.localAddress=s!==undefined?s:"";
this.localPort=o!==undefined?o:-1;this.remoteAddress=c!==undefined?c:"";this.remotePort=a!==undefined?a:-1},Ice.ConnectionInfo);Ice.TCPConnectionInfo=t.defineLocalObject(function(e,t,n,i,r,s,o,c,a){Ice.IPConnectionInfo.call(this,e,t,n,i,r,s,o,c,a)},Ice.IPConnectionInfo);Ice.UDPConnectionInfo=t.defineLocalObject(function(e,t,n,i,r,s,o,c,a,u,l){Ice.IPConnectionInfo.call(this,e,t,n,i,r,s,o,c,a);this.mcastAddress=u!==undefined?u:"";this.mcastPort=l!==undefined?l:-1},Ice.IPConnectionInfo);t.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.WSConnectionInfo=t.defineLocalObject(function(e,t,n,i,r,s,o,c,a,u){Ice.TCPConnectionInfo.call(this,e,t,n,i,r,s,o,c,a);this.headers=u!==undefined?u:null},Ice.TCPConnectionInfo)})();(function(){Ice.TraceLevels=function(e){var t="Network";var n="Protocol";var i="Retry";var r="Locator";var s="Slicing";var o="Ice.Trace.";var c=e.getPropertyAsInt(o+t);var a=e.getPropertyAsInt(o+n);var u=e.getPropertyAsInt(o+i);var l=e.getPropertyAsInt(o+r);var h=e.getPropertyAsInt(o+s);e.getPropertyAsInt(o+"ThreadPool");return Object.create(null,{network:{get:function(){return c}},networkCat:{get:function(){return t}},protocol:{get:function(){return a}},protocolCat:{get:function(){return n}},retry:{get:function(){return u}},retryCat:{get:function(){return i}},location:{get:function(){return l}},locationCat:{get:function(){return r}},slicing:{get:function(){return h}},slicingCat:{get:function(){return s}}})}})();(function(){var e=Ice.Base64;var t=Ice.Debug;var n=Ice.HashUtil;var i=Ice.Protocol;var r=Ice.StringUtil;var s=Ice.EndpointParseException;var o=Ice.Class;var c=o(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0;this._type=e===undefined?-1:e;this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat);e.writeBlob(this._rawBytes);e.endWriteEncaps()},getInfo:function(){return new a((-1),false,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return false},changeCompress:function(e){return this},datagram:function(){return false},secure:function(){return false},rawBytes:function(){return this._rawBytes},transceiver:function(e){e.value=null;return null},acceptor:function(e,t){e.value=this;return null},connect:function(){return null},hashCode:function(){if(this._hashCode===undefined){var e=5381;e=n.addNumber(e,this._type);e=n.addHashable(e,this._rawEncoding);e=n.addArray(e,this._rawBytes,n.addNumber);this._hashCode=e}return this._hashCode},options:function(){var t="";t+=" -t "+this._type;t+=" -e "+Ice.encodingVersionToString(this._rawEncoding);t+=" -v "+e.encode(this._rawBytes);return t},equals:function(e){if(!(e instanceof c)){return false}if(this===e){return true}if(this._type!==e._type){return false}if(!this._rawEncoding.equals(e._rawEncoding)){return false}if(this._rawBytes.length!==e._rawBytes.length){return false}for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]!==e._rawBytes[t]){return false}}return true},compareTo:function(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof c)){return this.type()<e.type()?-1:1}if(this._type<e._type){return-1}else if(e._type<this._type){return 1}if(this._rawEncoding.major<e._rawEncoding.major){return-1}else if(e._rawEncoding.major<this._rawEncoding.major){return 1}if(this._rawEncoding.minor<e._rawEncoding.minor){return-1}else if(e._rawEncoding.minor<this._rawEncoding.minor){return 1}if(this._rawBytes.length<e._rawBytes.length){return-1}else if(e._rawBytes.length<this._rawBytes.length){return 1}for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t]){return-1}else if(e._rawBytes[t]<this._rawBytes[t]){return 1}}return 0},checkOption:function(t,n,i){switch(t.charAt(1)){case"t":{if(this._type>-1){throw new s("multiple -t options in endpoint "+i)}if(n===null){throw new s("no argument provided for -t option in endpoint "+i)}var o;try{o=r.toInt(n)}catch(c){throw new s("invalid type value `"+n+"' in endpoint "+i)}if(o<0||o>65535){throw new s("type value `"+n+"' out of range in endpoint "+i)}this._type=o;return true}case"v":{if(this._rawBytes){throw new s("multiple -v options in endpoint "+i)}if(n===null||n.length===0){throw new s("no argument provided for -v option in endpoint "+i)}for(var a=0;a<n.length;++a){if(!e.isBase64(n.charAt(a))){throw new s("invalid base64 character `"+n.charAt(a)+"' (ordinal "+n.charCodeAt(a)+") in endpoint "+i)}}this._rawBytes=e.decode(n);return true}case"e":{if(n===null){throw new s("no argument provided for -e option in endpoint "+i)}try{this._rawEncoding=Ice.stringToEncodingVersion(n)}catch(u){throw new s("invalid encoding version `"+n+"' in endpoint "+i+":\n"+u.str)}return true}default:{return false}}},initWithOptions:function(e){Ice.EndpointI.prototype.initWithOptions.call(this,e);t.assert(this._rawEncoding);if(this._type<0){throw new s("no -t option in endpoint `"+this+"'")}if(this._rawBytes===null||this._rawBytes.length===0){throw new s("no -v option in endpoint `"+this+"'")}},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}});var a=o(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,i,r){Ice.OpaqueEndpointInfo.call(this,-1,false,n,i);this._type=r},type:function(){return this._type},datagram:function(){return false},secure:function(){return false}});Ice.OpaqueEndpointI=c})();(function(){var e=Ice.BasicStream;var t=Ice.Current;var n=Ice.Debug;var i=Ice.FormatType;var r=Ice.Context;var s=Ice.Identity;var o=Ice.Protocol;var c=Ice.StringUtil;var a=Ice.Class({__init__:function(n,i,r,c,a,u){this._instance=n;this._response=c;this._compress=a;if(this._response){this._os=new e(n,o.currentProtocolEncoding)}this._connection=i;this._current=new t;this._current.id=new s;this._current.adapter=r;this._current.con=this._connection;this._current.requestId=u;this._servant=null;this._locator=null;this._cookie={value:null};if(c){this._os.writeBlob(o.replyHdr);this._os.writeInt(u)}this._is=null;this._cb=null;this._active=true},__startWriteParams:function(e){if(!this._response){throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch")}n.assert(this._os.size==o.headerSize+4);n.assert(this._current.encoding!==null);this._os.writeByte(0);this._os.startWriteEncaps(this._current.encoding,e);return this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=o.headerSize+4;this._os.writeByte(e?o.replyOK:o.replyUserException);this._os.pos=t;this._os.endWriteEncaps()}},__writeEmptyParams:function(){if(this._response){n.assert(this._os.size===o.headerSize+4);n.assert(this._current.encoding!==null);this._os.writeByte(o.replyOK);this._os.writeEmptyEncaps(this._current.encoding)}},__writeParamEncaps:function(e,t){if(this._response){n.assert(this._os.size===o.headerSize+4);n.assert(this._current.encoding!==null);this._os.writeByte(t?o.replyOK:o.replyUserException);if(e===null||e.length===0){this._os.writeEmptyEncaps(this._current.encoding)}else{this._os.writeEncaps(e)}}},__writeUserException:function(e,t){var n=this.__startWriteParams(t);n.writeUserException(e);this.__endWriteParams(false)},__warning:function(e){n.assert(this._instance!==null);var t=[];t.push("dispatch exception:");t.push("\nidentity: "+this._instance.identityToString(this._current.id));t.push("\nfacet: "+c.escapeString(this._current.facet,""));t.push("\noperation: "+this._current.operation);if(this._connection!==null){try{var i=this._connection.getInfo();if(i instanceof Ice.IPConnectionInfo){var r=i;t.push("\nremote host: "+r.remoteAddress+" remote port: "+r.remotePort)}}catch(s){}}if(e.stack){t.push("\n");t.push(e.stack)}this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(e){n.assert(this._locator!==null&&this._servant!==null);try{this._locator.finished(this._current,this._servant,this._cookie.value);return true}catch(t){if(t instanceof Ice.UserException){n.assert(this._connection!==null);if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUserException);this._os.startWriteEncaps();this._os.writeUserException(t);this._os.endWriteEncaps();this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}this._connection=null}else{this.__handleException(t,e)}return false}},__handleException:function(e,t){n.assert(this._connection!==null);var i=this._instance.initializationData().properties;var r;if(e instanceof Ice.RequestFailedException){if(e.id===null){e.id=this._current.id}if(e.facet===null){e.facet=this._current.facet}if(e.operation===null||e.operation.length===0){e.operation=this._current.operation}if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);if(e instanceof Ice.ObjectNotExistException){this._os.writeByte(o.replyObjectNotExist)}else if(e instanceof Ice.FacetNotExistException){this._os.writeByte(o.replyFacetNotExist)}else if(e instanceof Ice.OperationNotExistException){this._os.writeByte(o.replyOperationNotExist)}else{n.assert(false)}e.id.__write(this._os);if(e.facet===null||e.facet.length===0){Ice.StringSeqHelper.write(this._os,null)}else{Ice.StringSeqHelper.write(this._os,[e.facet])}this._os.writeString(e.operation);this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}}else if(e instanceof Ice.UnknownLocalException){if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUnknownLocalException);this._os.writeString(e.unknown);this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}}else if(e instanceof Ice.UnknownUserException){if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUnknownUserException);this._os.writeString(e.unknown);this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}}else if(e instanceof Ice.UnknownException){if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUnknownException);this._os.writeString(e.unknown);this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}}else if(e instanceof Ice.LocalException){if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUnknownLocalException);r=[e.ice_name()];if(e.stack){r.push("\n");r.push(e.stack)}this._os.writeString(r.join(""));this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}}else if(e instanceof Ice.UserException){if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUnknownUserException);r=[e.ice_name()];if(e.stack){r.push("\n");r.push(e.stack)}this._os.writeString(r.join(""));this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}}else{if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}if(this._response){this._os.resize(o.headerSize+4);this._os.writeByte(o.replyUnknownException);this._os.writeString(e.stack?e.stack:"");this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}if(!t){throw new Ice.ServantError(e)}}this._connection=null},invoke:function(e,t){this._is=t;var s=this._is.pos;this._current.id.__read(this._is);var c=Ice.StringSeqHelper.read(this._is);if(c.length>0){if(c.length>1){throw new Ice.MarshalException}this._current.facet=c[0]}else{this._current.facet=""}this._current.operation=this._is.readString();this._current.mode=Ice.OperationMode.valueOf(this._is.readByte());this._current.ctx=new r;var a=this._is.readSize();while(a-- >0){var u=this._is.readString();var l=this._is.readString();this._current.ctx.set(u,l)}if(e!==null){this._servant=e.findServant(this._current.id,this._current.facet);if(this._servant===null){this._locator=e.findServantLocator(this._current.id.category);if(this._locator===null&&this._current.id.category.length>0){this._locator=e.findServantLocator("")}if(this._locator!==null){try{this._servant=this._locator.locate(this._current,this._cookie)}catch(h){if(h instanceof Ice.UserException){var f=this._is.skipEncaps();if(this._response){this._os.writeByte(o.replyUserException);this._os.startWriteEncaps(f,i.DefaultFormat);this._os.writeUserException(h);this._os.endWriteEncaps();this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}this._connection=null;return}else{this._is.skipEncaps();this.__handleException(h,false);return}}}}}try{if(this._servant!==null){if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync){return}if(this._locator!==null&&!this.__servantLocatorFinished(false)){return}}else{this._is.skipEncaps();if(e!==null&&e.hasServant(this._current.id)){throw new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation)}else{throw new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation)}}}catch(h){if(this._servant!==null&&this._locator!==null&&!this.__servantLocatorFinished(false)){return}this.__handleException(h,false);return}n.assert(this._connection!==null);if(this._response){this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}this._connection=null},startReadParams:function(){this._current.encoding=this._is.startReadEncaps();return this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=this._is.skipEmptyEncaps()},readParamEncaps:function(){this._current.encoding=new Ice.EncodingVersion;return this._is.readEncaps(this._current.encoding)},__response:function(){try{if(this._locator!==null&&!this.__servantLocatorFinished(true)){return}n.assert(this._connection!==null);if(this._response){this._connection.sendResponse(this._os,this._compress)}else{this._connection.sendNoResponse()}this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(this._locator!==null&&!this.__servantLocatorFinished(true)){return}this.__handleException(e,true)}catch(t){this._connection.invokeException(t,1)}},__validateResponse:function(e){if(!this._active){return false}this._active=false;return true},ice_exception:function(e){if(!this._active){return}this._active=false;if(this._connection!==null){this.__exception(e)}else{if(this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.__warning(e)}}}});Ice.IncomingAsync=a})();(function(){var e=Ice.AsyncResult;var t=Ice.AsyncStatus;var n=Ice.BasicStream;var i=Ice.ConnectionRequestHandler;var r=Ice.Debug;var s=Ice.ExUtil;var o=Ice.RetryException;var c=Ice.OutgoingAsync;var a=Ice.Protocol;var u=Ice.ReferenceMode;var l=Ice.LocalException;var h=Ice.Promise;var f=Ice.Class({__init__:function(e,t){this._reference=e;this._response=e.getMode()===u.ModeTwoway;this._proxy=t;this._proxies=[];this._initialized=false;this._connection=null;this._compress=false;this._exception=null;this._requests=[]},connect:function(e){if(!this.initialized()){this._proxies.push(e)}return this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(e){if(!this._initialized){e.__cancelable(this)}if(!this.initialized()){this._requests.push(e);return t.Queued}return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e,t){if(this._exception!==null){return}if(!this.initialized()){for(var n=0;n<this._requests.length;n++){if(this._requests[n]===e){e.__completedEx(t);this._requests.splice(n,1);return}}r.assert(false)}this._connection.asyncRequestCanceled(e,t)},getReference:function(){return this._reference},getConnection:function(){if(this._exception!==null){throw this._exception}else{return this._connection}},setConnection:function(e,t){r.assert(this._exception===null&&this._connection===null);this._connection=e;this._compress=t;var n=this._reference.getRouterInfo();if(n!==null){var i=this;n.addProxy(this._proxy).then(function(){i.flushRequests()},function(e){i.setException(e)});return}this.flushRequests()},setException:function(e){r.assert(!this._initialized&&this._exception===null);this._exception=e;this._proxies.length=0;this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(t){}for(var n=0;n<this._requests.length;++n){var i=this._requests[n];if(i!==null){i.__completedEx(this._exception)}}this._requests.length=0},initialized:function(){if(this._initialized){r.assert(this._connection!==null);return true}else{if(this._exception!==null){if(this._connection!==null){return true}throw this._exception}else{return this._initialized}}},flushRequests:function(){r.assert(this._connection!==null&&!this._initialized);var e=null;for(var t=0;t<this._requests.length;++t){var n=this._requests[t];try{n.__invokeRemote(this._connection,this._compress,this._response)}catch(s){if(s instanceof o){e=s.inner;this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this);n.__retryException(s.inner)}else{r.assert(s instanceof l);e=s;n.out.__completedEx(s)}}}this._requests.length=0;if(this._reference.getCacheConnection()&&e===null){this._requestHandler=new i(this._reference,this._connection,this._compress);for(var c=0;c<this._proxies.length;++c){this._proxies[c].__updateRequestHandler(this,this._requestHandler)}}r.assert(!this._initialized);this._exception=e;this._initialized=this._exception===null;this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this);this._proxies.length=0;this._proxy=null}});Ice.ConnectRequestHandler=f})();(function(){IceSSL.ConnectionInfo=t.defineLocalObject(function(e,t,n,i,r,s,o,c,a,u,l,h){Ice.IPConnectionInfo.call(this,e,t,n,i,r,s,o,c,a);this.cipher=u!==undefined?u:"";this.certs=l!==undefined?l:null;this.verified=h!==undefined?h:false},Ice.IPConnectionInfo);IceSSL.WSSConnectionInfo=t.defineLocalObject(function(e,t,n,i,r,s,o,c,a,u,l,h,f){IceSSL.ConnectionInfo.call(this,e,t,n,i,r,s,o,c,a,u,l,h);this.headers=f!==undefined?f:null},IceSSL.ConnectionInfo)})();(function(){var e=Ice.__M.module("IceSSL");var t=navigator.userAgent.indexOf("Edge/")===-1&&navigator.userAgent.indexOf("Chrome/")!==-1;var n=Ice.Debug;var i=Ice.ExUtil;var r=Ice.Network;var s=Ice.SocketOperation;var o=Ice.Connection;var c=Ice.LocalException;var a=Ice.SocketException;var u=Ice.Timer;var l=0;var h=1;var f=2;var d=3;var p=4;var _=Ice.Class({__init__:function(e){this._logger=e.logger();this._readBuffers=[];this._readPosition=0;this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",512*1024);this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2;return Math.min(e,25)},setCallbacks:function(e,t,n){this._connectedCallback=e;this._bytesAvailableCallback=t;this._bytesWrittenCallback=n},initialize:function(e,t){try{if(this._exception){throw this._exception}if(this._state===l){this._state=h;this._fd=new WebSocket(this._url,"ice.zeroc.com");this._fd.binaryType="arraybuffer";var i=this;this._fd.onopen=function(e){i.socketConnected(e)};this._fd.onmessage=function(e){i.socketBytesAvailable(e.data)};this._fd.onclose=function(e){i.socketClosed(e)};return s.Connect}else if(this._state===h){this._desc=I(this._addr);this._state=f}}catch(r){if(!this._exception){this._exception=g(this._state,r)}throw this._exception}n.assert(this._state===f);return s.None},register:function(){this._registered=true;if(this._hasBytesAvailable||this._exception){this._bytesAvailableCallback();this._hasBytesAvailable=false}},unregister:function(){this._registered=false},close:function(){if(this._fd===null){n.assert(this._exception);return}if(t&&this._fd.readyState===WebSocket.CONNECTING){this._state=d;return}n.assert(this._fd!==null);try{this._state=p;this._fd.close()}catch(e){throw g(this._state,e)}finally{this._fd=null}},write:function(e){if(this._exception){throw this._exception}else if(e.remaining===0){return true}n.assert(this._fd);var t=this;var i=function(){if(t._fd){if(t._fd.bufferedAmount+s<=t._maxSendPacketSize){t._bytesWrittenCallback(0,0)}else{u.setTimeout(i,t.writeReadyTimeout())}}};var r=e.position;while(true){var s=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(e.remaining===0){break}n.assert(s>0);if(this._fd.bufferedAmount+s>this._maxSendPacketSize){u.setTimeout(i,this.writeReadyTimeout());return false}this._writeReadyTimeout=0;var o=e.b.slice(e.position,e.position+s);this._fd.send(o);e.position=e.position+s}return true},read:function(e,t){if(this._exception){throw this._exception}t.value=false;if(this._readBuffers.length===0){return false}var i=this._readBuffers[0].byteLength-this._readPosition;n.assert(i>0);var r=e.remaining;while(e.remaining>0){if(i>e.remaining){i=e.remaining}new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,i),e.position);e.position+=i;this._readPosition+=i;if(this._readPosition===this._readBuffers[0].byteLength){this._readPosition=0;this._readBuffers.shift();if(this._readBuffers.length===0){break}else{i=this._readBuffers[0].byteLength}}}t.value=this._readBuffers.byteLength>0;return e.remaining===0},type:function(){return this._secure?"wss":"ws"},getInfo:function(){n.assert(this._fd!==null);var t=this._secure?new e.WSSConnectionInfo:new Ice.WSConnectionInfo;t.localAddress="";t.localPort=-1;t.remoteAddress=this._addr.host;t.remotePort=this._addr.port;t.rcvSize=-1;t.sndSize=this._maxSendPacketSize;t.headers={};return t},checkSendSize:function(e){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(e){if(this._state==d){this.close();return}n.assert(this._connectedCallback!==null);this._connectedCallback()},socketBytesAvailable:function(e){n.assert(this._bytesAvailableCallback!==null);if(e.byteLength>0){this._readBuffers.push(e);if(this._registered){this._bytesAvailableCallback()}else if(!this._hasBytesAvailable){this._hasBytesAvailable=true}}},socketClosed:function(e){if(this._state==d){this.close();return}this._exception=g(this._state,e);if(this._state<f){this._connectedCallback()}else if(this._registered){this._bytesAvailableCallback()}}});function I(e){return"local address = <not available>\nremote address = "+e.host+":"+e.port}function g(e,t){if(e<f){return new Ice.ConnectFailedException(t.code,t)}else{if(t.code===1e3||t.code===1006){return new Ice.ConnectionLostException}return new Ice.SocketException(t.code,t)}}_.createOutgoing=function(e,t,n,i){var r=new _(e);var s=t?"wss":"ws";s+="://"+n.host;if(n.port!==80){s+=":"+n.port}s+=i?i:"/";r._url=s;r._fd=null;r._addr=n;r._desc="local address = <not available>\nremote address = "+n.host+":"+n.port;r._state=l;r._secure=t;r._exception=null;return r};Ice.WSTransceiver=_})();(function(){Ice.Router=t.defineObject(undefined,Ice.Object,undefined,1,["::Ice::Object","::Ice::Router"],-1,undefined,undefined,false);Ice.RouterPrx=t.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,undefined);t.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]});Ice.RouterFinder=t.defineObject(undefined,Ice.Object,undefined,1,["::Ice::Object","::Ice::RouterFinder"],-1,undefined,undefined,false);Ice.RouterFinderPrx=t.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,undefined);t.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]})})();(function(){Ice.AdapterNotFoundException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterNotFoundException",undefined,undefined,false,false);Ice.InvalidReplicaGroupIdException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::InvalidReplicaGroupIdException",undefined,undefined,false,false);Ice.AdapterAlreadyActiveException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterAlreadyActiveException",undefined,undefined,false,false);Ice.ObjectNotFoundException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ObjectNotFoundException",undefined,undefined,false,false);Ice.ServerNotFoundException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ServerNotFoundException",undefined,undefined,false,false);Ice.Locator=t.defineObject(undefined,Ice.Object,undefined,0,["::Ice::Locator","::Ice::Object"],-1,undefined,undefined,false);Ice.LocatorPrx=t.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,undefined);t.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]});Ice.LocatorRegistry=t.defineObject(undefined,Ice.Object,undefined,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,undefined,undefined,false);Ice.LocatorRegistryPrx=t.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,undefined);t.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]});Ice.LocatorFinder=t.defineObject(undefined,Ice.Object,undefined,0,["::Ice::LocatorFinder","::Ice::Object"],-1,undefined,undefined,false);Ice.LocatorFinderPrx=t.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,undefined);t.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]})})();(function(){var e=Ice.Debug;var t=Ice.HashUtil;var n=Ice.StringUtil;var i=typeof Ice.TcpTransceiver!=="undefined"?Ice.TcpTransceiver:null;var r=Ice.Class;var s=r(Ice.IPEndpointI,{__init__:function(e,t,n,i,r,s,o){Ice.IPEndpointI.call(this,e,t,n,i,s);this._timeout=r===undefined?e?e.defaultTimeout():undefined:r;this._compress=o===undefined?false:o},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;this.fillEndpointInfo(e);return e},timeout:function(){return this._timeout},changeTimeout:function(e){if(e===this._timeout){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)}},changeConnectionId:function(e){if(e===this._connectionId){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)}},compress:function(){return this._compress},changeCompress:function(e){if(e===this._compress){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)}},datagram:function(){return false},connectable:function(){return i!==null&&!this.secure()},connect:function(){e.assert(!this.secure());return i.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);if(this._timeout==-1){e+=" -t infinite"}else{e+=" -t "+this._timeout}if(this._compress){e+=" -z"}return e},compareTo:function(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof s)){return this.type()<e.type()?-1:1}if(this._timeout<e._timeout){return-1}else if(e._timeout<this._timeout){return 1}if(!this._compress&&e._compress){return-1}else if(!e._compress&&this._compress){return 1}return Ice.IPEndpointI.prototype.compareTo.call(this,e)},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e);e.writeInt(this._timeout);e.writeBool(this._compress)},hashInit:function(e){e=Ice.IPEndpointI.prototype.hashInit.call(this,e);e=t.addNumber(e,this._timeout);e=t.addBoolean(e,this._compress);return e},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e);e.timeout=this._timeout;e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e);this._timeout=e.readInt();this._compress=e.readBool()},checkOption:function(e,t,i){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,i)){return true}if(e==="-t"){if(t===null){throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i)}if(t=="infinite"){this._timeout=-1}else{var r=false;try{this._timeout=n.toInt(t)}catch(s){r=true}if(r||this._timeout<1){throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}}else if(e==="-z"){if(t!==null){throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i)}this._compress=true}else{return false}return true},createEndpoint:function(e,t,n){return new s(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}});Ice.TcpEndpointI=s})();(function(){var e=Ice.AsyncStatus;var t=Ice.AsyncResultBase;var n=Ice.BasicStream;var i=Ice.BatchRequestQueue;var r=Ice.ConnectionFlushBatch;var s=Ice.Debug;var o=Ice.ExUtil;var c=Ice.HashMap;var a=Ice.IncomingAsync;var u=Ice.RetryException;var l=Ice.Promise;var h=Ice.Protocol;var f=Ice.SocketOperation;var d=Ice.Timer;var p=Ice.TraceUtil;var _=Ice.ProtocolVersion;var I=Ice.EncodingVersion;var g=Ice.ACM;var v=Ice.ACMClose;var m=Ice.ACMHeartbeat;var y=0;var w=1;var E=2;var x=3;var S=4;var b=5;var C=6;var P=function(e){this.stream=new n(e,h.currentProtocolEncoding);this.invokeNum=0;this.requestId=0;this.compress=false;this.servantManager=null;this.adapter=null;this.outAsync=null;this.heartbeatCallback=null};var M=Ice.Class;var O=M({__init__:function(e,t,r,s,o,a,u){this._communicator=e;this._instance=t;this._monitor=r;this._transceiver=s;this._desc=s.toString();this._type=s.type();this._endpoint=o;this._incoming=a;this._adapter=u;var l=t.initializationData();this._logger=l.logger;this._traceLevels=t.traceLevels();this._timer=t.timer();this._writeTimeoutId=0;this._writeTimeoutScheduled=false;this._readTimeoutId=0;this._readTimeoutScheduled=false;this._hasMoreData={value:false};this._warn=l.properties.getPropertyAsInt("Ice.Warn.Connections")>0;this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0;this._acmLastActivity=this._monitor!==null&&this._monitor.getACM().timeout>0?Date.now():-1;this._nextRequestId=1;this._messageSizeMax=u?u.messageSizeMax():t.messageSizeMax();this._batchRequestQueue=new i(t,o.datagram());this._sendStreams=[];this._readStream=new n(t,h.currentProtocolEncoding);this._readHeader=false;this._writeStream=new n(t,h.currentProtocolEncoding);this._readStreamPos=-1;this._writeStreamPos=-1;this._dispatchCount=0;this._state=y;this._shutdownInitiated=false;this._initialized=false;this._validated=false;this._readProtocol=new _;this._readProtocolEncoding=new I;this._asyncRequests=new c;this._exception=null;this._startPromise=null;this._closePromises=[];this._holdPromises=[];this._finishedPromises=[];if(this._adapter!==null){this._servantManager=this._adapter.getServantManager()}else{this._servantManager=null}this._callback=null},start:function(){s.assert(this._startPromise===null);
try{if(this._state>=b){s.assert(this._exception!==null);return(new l).fail(this._exception)}this._startPromise=new l;var e=this;this._transceiver.setCallbacks(function(){e.message(f.Write)},function(){e.message(f.Read)},function(t,n){e.message(f.Write);if(e._instance.traceLevels().network>=3&&t>0){var i=[];i.push("sent ");i.push(t);if(!e._endpoint.datagram()){i.push(" of ");i.push(n)}i.push(" bytes via ");i.push(e._endpoint.protocol());i.push("\n");i.push(this.toString());e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,i.join(""))}});this.initialize()}catch(t){if(t instanceof Ice.LocalException){this.exception(t)}return(new l).fail(t)}return this._startPromise},activate:function(){if(this._state<=w){return}if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}this.setState(E)},hold:function(){if(this._state<=w){return}this.setState(x)},destroy:function(e){switch(e){case O.ObjectAdapterDeactivated:{this.setState(S,new Ice.ObjectAdapterDeactivatedException);break}case O.CommunicatorDestroyed:{this.setState(S,new Ice.CommunicatorDestroyedException);break}}},close:function(e){var n=new t(this._communicator,"close",this,null,null);if(e){this.setState(b,new Ice.ForcedCloseConnectionException);n.succeed(n)}else{this._closePromises.push(n);this.checkClose()}return n},checkClose:function(){if(this._asyncRequests.size===0&&this._closePromises.length>0){this.setState(S,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e){this._closePromises[e].succeed(this._closePromises[e])}this._closePromises=[]}},isActiveOrHolding:function(){return this._state>w&&this._state<S},isFinished:function(){if(this._state!==C||this._dispatchCount!==0){return false}s.assert(this._state===C);return true},throwException:function(){if(this._exception!==null){s.assert(this._state>=S);throw this._exception}},waitUntilHolding:function(){var e=new l;this._holdPromises.push(e);this.checkState();return e},waitUntilFinished:function(){var e=new l;this._finishedPromises.push(e);this.checkState();return e},monitor:function(e,t){if(this._state!==E){return}if(t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4){if(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0){this.heartbeat()}}if(this._readStream.size>h.headerSize||!this._writeStream.isEmpty()){return}if(t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout){if(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0){this.setState(b,new Ice.ConnectionTimeoutException)}else if(t.close!=Ice.ACMClose.CloseOnInvocation&&this._dispatchCount===0&&this._batchRequestQueue.isEmpty()&&this._asyncRequests.size===0){this.setState(S,new Ice.ConnectionTimeoutException)}}},sendAsyncRequest:function(e,t,n,i){var r=0;var o=e.__os();if(this._exception!==null){throw new u(this._exception)}s.assert(this._state>w);s.assert(this._state<S);this._transceiver.checkSendSize(o);e.__cancelable(this);if(n){r=this._nextRequestId++;if(r<=0){this._nextRequestId=1;r=this._nextRequestId++}o.pos=h.headerSize;o.writeInt(r)}else if(i>0){o.pos=h.headerSize;o.writeInt(i)}var c;try{c=this.sendMessage(k.create(e,e.__os(),t,r))}catch(a){if(a instanceof Ice.LocalException){this.setState(b,a);s.assert(this._exception!==null);throw this._exception}else{throw a}}if(n){this._asyncRequests.set(r,e)}return c},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new r(this,this._communicator,"flushBatchRequests");e.__invoke();return e},setCallback:function(e){if(this._state>=b){if(e!==null){var t=this;d.setImmediate(function(){try{e.closed(this)}catch(n){t._logger.error("connection callback exception:\n"+n+"\n"+t._desc)}})}}else{this._callback=e}},setACM:function(e,t,n){if(this._monitor===null||this._state>=b){return}if(this._state==E){this._monitor.remove(this)}this._monitor=this._monitor.acm(e,t,n);if(this._state==E){this._monitor.add(this)}if(this._monitor.getACM().timeout<=0){this._acmLastActivity=-1}else if(this._state==E&&this._acmLastActivity==-1){this._acmLastActivity=Date.now()}},getACM:function(){return this._monitor!==null?this._monitor.getACM():new g(0,v.CloseOff,m.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var i=this._sendStreams[n];if(i.outAsync===e){if(i.requestId>0){this._asyncRequests.delete(i.requestId)}i.canceled();if(n!==0){this._sendStreams.splice(n,1)}e.__completedEx(t);return}}if(e instanceof Ice.OutgoingAsync){for(var r=this._asyncRequests.entries;r!==null;r=r.next){if(r.value===e){this._asyncRequests.delete(r.key);e.__completedEx(t);return}}}},sendResponse:function(e,t){s.assert(this._state>w);try{if(--this._dispatchCount===0){if(this._state===C){this.reap()}this.checkState()}if(this._state>=b){s.assert(this._exception!==null);throw this._exception}this.sendMessage(k.createForStream(e,t!==0,true));if(this._state===S&&this._dispatchCount===0){this.initiateShutdown()}}catch(n){if(n instanceof Ice.LocalException){this.setState(b,n)}else{throw n}}},sendNoResponse:function(){s.assert(this._state>w);try{if(--this._dispatchCount===0){if(this._state===C){this.reap()}this.checkState()}if(this._state>=b){s.assert(this._exception!==null);throw this._exception}if(this._state===S&&this._dispatchCount===0){this.initiateShutdown()}}catch(e){if(e instanceof Ice.LocalException){this.setState(b,e)}else{throw e}}},endpoint:function(){return this._endpoint},setAdapter:function(e){if(this._state<=w||this._state>=S){return}s.assert(this._state<S);this._adapter=e;if(this._adapter!==null){this._servantManager=this._adapter.getServantManager();if(this._servantManager===null){this._adapter=null}}else{this._servantManager=null}},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(this._state>=b){return}this.unscheduleTimeout(e);this._hasMoreData.value=(e&f.Read)!==0;var t=null;try{if((e&f.Write)!==0&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer)){s.assert(!this._writeStream.isEmpty());this.scheduleTimeout(f.Write,this._endpoint.timeout());return}s.assert(this._writeStream.buffer.remaining===0)}if((e&f.Read)!==0&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer)){return}s.assert(this._readStream.buffer.remaining===0);this._readHeader=false;var n=this._readStream.pos;if(n<h.headerSize){throw new Ice.IllegalMessageSizeException}this._readStream.pos=0;var i=this._readStream.readByte();var r=this._readStream.readByte();var c=this._readStream.readByte();var a=this._readStream.readByte();if(i!==h.magic[0]||r!==h.magic[1]||c!==h.magic[2]||a!==h.magic[3]){var u=new Ice.BadMagicException;u.badMagic=Ice.Buffer.createNative([i,r,c,a]);throw u}this._readProtocol.__read(this._readStream);h.checkSupportedProtocol(this._readProtocol);this._readProtocolEncoding.__read(this._readStream);h.checkSupportedProtocolEncoding(this._readProtocolEncoding);this._readStream.readByte();this._readStream.readByte();var l=this._readStream.readInt();if(l<h.headerSize){throw new Ice.IllegalMessageSizeException}if(l>this._messageSizeMax){o.throwMemoryLimitException(l,this._messageSizeMax)}if(l>this._readStream.size){this._readStream.resize(l)}this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram()){throw new Ice.DatagramLimitException}else{if(!this.read(this._readStream.buffer)){s.assert(!this._readStream.isEmpty());this.scheduleTimeout(f.Read,this._endpoint.timeout());return}s.assert(this._readStream.buffer.remaining===0)}}}if(this._state<=w){if(this._state===y&&!this.initialize()){return}if(this._state<=w&&!this.validate()){return}this._transceiver.unregister();this.setState(x);if(this._startPromise!==null){++this._dispatchCount}}else{s.assert(this._state<=S);if((e&f.Read)!==0){t=this.parseMessage()}if((e&f.Write)!==0){this.sendNextMessage()}}}catch(p){if(p instanceof Ice.DatagramLimitException){if(this._warnUdp){this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded")}this._readStream.resize(h.headerSize);this._readStream.pos=0;this._readHeader=true;return}else if(p instanceof Ice.SocketException){this.setState(b,p);return}else if(p instanceof Ice.LocalException){if(this._endpoint.datagram()){if(this._warn){this._logger.warning("datagram connection exception:\n"+p+"\n"+this._desc)}this._readStream.resize(h.headerSize);this._readStream.pos=0;this._readHeader=true}else{this.setState(b,p)}return}else{throw p}}if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}this.dispatch(t);if(this._hasMoreData.value){var _=this;d.setImmediate(function(){_.message(f.Read)})}},dispatch:function(e){var t=0;if(this._startPromise!==null){this._startPromise.succeed();this._startPromise=null;++t}if(e!==null){if(e.outAsync!==null){e.outAsync.__completed(e.stream);++t}if(e.invokeNum>0){this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter)}if(e.heartbeatCallback){try{e.heartbeatCallback.heartbeat(this)}catch(n){this._logger.error("connection callback exception:\n"+n+"\n"+this._desc)}e.heartbeatCallback=null;++t}}if(t>0){this._dispatchCount-=t;if(this._dispatchCount===0){if(this._state===S&&!this._shutdownInitiated){try{this.initiateShutdown()}catch(n){if(n instanceof Ice.LocalException){this.setState(b,n)}else{throw n}}}else if(this._state===C){this.reap()}this.checkState()}}},finish:function(){s.assert(this._state===b);this.unscheduleTimeout(f.Read|f.Write|f.Connect);var e;var t=this._instance.traceLevels();if(!this._initialized){if(t.network>=2){e=[];e.push("failed to establish ");e.push(this._endpoint.protocol());e.push(" connection\n");e.push(this.toString());e.push("\n");e.push(this._exception.toString());this._instance.initializationData().logger.trace(t.networkCat,e.join(""))}}else{if(t.network>=1){e=[];e.push("closed ");e.push(this._endpoint.protocol());e.push(" connection\n");e.push(this.toString());if(!(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException)){e.push("\n");e.push(this._exception.toString())}this._instance.initializationData().logger.trace(t.networkCat,e.join(""))}}if(this._startPromise!==null){this._startPromise.fail(this._exception);this._startPromise=null}if(this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var i=0;i<this._sendStreams.length;++i){var r=this._sendStreams[i];if(r.requestId>0){this._asyncRequests.delete(r.requestId)}r.completed(this._exception)}this._sendStreams=[]}for(var o=this._asyncRequests.entries;o!==null;o=o.next){o.value.__completedEx(this._exception)}this._asyncRequests.clear();this._readStream.clear();this._readStream.buffer.clear();this._writeStream.clear();this._writeStream.buffer.clear();if(this._callback!==null){try{this._callback.closed(this)}catch(c){this._logger.error("connection callback exception:\n"+c+"\n"+this._desc)}this._callback=null}if(this._dispatchCount===0){this.reap()}this.setState(C)},toString:function(){return this._desc},timedOut:function(e){if(this._state<=w){this.setState(b,new Ice.ConnectTimeoutException)}else if(this._state<S){this.setState(b,new Ice.TimeoutException)}else if(this._state===S){this.setState(b,new Ice.CloseTimeoutException)}},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=b){throw this._exception}var e=this._transceiver.getInfo();e.adapterName=this._adapter!==null?this._adapter.getName():"";e.incoming=this._incoming;return e},setBufferSize:function(e,t){if(this._state>=b){throw this._exception}this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(b,e)},invokeException:function(e,t){this.setState(b,e);if(t>0){s.assert(this._dispatchCount>0);this._dispatchCount-=t;s.assert(this._dispatchCount>=0);if(this._dispatchCount===0){if(this._state===C){this.reap()}this.checkState()}}},setState:function(e,t){if(t!==undefined){s.assert(t instanceof Ice.LocalException);s.assert(e>=S);if(this._state===e){return}if(this._exception===null){this._exception=t;if(this._warn&&this._validated){if(!(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&this._state===S)){this.warning("connection exception",this._exception)}}}}if(this._endpoint.datagram()&&e===S){e=b}if(this._state<=w&&e===S){e=b}if(this._state===e){return}try{switch(e){case y:{s.assert(false);break}case w:{if(this._state!==y){s.assert(this._state===b);return}if(!this._endpoint.datagram()&&!this._incoming){this._transceiver.register()}break}case E:{if(this._state!==x&&this._state!==w){return}this._transceiver.register();break}case x:{if(this._state!==E&&this._state!==w){return}if(this._state===E){this._transceiver.unregister()}break}case S:{if(this._state>=b){return}if(this._state===x){this._transceiver.register()}break}case b:{if(this._state===C){return}this._batchRequestQueue.destroy(this._exception);this._transceiver.unregister();break}case C:{s.assert(this._state===b);this._transceiver.close();this._communicator=null;break}}}catch(t){if(t instanceof Ice.LocalException){var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}else{throw t}}if(this._monitor!==null){if(e===E){this._monitor.add(this);if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}}else if(this._state===E){this._monitor.remove(this)}}this._state=e;if(this._state===S&&this._dispatchCount===0){try{this.initiateShutdown()}catch(t){if(t instanceof Ice.LocalException){this.setState(b,t)}else{throw t}}}else if(this._state===b){this.finish()}this.checkState()},initiateShutdown:function(){s.assert(this._state===S);s.assert(this._dispatchCount===0);s.assert(!this._shutdownInitiated);if(!this._endpoint.datagram()){var t=new n(this._instance,h.currentProtocolEncoding);t.writeBlob(h.magic);h.currentProtocol.__write(t);h.currentProtocolEncoding.__write(t);t.writeByte(h.closeConnectionMsg);t.writeByte(0);t.writeInt(h.headerSize);var i=this.sendMessage(k.createForStream(t,false,false));if((i&e.Sent)>0){this.scheduleTimeout(f.Write,this.closeTimeout())}}},heartbeat:function(){s.assert(this._state===E);if(!this._endpoint.datagram()){var e=new n(this._instance,h.currentProtocolEncoding);e.writeBlob(h.magic);h.currentProtocol.__write(e);h.currentProtocolEncoding.__write(e);e.writeByte(h.validateConnectionMsg);e.writeByte(0);e.writeInt(h.headerSize);try{this.sendMessage(k.createForStream(e,false,false))}catch(t){this.setState(b,t);s.assert(this._exception!==null)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);if(e!=f.None){this.scheduleTimeout(e,this.connectTimeout());return false}this._desc=this._transceiver.toString();this._initialized=true;this.setState(w);return true},validate:function(){if(!this._endpoint.datagram()){if(this._adapter!==null){if(this._writeStream.size===0){this._writeStream.writeBlob(h.magic);h.currentProtocol.__write(this._writeStream);h.currentProtocolEncoding.__write(this._writeStream);this._writeStream.writeByte(h.validateConnectionMsg);this._writeStream.writeByte(0);this._writeStream.writeInt(h.headerSize);p.traceSend(this._writeStream,this._logger,this._traceLevels);this._writeStream.prepareWrite()}if(this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer)){this.scheduleTimeout(f.Write,this.connectTimeout());return false}}else{if(this._readStream.size===0){this._readStream.resize(h.headerSize);this._readStream.pos=0}if(this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer)){this.scheduleTimeout(f.Read,this.connectTimeout());return false}s.assert(this._readStream.pos===h.headerSize);this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==h.magic[0]||e[1]!==h.magic[1]||e[2]!==h.magic[2]||e[3]!==h.magic[3]){var t=new Ice.BadMagicException;t.badMagic=e;throw t}this._readProtocol.__read(this._readStream);h.checkSupportedProtocol(this._readProtocol);this._readProtocolEncoding.__read(this._readStream);h.checkSupportedProtocolEncoding(this._readProtocolEncoding);var n=this._readStream.readByte();if(n!==h.validateConnectionMsg){throw new Ice.ConnectionNotValidatedException}this._readStream.readByte();var i=this._readStream.readInt();if(i!==h.headerSize){throw new Ice.IllegalMessageSizeException}p.traceRecv(this._readStream,this._logger,this._traceLevels);this._validated=true}}this._writeStream.resize(0);this._writeStream.pos=0;this._readStream.resize(h.headerSize);this._readHeader=true;this._readStream.pos=0;var r=this._instance.traceLevels();if(r.network>=1){var o=[];if(this._endpoint.datagram()){o.push("starting to send ");o.push(this._endpoint.protocol());o.push(" messages\n");o.push(this._transceiver.toDetailedString())}else{o=[];o.push("established ");o.push(this._endpoint.protocol());o.push(" connection\n");o.push(this.toString())}this._instance.initializationData().logger.trace(r.networkCat,o.join(""))}return true},sendNextMessage:function(){if(this._sendStreams.length===0){return}s.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{while(true){var e=this._sendStreams.shift();this._writeStream.swap(e.stream);e.sent();if(this._sendStreams.length===0){break}if(this._state>=b){return}e=this._sendStreams[0];s.assert(!e.prepared);var t=e.stream;t.pos=10;t.writeInt(t.size);t.prepareWrite();e.prepared=true;if(e.outAsync!==null){p.trace("sending asynchronous request",t,this._logger,this._traceLevels)}else{p.traceSend(t,this._logger,this._traceLevels)}this._writeStream.swap(e.stream);if(this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer)){s.assert(!this._writeStream.isEmpty());this.scheduleTimeout(f.Write,this._endpoint.timeout());return}}}catch(n){if(n instanceof Ice.LocalException){this.setState(b,n);return}else{throw n}}s.assert(this._writeStream.isEmpty());if(this._state===S){this.scheduleTimeout(f.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0){t.doAdopt();this._sendStreams.push(t);return e.Queued}s.assert(this._state<b);s.assert(!t.prepared);var n=t.stream;n.pos=10;n.writeInt(n.size);n.prepareWrite();t.prepared=true;if(t.outAsync){p.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels)}else{p.traceSend(t.stream,this._logger,this._traceLevels)}if(this.write(t.stream.buffer)){t.sent();if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}return e.Sent}t.doAdopt();this._writeStream.swap(t.stream);this._sendStreams.push(t);this.scheduleTimeout(f.Write,this._endpoint.timeout());return e.Queued},parseMessage:function(){s.assert(this._state>w&&this._state<b);var e=new P(this._instance);this._readStream.swap(e.stream);this._readStream.resize(h.headerSize);this._readStream.pos=0;this._readHeader=true;this._validated=true;s.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();e.compress=e.stream.readByte();if(e.compress===2){var n=new Ice.FeatureNotSupportedException;n.unsupportedFeature="Cannot uncompress compressed message";throw n}e.stream.pos=h.headerSize;switch(t){case h.closeConnectionMsg:{p.traceRecv(e.stream,this._logger,this._traceLevels);if(this._endpoint.datagram()){if(this._warn){this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc)}}else{this.setState(b,new Ice.CloseConnectionException)}break}case h.requestMsg:{if(this._state===S){p.trace("received request during closing\n"+"(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels)}else{p.traceRecv(e.stream,this._logger,this._traceLevels);e.requestId=e.stream.readInt();e.invokeNum=1;e.servantManager=this._servantManager;e.adapter=this._adapter;++this._dispatchCount}break}case h.requestBatchMsg:{if(this._state===S){p.trace("received batch request during closing\n"+"(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels)}else{p.traceRecv(e.stream,this._logger,this._traceLevels);e.invokeNum=e.stream.readInt();if(e.invokeNum<0){e.invokeNum=0;throw new Ice.UnmarshalOutOfBoundsException}e.servantManager=this._servantManager;e.adapter=this._adapter;this._dispatchCount+=e.invokeNum}break}case h.replyMsg:{p.traceRecv(e.stream,this._logger,this._traceLevels);e.requestId=e.stream.readInt();e.outAsync=this._asyncRequests.get(e.requestId);if(e.outAsync){this._asyncRequests.delete(e.requestId);++this._dispatchCount}else{e=null}this.checkClose();break}case h.validateConnectionMsg:{p.traceRecv(e.stream,this._logger,this._traceLevels);if(this._callback!==null){e.heartbeatCallback=this._callback;++this._dispatchCount}break}default:{p.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels);throw new Ice.UnknownMessageException}}}catch(n){if(n instanceof Ice.LocalException){if(this._endpoint.datagram()){if(this._warn){this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc)}}else{this.setState(b,n)}}else{throw n}}return e},invokeAll:function(e,t,n,i,r,s){var o=null;try{while(t>0){var c=!this._endpoint.datagram()&&n!==0;o=new a(this._instance,this,s,c,i,n);o.invoke(r,e);--t;o=null}e.clear()}catch(u){if(u instanceof Ice.LocalException){this.invokeException(u,t)}else if(u instanceof Ice.ServantError){}else{this._logger.error("unexpected exception:\n"+u.toString());this.invokeException(new Ice.UnknownException(u),t)}}},scheduleTimeout:function(e,t){if(t<0){return}var n=this;if((e&f.Read)!==0){this._readTimeoutId=this._timer.schedule(function(){n.timedOut()},t);this._readTimeoutScheduled=true}if((e&(f.Write|f.Connect))!==0){this._writeTimeoutId=this._timer.schedule(function(){n.timedOut()},t);this._writeTimeoutScheduled=true}},unscheduleTimeout:function(e){if((e&f.Read)!==0&&this._readTimeoutScheduled){this._timer.cancel(this._readTimeoutId);this._readTimeoutScheduled=false}if((e&(f.Write|f.Connect))!==0&&this._writeTimeoutScheduled){this._timer.cancel(this._writeTimeoutId);this._writeTimeoutScheduled=false}},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();if(e.overrideConnectTimeout){return e.overrideConnectTimeoutValue}else{return this._endpoint.timeout()}},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();if(e.overrideCloseTimeout){return e.overrideCloseTimeoutValue}else{return this._endpoint.timeout()}},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(this._state<x||this._dispatchCount>0){return}var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e){this._holdPromises[e].succeed()}this._holdPromises=[]}if(this._state===C&&this._finishedPromises.length>0){this._adapter=null;for(e=0;e<this._finishedPromises.length;++e){this._finishedPromises[e].succeed()}this._finishedPromises=[]}},reap:function(){if(this._monitor!==null){this._monitor.reap(this)}},read:function(e){var t=e.position;var n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("received ");if(this._endpoint.datagram()){i.push(e.limit)}else{i.push(e.position-t);i.push(" of ");i.push(e.limit-t)}i.push(" bytes via ");i.push(this._endpoint.protocol());i.push("\n");i.push(this.toString());this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n},write:function(e){var t=e.position;var n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("sent ");i.push(e.position-t);if(!this._endpoint.datagram()){i.push(" of ");i.push(e.limit-t)}i.push(" bytes via ");i.push(this._endpoint.protocol());i.push("\n");i.push(this.toString());this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n}});O.ObjectAdapterDeactivated=0;O.CommunicatorDestroyed=1;Ice.ConnectionI=O;var k=M({__init__:function(){this.stream=null;this.outAsync=null;this.compress=false;this.requestId=0;this.prepared=false},canceled:function(){s.assert(this.outAsync!==null);this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new n(this.stream.instance,h.currentProtocolEncoding);e.swap(this.stream);this.stream=e;this.adopt=false}},sent:function(){if(this.outAsync!==null){this.outAsync.__sent()}},completed:function(e){if(this.outAsync!==null){this.outAsync.__completedEx(e)}}});k.createForStream=function(e,t,n){var i=new k;i.stream=e;i.compress=t;i.adopt=n;i.isSent=false;i.requestId=0;i.outAsync=null;return i};k.create=function(e,t,n,i){var r=new k;r.stream=t;r.compress=n;r.outAsync=e;r.requestId=i;r.isSent=false;r.adopt=false;return r}})();(function(){var e=Ice.__M.module("IceSSL");var t=Ice.HashUtil;var n=Ice.StringUtil;var i=Ice.EndpointI;var r=Ice.Class;var s=r(i,{__init__:function(e,t,n){this._instance=e;this._delegate=t;this._resource=n||"/"},getInfo:function(){var t=this._delegate.secure()?new e.WSSEndpointInfo:new Ice.WSEndpointInfo;t.resource=this._resource;this._delegate.fillEndpointInfo(t);return t},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps();this._delegate.streamWriteImpl(e);e.writeString(this._resource);e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){if(e===this._delegate.timeout()){return this}else{return new s(this._instance,this._delegate.changeTimeout(e),this._resource)}},changeConnectionId:function(e){if(e===this._delegate.connectionId()){return this}else{return new s(this._instance,this._delegate.changeConnectionId(e),this._resource)}},compress:function(){return this._delegate.compress()},changeCompress:function(e){if(e===this._delegate.compress()){return this}else{return new s(this._instance,this._delegate.changeCompress(e),this._resource)}},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){if(this._hashCode===undefined){this._hashCode=this._delegate.hashCode();this._hashCode=t.addString(this._hashCode,this._resource)}return this._hashCode},compareTo:function(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof s)){return this.type()<e.type()?-1:1}var t=this._delegate.compareTo(e._delegate);if(t!==0){return t}if(this._resource!==e._resource){return this._resource<e._resource?-1:1}return 0},options:function(){var e=this._delegate.options();if(this._resource!==null&&this._resource.length>0){e+=" -r ";e+=this._resource.indexOf(":")!==-1?'"'+this._resource+'"':this._resource}return e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if(e==="-r"){if(t===null){throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n)}this._resource=t}else{return false}return true}});if(typeof Ice.WSTransceiver!=="undefined"){s.prototype.connectable=function(){return true}}else{s.prototype.connectable=function(){return false}}Ice.WSEndpoint=s})();(function(){var e=Ice.HashMap;var t=Ice.RouterInfo;var n=Ice.RouterPrx;var i=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;e!==null;e=e.next){e.value.destroy()}this._table.clear()},find:function(e){if(e===null){return null}var i=n.uncheckedCast(e.ice_router(null));var r=this._table.get(i);if(r===undefined){r=new t(i);this._table.set(i,r)}return r},erase:function(e){var t=null;if(e!==null){var i=n.uncheckedCast(e.ice_router(null));t=this._table.get(i);this._table.delete(i)}return t}});Ice.RouterManager=i})();(function(){var e=Ice.Class;var t=Ice.Debug;var n=e({__init__:function(e,t,n,i){if(e===undefined){this.timeout=60*1e3;this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation;this.close=Ice.ACMClose.CloseOnInvocationAndIdle;return}var r;if((n=="Ice.ACM.Client"||n=="Ice.ACM.Server")&&e.getProperty(n+".Timeout").length===0){r=n}else{r=n+".Timeout"}this.timeout=e.getPropertyAsIntWithDefault(r,i.timeout/1e3)*1e3;var s=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);if(s>=0&&s<=Ice.ACMHeartbeat.maxValue){this.heartbeat=Ice.ACMHeartbeat.valueOf(s)}else{t.warning("invalid value for property `"+n+".Heartbeat"+"', default value will be used instead");this.heartbeat=i.heartbeat}var o=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);if(o>=0&&o<=Ice.ACMClose.maxValue){this.close=Ice.ACMClose.valueOf(o)}else{t.warning("invalid value for property `"+n+".Close"+"', default value will be used instead");this.close=i.close}}});var i=e({add:function(e){t.assert(false)},remove:function(e){t.assert(false)},reap:function(e){t.assert(false)},acm:function(e){t.assert(false);return null},getACM:function(){t.assert(false);return 0}});var r=e(i,{__init__:function(e,t){this._instance=e;this._config=t;this._reapedConnections=[];this._connections=[]},destroy:function(){if(this._instance===null){return}this._instance=null},add:function(e){if(this._config.timeout===0){return}this._connections.push(e);if(this._connections.length==1){var t=this;this._timerToken=this._instance.timer().scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){if(this._config.timeout===0){return}var n=this._connections.indexOf(e);t.assert(n>=0);this._connections.splice(n,1);if(this._connections.length===0){this._instance.timer().cancel(this._timerToken);return}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,i,r){t.assert(this._instance!==null);var o=new n;o.timeout=this._config.timeout;o.close=this._config.close;o.heartbeat=this._config.heartbeat;if(e!==undefined){o.timeout=e*1e3}if(i!==undefined){o.close=i}if(r!==undefined){o.heartbeat=r}return new s(this,this._instance.timer(),o)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(this._reapedConnections.length===0){return null}var e=this._reapedConnections;this._reapedConnections=[];return e},runTimerTask:function(){if(this._instance===null){this._connections=null;return}var e=Date.now();for(var t=0;t<this._connections.length;t++){try{this._connections[t].monitor(e,this._config)}catch(n){this.handleException(n)}}},handleException:function(e){if(this._instance===null){return}this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}});var s=e(i,{__init__:function(e,t,n){this._parent=e;this._timer=t;this._config=n;this._connection=null},add:function(e){t.assert(this._connection===null);this._connection=e;if(this._config.timeout>0){var n=this;this._timerToken=this._timer.scheduleRepeated(function(){n.runTimerTask()},this._config.timeout/2)}},remove:function(e){t.assert(this._connection===e);this._connection=null;if(this._config.timeout>0){this._timer.cancel(this._timerToken)}},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat);
},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=r;Ice.ACMConfig=n})();(function(){var e=Ice.Context;var t=Ice.InitializationException;var n=Ice.Class({__init__:function(){this._context=new e},getContext:function(){return new e(this._context)},setContext:function(t){if(t!==null&&t.size>0){this._context=new e(t)}else{this._context.clear()}},containsKey:function(e){if(e===null){e=""}return this._context.has(e)},get:function(e){if(e===null){e=""}var t=this._context.get(e);if(t===null){t=""}return t},put:function(e,t){if(e===null){e=""}if(t===null){t=""}var n=this._context.get(e);if(n===null){n=""}this._context.set(e,t);return n},remove:function(e){if(e===null){e=""}var t=this._context.get(e);this._context.delete(e);if(t===null){t=""}return t},write:function(t,n){if(t.size===0){Ice.ContextHelper.write(n,this._context)}else{var i=null;if(this._context.size===0){i=t}else{i=new e(this._context);i.merge(t)}Ice.ContextHelper.write(n,i)}}});n.create=function(e){if(e.length===0||e==="None"){return null}else if(e==="Shared"){return new n}else{throw new t("'"+e+"' is not a valid value for Ice.ImplicitContext")}};Ice.ImplicitContextI=n})();(function(){var e=Ice.ArrayUtil;var t=Ice.Debug;var n=Ice.BatchRequestQueue;var i=Ice.HashMap;var r=Ice.HashUtil;var s=Ice.OpaqueEndpointI;var o=Ice.Promise;var c=Ice.Protocol;var a=Ice.ReferenceMode;var u=Ice.StringUtil;var l=Ice.StringSeqHelper;var h=Ice.EndpointSelectionType;var f=Ice.Identity;var d=Ice.RouterPrx;var p=Ice.LocatorPrx;var _=Ice.PropertyNames;var I=Ice.ConnectionRequestHandler;var g=Ice.Class;var v=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"];var m=g({__init__:function(e,t){this._instance=e;this._communicator=t;this._defaultRouter=null;this._defaultLocator=null},create:function(e,t,n,i){if(e.name.length===0&&e.category.length===0){return null}return this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)},createWithAdapterId:function(e,t,n,i){if(e.name.length===0&&e.category.length===0){return null}return this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)},createFixed:function(e,t){if(e.name.length===0&&e.category.length===0){return null}var n=new w(this._instance,this._communicator,e,"",t.endpoint().datagram()?a.ModeDatagram:a.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t);return n},copy:function(e){var t=e.getIdentity();if(t.name.length===0&&t.category.length===0){return null}return e.clone()},createFromString:function(e,n){if(e===undefined||e===null||e.length===0){return null}var i=" \t\n\r";var r;var s=0;r=u.findFirstNotOf(e,i,s);if(r==-1){throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'")}var o=null;s=u.checkQuote(e,r);if(s===-1){throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'")}else if(s===0){s=u.findFirstOf(e,i+":@",r);if(s===-1){s=e.length}o=e.substring(r,s)}else{r++;o=e.substring(r,s);s++}if(r===s){throw new Ice.ProxyParseException("no identity in `"+e+"'")}var c=this._instance.stringToIdentity(o);if(c.name.length===0){if(c.category.length>0){throw new Ice.IllegalIdentityException(c)}else if(u.findFirstNotOf(e,i,s)!=-1){throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'")}else{return null}}var l="";var h=a.ModeTwoway;var f=false;var d=this._instance.defaultsAndOverrides().defaultEncoding;var p=Ice.Protocol_1_0;var _="";while(true){r=u.findFirstNotOf(e,i,s);if(r===-1){break}if(e.charAt(r)==":"||e.charAt(r)=="@"){break}s=u.findFirstOf(e,i+":@",r);if(s==-1){s=e.length}if(r==s){break}var I=e.substring(r,s);if(I.length!=2||I.charAt(0)!="-"){throw new Ice.ProxyParseException("expected a proxy option but found `"+I+"' in `"+e+"'")}var g=null;var v=u.findFirstNotOf(e,i,s);if(v!=-1){var m=e.charAt(v);if(m!="@"&&m!=":"&&m!="-"){r=v;s=u.checkQuote(e,r);if(s==-1){throw new Ice.ProxyParseException("mismatched quotes around value for "+I+" option in `"+e+"'")}else if(s===0){s=u.findFirstOf(e,i+":@",r);if(s===-1){s=e.length}g=e.substring(r,s)}else{r++;g=e.substring(r,s);s++}}}switch(I.charAt(1)){case"f":{if(g===null){throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'")}try{l=u.unescapeString(g,0,g.length)}catch(y){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+y.message)}break}case"t":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -t option in `"+e+"'")}h=a.ModeTwoway;break}case"o":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -o option in `"+e+"'")}h=a.ModeOneway;break}case"O":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -O option in `"+e+"'")}h=a.ModeBatchOneway;break}case"d":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -d option in `"+e+"'")}h=a.ModeDatagram;break}case"D":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -D option in `"+e+"'")}h=a.ModeBatchDatagram;break}case"s":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -s option in `"+e+"'")}f=true;break}case"e":{if(g===null){throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'")}try{d=Ice.stringToEncodingVersion(g)}catch(w){throw new Ice.ProxyParseException("invalid encoding version `"+g+"' in `"+e+"':\n"+w.str)}break}case"p":{if(g===null){throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'")}try{p=Ice.stringToProtocolVersion(g)}catch(w){throw new Ice.ProxyParseException("invalid protocol version `"+g+"' in `"+e+"':\n"+w.str)}break}default:{throw new Ice.ProxyParseException("unknown option `"+I+"' in `"+e+"'")}}}if(r===-1){return this.createImpl(c,l,h,f,p,d,null,null,n)}var E=[];if(e.charAt(r)==":"){var x=[];s=r;while(s<e.length&&e.charAt(s)==":"){r=s+1;s=r;while(true){s=e.indexOf(":",s);if(s==-1){s=e.length;break}else{var S=false;var b=r;while(true){b=e.indexOf('"',b);if(b==-1||s<b){break}else{b=e.indexOf('"',++b);if(b==-1){break}else if(s<b){S=true;break}++b}}if(!S){break}++s}}var C=e.substring(r,s);var P=this._instance.endpointFactoryManager().create(C,false);if(P!==null){E.push(P)}else{x.push(C)}}if(E.length===0){t.assert(x.length>0);throw new Ice.EndpointParseException("invalid endpoint `"+x[0]+"' in `"+e+"'")}else if(x.length!==0&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var M=[];M.push("Proxy contains unknown endpoints:");for(var O=0;O<x.length;++O){M.push(" `");M.push(x[O]);M.push("'")}this._instance.initializationData().logger.warning(M.join(""))}return this.createImpl(c,l,h,f,p,d,E,null,n)}else if(e.charAt(r)=="@"){r=u.findFirstNotOf(e,i,r+1);if(r==-1){throw new Ice.ProxyParseException("missing adapter id in `"+e+"'")}var k=null;s=u.checkQuote(e,r);if(s===-1){throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'")}else if(s===0){s=u.findFirstOf(e,i,r);if(s===-1){s=e.length}k=e.substring(r,s)}else{r++;k=e.substring(r,s);s++}if(s!==e.length&&u.findFirstNotOf(e,i,s)!==-1){throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,s+1)+"' in `"+e+"'")}try{_=u.unescapeString(k,0,k.length)}catch(y){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+y.message)}if(_.length===0){throw new Ice.ProxyParseException("empty adapter id in `"+e+"'")}return this.createImpl(c,l,h,f,p,d,null,_,n)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(e.name.length===0&&e.category.length===0){return null}var n=l.read(t);var i;if(n.length>0){if(n.length>1){throw new Ice.ProxyUnmarshalException}i=n[0]}else{i=""}var r=t.readByte();if(r<0||r>a.ModeLast){throw new Ice.ProxyUnmarshalException}var s=t.readBool();var o=null;var c=null;if(!t.getReadEncoding().equals(Ice.Encoding_1_0)){o=new Ice.ProtocolVersion;o.__read(t);c=new Ice.EncodingVersion;c.__read(t)}else{o=Ice.Protocol_1_0;c=Ice.Encoding_1_0}var u=null;var h=null;var f=t.readSize();if(f>0){u=[];for(var d=0;d<f;d++){u[d]=this._instance.endpointFactoryManager().read(t)}}else{h=t.readString()}return this.createImpl(e,i,r,s,o,c,u,h,null)},setDefaultRouter:function(e){if(this._defaultRouter===null?e===null:this._defaultRouter.equals(e)){return this}var t=new m(this._instance,this._communicator);t._defaultLocator=this._defaultLocator;t._defaultRouter=e;return t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(this._defaultLocator===null?e===null:this._defaultLocator.equals(e)){return this}var t=new m(this._instance,this._communicator);t._defaultRouter=this._defaultRouter;t._defaultLocator=e;return t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t=[],n,i;for(n=0;n<_.clPropNames.length;++n){if(e.indexOf(_.clPropNames[n]+".")===0){return}}var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+".");for(var s=r.entries;s!==null;s=s.next){var o=false;for(n=0,i=v.length;n<i;++n){if(s.key===e+"."+v[n]){o=true;break}}if(!o){t.push(s.key)}}if(t.length>0){var c=[];c.push("found unknown properties for proxy '");c.push(e);c.push("':");for(n=0,i=t.length;n<i;++n){c.push("\n    ");c.push(t[n])}this._instance.initializationData().logger.warning(c.join(""))}},createImpl:function(e,t,n,i,r,s,o,c,a){var u=this._instance.defaultsAndOverrides();var l=null;if(this._defaultLocator!==null){if(!this._defaultLocator.__reference().getEncoding().equals(s)){l=this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(s))}else{l=this._instance.locatorManager().find(this._defaultLocator)}}var f=this._instance.routerManager().find(this._defaultRouter);var _=true;var I=u.defaultPreferSecure;var g=u.defaultEndpointSelection;var v=u.defaultLocatorCacheTimeout;var m=u.defaultInvocationTimeout;if(a!==null&&a.length>0){var y=this._instance.initializationData().properties;if(y.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){this.checkForUnknownProperties(a)}var w;w=a+".Locator";var x=p.uncheckedCast(this._communicator.propertyToProxy(w));if(x!==null){if(!x.__reference().getEncoding().equals(s)){l=this._instance.locatorManager().find(x.ice_encodingVersion(s))}else{l=this._instance.locatorManager().find(x)}}w=a+".Router";var S=d.uncheckedCast(this._communicator.propertyToProxy(w));if(S!==null){var b=".Router";if(a.lastIndexOf(b)==a.length-b.length){var C="`"+w+"="+y.getProperty(w)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(C)}else{f=this._instance.routerManager().find(S)}}w=a+".ConnectionCached";_=y.getPropertyAsIntWithDefault(w,_?1:0)>0;w=a+".PreferSecure";I=y.getPropertyAsIntWithDefault(w,I?1:0)>0;w=a+".EndpointSelection";if(y.getProperty(w).length>0){var P=y.getProperty(w);if(P=="Random"){g=h.Random}else if(P=="Ordered"){g=h.Ordered}else{throw new Ice.EndpointSelectionTypeParseException("illegal value `"+P+"'; expected `Random' or `Ordered'")}}w=a+".LocatorCacheTimeout";var M=y.getProperty(w);if(M.length!==0){v=y.getPropertyAsIntWithDefault(w,v);if(v<-1){v=-1;this._instance.initializationData().logger.warning("invalid value for"+w+"`"+y.getProperty(w)+"': defaulting to -1")}}w=a+".InvocationTimeout";M=y.getProperty(w);if(M.length!==0){m=y.getPropertyAsIntWithDefault(w,m);if(m<1&&m!==-1){m=-1;this._instance.initializationData().logger.warning("invalid value for"+w+"`"+y.getProperty(w)+"': defaulting to -1")}}}return new E(this._instance,this._communicator,e,t,n,i,r,s,o,c,l,f,_,I,g,v,m)}});Ice.ReferenceFactory=m;var y=g({__init__:function(e,n,i,r,s,o,c,a,u){t.assert(i===undefined||i.name!==null);t.assert(i===undefined||i.category!==null);t.assert(r===undefined||r!==null);this._instance=e;this._communicator=n;this._mode=s;this._secure=o;this._identity=i;this._context=y._emptyContext;this._facet=r;this._protocol=c;this._encoding=a;this._invocationTimeout=u;this._hashInitialized=false;this._overrideCompress=false;this._compress=false},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){t.assert(false);return null},getAdapterId:function(){t.assert(false);return""},getRouterInfo:function(){t.assert(false);return null},getLocatorInfo:function(){t.assert(false);return null},getCacheConnection:function(){t.assert(false);return false},getPreferSecure:function(){t.assert(false);return false},getEndpointSelection:function(){t.assert(false);return null},getLocatorCacheTimeout:function(){t.assert(false);return 0},getConnectionId:function(){t.assert(false);return""},changeContext:function(e){if(e===undefined||e===null){e=y._emptyContext}var t=this._instance.referenceFactory().copy(this);if(e.size===0){t._context=y._emptyContext}else{t._context=new i(e)}return t},changeMode:function(e){if(e===this._mode){return this}var t=this._instance.referenceFactory().copy(this);t._mode=e;return t},changeSecure:function(e){if(e===this._secure){return this}var t=this._instance.referenceFactory().copy(this);t._secure=e;return t},changeIdentity:function(e){if(e.equals(this._identity)){return this}var t=this._instance.referenceFactory().copy(this);t._identity=new f(e.name,e.category);return t},changeFacet:function(e){if(e===this._facet){return this}var t=this._instance.referenceFactory().copy(this);t._facet=e;return t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout){return this}var t=this._instance.referenceFactory().copy(this);t._invocationTimeout=e;return t},changeEncoding:function(e){if(e.equals(this._encoding)){return this}var t=this._instance.referenceFactory().copy(this);t._encoding=e;return t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e){return this}var t=this._instance.referenceFactory().copy(this);t._compress=e;t._overrideCompress=true;return t},changeAdapterId:function(e){t.assert(false);return null},changeEndpoints:function(e){t.assert(false);return null},changeLocator:function(e){t.assert(false);return null},changeRouter:function(e){t.assert(false);return null},changeCacheConnection:function(e){t.assert(false);return null},changePreferSecure:function(e){t.assert(false);return null},changeEndpointSelection:function(e){t.assert(false);return null},changeLocatorCacheTimeout:function(e){t.assert(false);return null},changeTimeout:function(e){t.assert(false);return null},changeConnectionId:function(e){t.assert(false);return null},hashCode:function(){if(this._hashInitialized){return this._hashValue}var e=5381;e=r.addNumber(e,this._mode);e=r.addBoolean(e,this._secure);e=r.addHashable(e,this._identity);if(this._context!==null&&this._context!==undefined){for(var t=this._context.entries;t!==null;t=t.next){e=r.addString(e,t.key);e=r.addString(e,t.value)}}e=r.addString(e,this._facet);e=r.addBoolean(e,this._overrideCompress);if(this._overrideCompress){e=r.addBoolean(e,this._compress)}e=r.addHashable(e,this._protocol);e=r.addHashable(e,this._encoding);e=r.addNumber(e,this._invocationTimeout);this._hashValue=e;this._hashInitialized=true;return this._hashValue},isIndirect:function(){t.assert(false);return false},isWellKnown:function(){t.assert(false);return false},streamWrite:function(e){if(this._facet.length===0){e.writeSize(0)}else{e.writeSize(1);e.writeString(this._facet)}e.writeByte(this._mode);e.writeBool(this._secure);if(!e.getWriteEncoding().equals(Ice.Encoding_1_0)){this._protocol.__write(e);this._encoding.__write(e)}},toString:function(){var e=[];var t=this._instance.identityToString(this._identity);if(t.search(/[ :@]/)!=-1){e.push('"');e.push(t);e.push('"')}else{e.push(t)}if(this._facet.length>0){e.push(" -f ");var n=u.escapeString(this._facet,"");if(n.search(/[ :@]/)!=-1){e.push('"');e.push(n);e.push('"')}else{e.push(n)}}switch(this._mode){case a.ModeTwoway:{e.push(" -t");break}case a.ModeOneway:{e.push(" -o");break}case a.ModeBatchOneway:{e.push(" -O");break}case a.ModeDatagram:{e.push(" -d");break}case a.ModeBatchDatagram:{e.push(" -D");break}}if(this._secure){e.push(" -s")}if(!this._protocol.equals(Ice.Protocol_1_0)){e.push(" -p ");e.push(Ice.protocolVersionToString(this._protocol))}e.push(" -e ");e.push(Ice.encodingVersionToString(this._encoding));return e.join("")},toProperty:function(e){t.assert(false);return null},getRequestHandler:function(e){t.assert(false)},getBatchRequestQueue:function(){t.assert(false)},equals:function(e){if(this._mode!==e._mode){return false}if(this._secure!==e._secure){return false}if(!this._identity.equals(e._identity)){return false}if(!this._context.equals(e._context)){return false}if(this._facet!==e._facet){return false}if(this._overrideCompress!==e._overrideCompress){return false}if(this._overrideCompress&&this._compress!==e._compress){return false}if(!this._protocol.equals(e._protocol)){return false}if(!this._encoding.equals(e._encoding)){return false}if(this._invocationTimeout!==e._invocationTimeout){return false}return true},clone:function(){t.assert(false);return null},copyMembers:function(e){e._context=this._context;e._overrideCompress=this._overrideCompress;e._compress=this._compress}});y._emptyContext=new i;y._emptyEndpoints=[];Ice.Reference=y;var w=g(y,{__init__:function(e,t,n,i,r,s,o,c){y.call(this,e,t,n,i,r,s,Ice.Protocol_1_0,o);this._fixedConnection=c},getEndpoints:function(){return y._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return true},getPreferSecure:function(){return false},getEndpointSelection:function(){return h.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return false},isWellKnown:function(){return false},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new w(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);this.copyMembers(e);return e},getRequestHandler:function(e){switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:{if(this._fixedConnection.endpoint().datagram()){throw new Ice.NoEndpointException("")}break}case a.ModeDatagram:case a.ModeBatchDatagram:{if(!this._fixedConnection.endpoint().datagram()){throw new Ice.NoEndpointException("")}break}}var t;var n=this.getInstance().defaultsAndOverrides();if(n.overrideSecure){t=n.overrideSecureValue}else{t=this.getSecure()}if(t&&!this._fixedConnection.endpoint().secure()){throw new Ice.NoEndpointException("")}this._fixedConnection.throwException();var i;if(n.overrideCompress){i=n.overrideCompressValue}else if(this._overrideCompress){i=this._compress}else{i=this._fixedConnection.endpoint().compress()}return e.__setRequestHandler(new I(this,this._fixedConnection,i))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){if(this===e){return true}if(!(e instanceof w)){return false}if(!y.prototype.equals.call(this,e)){return false}return this._fixedConnection.equals(e._fixedConnection)}});Ice.FixedReference=w;var E=g(y,{__init__:function(e,n,i,r,s,o,c,a,u,l,h,f,d,p,_,I,g){y.call(this,e,n,i,r,s,o,c,a,g);this._endpoints=u;this._adapterId=l;this._locatorInfo=h;this._routerInfo=f;this._cacheConnection=d;this._preferSecure=p;this._endpointSelection=_;this._locatorCacheTimeout=I;this._overrideTimeout=false;this._timeout=-1;if(this._endpoints===null){this._endpoints=y._emptyEndpoints}if(this._adapterId===null){this._adapterId=""}this._connectionId="";t.assert(this._adapterId.length===0||this._endpoints.length===0)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=y.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;if(n!==null&&!n.getLocator().ice_getEncodingVersion().equals(e)){t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e))}}return t},changeCompress:function(e){var t=y.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){var n=[];for(var i=0;i<this._endpoints.length;i++){n[i]=this._endpoints[i].changeCompress(e)}t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e){return this}var t=this.getInstance().referenceFactory().copy(this);t._adapterId=e;t._endpoints=y._emptyEndpoints;return t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,function(e,t){return e.equals(t)})){return this}var n=this.getInstance().referenceFactory().copy(this);n._endpoints=t;n._adapterId="";n.applyOverrides(n._endpoints);return n},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(t!==null&&this._locatorInfo!==null&&t.equals(this._locatorInfo)){return this}var n=this.getInstance().referenceFactory().copy(this);n._locatorInfo=t;return n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(t!==null&&this._routerInfo!==null&&t.equals(this._routerInfo)){return this}var n=this.getInstance().referenceFactory().copy(this);n._routerInfo=t;return n},changeCacheConnection:function(e){if(e===this._cacheConnection){return this}var t=this.getInstance().referenceFactory().copy(this);t._cacheConnection=e;return t},changePreferSecure:function(e){if(e===this._preferSecure){return this}var t=this.getInstance().referenceFactory().copy(this);t._preferSecure=e;return t},changeEndpointSelection:function(e){if(e===this._endpointSelection){return this}var t=this.getInstance().referenceFactory().copy(this);t._endpointSelection=e;return t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e){return this}var t=this.getInstance().referenceFactory().copy(this);t._locatorCacheTimeout=e;return t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e){return this}var t=this.getInstance().referenceFactory().copy(this);t._timeout=e;t._overrideTimeout=true;if(this._endpoints.length>0){var n=[];for(var i=0;i<this._endpoints.length;i++){n[i]=this._endpoints[i].changeTimeout(e)}t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e){return this}var t=this.getInstance().referenceFactory().copy(this);t._connectionId=e;if(this._endpoints.length>0){var n=[];for(var i=0;i<this._endpoints.length;i++){n[i]=this._endpoints[i].changeConnectionId(e)}t._endpoints=n}return t},isIndirect:function(){return this._endpoints.length===0},isWellKnown:function(){return this._endpoints.length===0&&this._adapterId.length===0},streamWrite:function(e){y.prototype.streamWrite.call(this,e);e.writeSize(this._endpoints.length);if(this._endpoints.length>0){t.assert(this._adapterId.length===0);for(var n=0;n<this._endpoints.length;++n){e.writeShort(this._endpoints[n].type());this._endpoints[n].streamWrite(e)}}else{e.writeString(this._adapterId)}},toString:function(){var e=[];e.push(y.prototype.toString.call(this));if(this._endpoints.length>0){for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();if(n!==null&&n.length>0){e.push(":");e.push(n)}}}else if(this._adapterId.length>0){e.push(" @ ");var i=u.escapeString(this._adapterId,null);if(i.search(/[ :@]/)!=-1){e.push('"');e.push(i);e.push('"')}else{e.push(i)}}return e.join("")},toProperty:function(e){var t=new i,n;t.set(e,this.toString());t.set(e+".CollocationOptimized","0");t.set(e+".ConnectionCached",this._cacheConnection?"1":"0");t.set(e+".PreferSecure",this._preferSecure?"1":"0");t.set(e+".EndpointSelection",this._endpointSelection===h.Random?"Random":"Ordered");t.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout);t.set(e+".InvocationTimeout",""+this.getInvocationTimeout());if(this._routerInfo!==null){var r=this._routerInfo.getRouter();var s=r.__reference().toProperty(e+".Router");for(n=s.entries;n!==null;n=n.next){t.set(n.key,n.value)}}if(this._locatorInfo!==null){var o=this._locatorInfo.getLocator();var c=o.__reference().toProperty(e+".Locator");for(n=c.entries;n!==null;n=n.next){t.set(n.key,n.value)}}return t},hashCode:function(){if(!this._hashInitialized){y.prototype.hashCode.call(this);this._hashValue=r.addString(this._hashValue,this._adapterId)}return this._hashValue},equals:function(t){if(this===t){return true}if(!(t instanceof E)){return false}if(!y.prototype.equals.call(this,t)){return false}if(this._locatorInfo===null?t._locatorInfo!==null:!this._locatorInfo.equals(t._locatorInfo)){return false}if(this._routerInfo===null?t._routerInfo!==null:!this._routerInfo.equals(t._routerInfo)){return false}if(this._cacheConnection!==t._cacheConnection){return false}if(this._preferSecure!==t._preferSecure){return false}if(this._endpointSelection!==t._endpointSelection){return false}if(this._locatorCacheTimeout!==t._locatorCacheTimeout){return false}if(this._connectionId!==t._connectionId){return false}if(this._overrideTimeout!==t._overrideTimeout){return false}if(this._overrideTimeout&&this._timeout!==t._timeout){return false}if(!e.equals(this._endpoints,t._endpoints,function(e,t){return e.equals(t)})){return false}if(this._adapterId!==t._adapterId){return false}return true},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new n(this._instance,this._mode===a.ModeBatchDatagram)},getConnection:function(){var e=new o;if(this._routerInfo!==null){var t=this;this._routerInfo.getClientEndpoints().then(function(n){if(n.length>0){t.applyOverrides(n);t.createConnection(n).then(function(t,n){e.succeed(t,n)},function(t){e.fail(t)})}else{t.getConnectionNoRouterInfo(e)}}).exception(function(t){e.fail(t)})}else{this.getConnectionNoRouterInfo(e)}return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0){this.createConnection(this._endpoints).then(function(t,n){e.succeed(t,n)}).exception(function(t){e.fail(t)});return}var n=this;if(this._locatorInfo!==null){this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(function(i,r){if(i.length===0){e.fail(new Ice.NoEndpointException(n.toString()));return}n.applyOverrides(i);n.createConnection(i).then(function(t,n){e.succeed(t,n)},function(i){if(i instanceof Ice.NoEndpointException){e.fail(i)}else{t.assert(n._locatorInfo!==null);n.getLocatorInfo().clearCache(n);if(r){var s=n.getInstance().traceLevels();if(s.retry>=2){var o="connection to cached endpoints failed\n"+"removing endpoints from cache and trying one more time\n"+i.toString();n.getInstance().initializationData().logger.trace(s.retryCat,o)}n.getConnectionNoRouterInfo(e);return}e.fail(i)}})}).exception(function(t){e.fail(t)})}else{e.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new E(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);this.copyMembers(e);return e},copyMembers:function(e){y.prototype.copyMembers.call(this,e);e._overrideTimeout=this._overrideTimeout;e._timeout=this._timeout;e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t){e[t]=e[t].changeConnectionId(this._connectionId);if(this._overrideCompress){e[t]=e[t].changeCompress(this._compress)}if(this._overrideTimeout){e[t]=e[t].changeTimeout(this._timeout)}}},filterEndpoints:function(n){var i=[];for(var r=0;r<n.length;++r){if(!(n[r]instanceof s)&&n[r].connectable()){i.push(n[r])}}switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:{i=e.filter(i,function(e,t,n){return!e.datagram()});break}case a.ModeDatagram:case a.ModeBatchDatagram:{i=e.filter(i,function(e,t,n){return e.datagram()});break}}switch(this.getEndpointSelection()){case h.Random:{e.shuffle(i);break}case h.Ordered:{break}default:{t.assert(false);break}}var o=this.getInstance().defaultsAndOverrides();if(o.overrideSecure?o.overrideSecureValue:this.getSecure()){i=e.filter(i,function(e,t,n){return e.secure()})}else{var c=this.getPreferSecure();var u=function(e,t){var n=e.secure();var i=t.secure();if(n&&i||!n&&!i){return 0}else if(!n&&i){return c?1:-1}else{return c?-1:1}};i.sort(u)}return i},createConnection:function(e){var t=this.filterEndpoints(e);if(t.length===0){return(new o).fail(new Ice.NoEndpointException(this.toString()))}var n=new o;var i=this.getInstance().outgoingConnectionFactory();var r;if(this.getCacheConnection()||t.length==1){r=new x(this,null,n);i.create(t,false,this.getEndpointSelection()).then(function(e,t){r.setConnection(e,t)}).exception(function(e){r.setException(e)})}else{var s=[t[0]];r=new x(this,t,n);i.create(s,true,this.getEndpointSelection()).then(function(e,t){r.setConnection(e,t)}).exception(function(e){r.setException(e)})}return n}});Ice.RoutableReference=E;var x=g({__init__:function(e,t,n){this.ref=e;this.endpoints=t;this.promise=n;this.i=0;this.exception=null},setConnection:function(e,t){if(this.ref.getRouterInfo()!==null&&this.ref.getRouterInfo().getAdapter()!==null){e.setAdapter(this.ref.getRouterInfo().getAdapter())}this.promise.succeed(e,t)},setException:function(e){if(this.exception===null){this.exception=e}if(this.endpoints===null||++this.i===this.endpoints.length){this.promise.fail(this.exception);return}var t=this.i!=this.endpoints.length-1;var n=[this.endpoints[this.i]];var i=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then(function(e,t){i.setConnection(e,t)}).exception(function(e){i.setException(e)})}})})();(function(){var e=Ice.Debug;var t=Ice.BasicStream;var n=Ice.EndpointParseException;var i=Ice.OpaqueEndpointI;var r=Ice.Protocol;var s=Ice.StringUtil;var o=Ice.Class({__init__:function(e){this._instance=e;this._factories=[]},add:function(t){for(var n=0;n<this._factories.length;++n){e.assert(this._factories[n].type()!=t.type())}this._factories.push(t)},get:function(e){for(var t=0;t<this._factories.length;++t){if(this._factories[t].type()===e){return this._factories[t]}}return null},create:function(e,o){var c=e.trim();if(c.length===0){throw new n("value has no non-whitespace characters");
}var a=s.splitString(c," \t\n\r");if(a.length===0){throw new n("value has no non-whitespace characters")}var u=a[0];a.splice(0,1);if(u==="default"){u=this._instance.defaultsAndOverrides().defaultProtocol}for(var l=0,h=this._factories.length;l<h;++l){if(this._factories[l].protocol()===u){var f=this._factories[l].create(a,o);if(a.length>0){throw new n("unrecognized argument `"+a[0]+"' in endpoint `"+e+"'")}return f}}if(u==="opaque"){var d=new i;d.initWithOptions(a);if(a.length>0){throw new n("unrecognized argument `"+a[0]+"' in endpoint `"+e+"'")}for(l=0,h=this._factories.length;l<h;++l){if(this._factories[l].type()==d.type()){var p=new t(this._instance,r.currentProtocolEncoding);p.writeShort(d.type());d.streamWrite(p);p.pos=0;p.readShort();p.startReadEncaps();var _=this._factories[l].read(p);p.endReadEncaps();return _}}return d}return null},read:function(e){var t;var n=e.readShort();for(var r=0;r<this._factories.length;++r){if(this._factories[r].type()==n){e.startReadEncaps();t=this._factories[r].read(e);e.endReadEncaps();return t}}e.startReadEncaps();t=new i(n);t.initWithStream(e);e.endReadEncaps();return t},destroy:function(){for(var e=0;e<this._factories.length;++e){this._factories[e].destroy()}this._factories=[]}});Ice.EndpointFactoryManager=o})();(function(){var e=Ice.Debug;var t=Ice.HashMap;var n=Ice.ObjectPrx;var i=Ice.StringUtil;var r=Ice.Identity;var s=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var n=0;n<t.length;n++){var r;try{r=i.toInt(t[n])}catch(s){r=0}if(n===0&&r===-1){break}this._retryIntervals[n]=r>0?r:0}}else{this._retryIntervals=[0]}},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){if(e!==null){return e.__reference().toString()}else{return""}},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e);var n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(e,n){if(e!==null){return e.__reference().toProperty(n)}else{return new t}},streamToProxy:function(e,t){var n=new r;n.__read(e);var i=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(i,t)},referenceToProxy:function(e,t){if(e!==null){var i=t?new t:new n;i.__setup(e);return i}else{return null}},proxyToStream:function(e,t){if(e!==null){var n=e.__reference();n.getIdentity().__write(t);n.streamWrite(t)}else{var i=new r("","");i.__write(t)}},checkRetryAfterException:function(t,n,i,r){var s=this._instance.traceLevels();var o=this._instance.initializationData().logger;if(n.getMode()===Ice.Reference.ModeBatchOneway||n.getMode()===Ice.Reference.ModeBatchDatagram){throw t}if(t instanceof Ice.ObjectNotExistException){var c=t;if(n.getRouterInfo()!==null&&c.operation==="ice_add_proxy"){n.getRouterInfo().clearCache(n);if(s.retry>=1){o.trace(s.retryCat,"retrying operation call to add proxy to router\n"+t.toString())}if(i!==null){i.value=0}return r}else if(n.isIndirect()){if(n.isWellKnown()){var a=n.getLocatorInfo();if(a!==null){a.clearCache(n)}}}else{throw t}}else if(t instanceof Ice.RequestFailedException){throw t}if(t instanceof Ice.MarshalException){throw t}if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException){throw t}if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException){throw t}++r;e.assert(r>0);var u;if(r===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException){u=0}else if(r>this._retryIntervals.length){if(s.retry>=1){o.trace(s.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString())}throw t}else{u=this._retryIntervals[r-1]}if(s.retry>=1){var l="retrying operation call";if(u>0){l+=" in "+u+"ms"}l+=" because of exception\n"+t.toString();o.trace(s.retryCat,l)}e.assert(i!==null);i.value=u;return r}});Ice.ProxyFactory=s})();(function(){var e=Ice.FormatType;var t=Ice.EndpointSelectionType;var n=Ice.Protocol;var i=function(i,r){this.defaultProtocol=i.getPropertyWithDefault("Ice.Default.Protocol",Ice.TcpEndpointFactory!==undefined?"tcp":"ws");var s=i.getProperty("Ice.Default.Host");this.defaultHost=s.length>0?s:null;s=i.getProperty("Ice.Default.SourceAddress");this.defaultSourceAddress=s.length>0?s:null;s=i.getProperty("Ice.Override.Timeout");if(s.length>0){this.overrideTimeout=true;this.overrideTimeoutValue=i.getPropertyAsInt("Ice.Override.Timeout");if(this.overrideTimeoutValue<1&&this.overrideTimeoutValue!==-1){this.overrideTimeoutValue=-1;r.warning("invalid value for Ice.Override.Timeout `"+i.getProperty("Ice.Override.Timeout")+"': defaulting to -1")}}else{this.overrideTimeout=false;this.overrideTimeoutValue=-1}s=i.getProperty("Ice.Override.ConnectTimeout");if(s.length>0){this.overrideConnectTimeout=true;this.overrideConnectTimeoutValue=i.getPropertyAsInt("Ice.Override.ConnectTimeout");if(this.overrideConnectTimeoutValue<1&&this.overrideConnectTimeoutValue!==-1){this.overrideConnectTimeoutValue=-1;r.warning("invalid value for Ice.Override.ConnectTimeout `"+i.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1")}}else{this.overrideConnectTimeout=false;this.overrideConnectTimeoutValue=-1}s=i.getProperty("Ice.Override.CloseTimeout");if(s.length>0){this.overrideCloseTimeout=true;this.overrideCloseTimeoutValue=i.getPropertyAsInt("Ice.Override.CloseTimeout");if(this.overrideCloseTimeoutValue<1&&this.overrideCloseTimeoutValue!==-1){this.overrideCloseTimeoutValue=-1;r.warning("invalid value for Ice.Override.CloseTimeout `"+i.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1")}}else{this.overrideCloseTimeout=false;this.overrideCloseTimeoutValue=-1}this.overrideCompress=false;this.overrideSecure=false;s=i.getPropertyWithDefault("Ice.Default.EndpointSelection","Random");if(s==="Random"){this.defaultEndpointSelection=t.Random}else if(s==="Ordered"){this.defaultEndpointSelection=t.Ordered}else{var o=new Ice.EndpointSelectionTypeParseException;o.str="illegal value `"+s+"'; expected `Random' or `Ordered'";throw o}this.defaultTimeout=i.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4);if(this.defaultTimeout<1&&this.defaultTimeout!==-1){this.defaultTimeout=6e4;r.warning("invalid value for Ice.Default.Timeout `"+i.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")}this.defaultLocatorCacheTimeout=i.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1);if(this.defaultLocatorCacheTimeout<-1){this.defaultLocatorCacheTimeout=-1;r.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+i.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")}this.defaultInvocationTimeout=i.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1);if(this.defaultInvocationTimeout<1&&this.defaultInvocationTimeout!==-1){this.defaultInvocationTimeout=-1;r.warning("invalid value for Ice.Default.InvocationTimeout `"+i.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")}this.defaultPreferSecure=i.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0;s=i.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding));this.defaultEncoding=Ice.stringToEncodingVersion(s);n.checkSupportedEncoding(this.defaultEncoding);var c=i.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=c?e.SlicedFormat:e.CompactFormat};Ice.DefaultsAndOverrides=i})();(function(){var e=Ice.StringUtil;var t=Ice.Identity;var n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){var r=new t;var s=-1;var o=0;while((o=i.indexOf("/",o))!==-1){var c=0;while(o-c>0&&i.charAt(o-c-1)=="\\"){c++}if(c%2===0){if(s==-1){s=o}else{var a=new n;a.str="unescaped backslash in identity `"+i+"'";throw a}}o++}if(s==-1){r.category="";try{r.name=e.unescapeString(i)}catch(u){var a=new n;a.str="invalid identity name `"+i+"': "+a.toString();throw a}}else{try{r.category=e.unescapeString(i,0,s)}catch(u){var a=new n;a.str="invalid category in identity `"+i+"': "+a.toString();throw a}if(s+1<i.length){try{r.name=e.unescapeString(i,s+1,i.length)}catch(u){var a=new n;a.str="invalid name in identity `"+i+"': "+a.toString();throw a}}else{r.name=""}}return r};Ice.identityToString=function(t){if(t.category===null||t.category.length===0){return e.escapeString(t.name,"/")}else{return e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")}};Ice.proxyIdentityCompare=function(e,t){if(e===t){return 0}else if(e===null&&t!==null){return-1}else if(e!==null&&t===null){return 1}else{var n=e.ice_getIdentity();var i=t.ice_getIdentity();var r;if((r=n.name.localeCompare(i.name))!==0){return r}return n.category.localeCompare(i.category)}};Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t){return 0}else if(e===null&&t!==null){return-1}else if(e!==null&&t===null){return 1}else{var n=e.ice_getIdentity();var i=t.ice_getIdentity();var r;if((r=n.name.localeCompare(i.name))!==0){return r}if((r=n.category.localeCompare(i.category))!==0){return r}var s=e.ice_getFacet();var o=t.ice_getFacet();if(s===null&&o===null){return 0}else if(s===null){return-1}else if(o===null){return 1}return s.localeCompare(o)}}})();(function(){var e=Ice.ArrayUtil;var t=Ice.AsyncResultBase;var n=Ice.ConnectionI;var i=Ice.ConnectionReaper;var r=Ice.Debug;var s=Ice.HashMap;var o=Ice.Promise;var c=Ice.EndpointSelectionType;var a=Ice.FactoryACMMonitor;var u=Ice.Class;var l=u({__init__:function(e,t){this._communicator=e;this._instance=t;this._destroyed=false;this._monitor=new a(this._instance,this._instance.clientACM());this._connectionsByEndpoint=new h;this._pending=new s(s.compareEquals);this._pendingConnectCount=0;this._waitPromise=null},destroy:function(){if(this._destroyed){return}this._connectionsByEndpoint.forEach(function(e){e.destroy(n.CommunicatorDestroyed)});this._destroyed=true;this._communicator=null;this.checkFinished()},waitUntilFinished:function(){this._waitPromise=new o;this.checkFinished();return this._waitPromise},create:function(e,t,n){r.assert(e.length>0);var i=this.applyOverrides(e);try{var s={value:false};var c=this.findConnectionByEndpoint(i,s);if(c!==null){return(new o).succeed(c,s.value)}}catch(a){return(new o).fail(a)}var u=new f(this,i,t,n);return u.start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try(function(){if(t._destroyed){throw new Ice.CommunicatorDestroyedException}return e.getClientEndpoints()}).then(function(n){var i=e.getAdapter();var r=t._instance.defaultsAndOverrides();for(var s=0;s<n.length;++s){var o=n[s];if(r.overrideTimeout){o=o.changeTimeout(r.overrideTimeoutValue)}o=o.changeCompress(false);t._connectionsByEndpoint.forEach(function(e){if(e.endpoint().equals(o)){e.setAdapter(i)}})}})},removeAdapter:function(e){if(this._destroyed){return}this._connectionsByEndpoint.forEach(function(t){if(t.getAdapter()===e){t.setAdapter(null)}})},flushAsyncBatchRequests:function(){var e=new t(this._communicator,"flushBatchRequests",null,null,null);if(this._destroyed){e.succeed();return}o.all(this._connectionsByEndpoint.map(function(e){if(e.isActiveOrHolding()){return e.flushBatchRequests().exception(function(e){if(e instanceof Ice.LocalException){}else{throw e}})}})).then(function(){e.succeed(e)},function(t){e.fail(t,e)});return e},applyOverrides:function(e){var t=this._instance.defaultsAndOverrides();var n=[];for(var i=0;i<e.length;++i){var r=e[i];if(t.overrideTimeout){n.push(r.changeTimeout(t.overrideTimeoutValue))}else{n.push(r)}}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}var n=this._instance.defaultsAndOverrides();r.assert(e.length>0);for(var i=0;i<e.length;++i){var s=e[i];if(this._pending.has(s)){continue}var o=this._connectionsByEndpoint.get(s);if(o===undefined){continue}for(var c=0;c<o.length;++c){if(o[c].isActiveOrHolding()){if(n.overrideCompress){t.value=n.overrideCompressValue}else{t.value=s.compress()}return o[c]}}}return null},incPendingConnectCount:function(){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount;r.assert(this._pendingConnectCount>=0);if(this._destroyed&&this._pendingConnectCount===0){this.checkFinished()}},getConnection:function(e,t,n){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}var i=this._monitor.swapReapedConnections();if(i!==null){for(var r=0;r<i.length;++r){var s=i[r];this._connectionsByEndpoint.removeConnection(s.endpoint(),s);this._connectionsByEndpoint.removeConnection(s.endpoint().changeCompress(true),s)}}while(true){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}var o=this.findConnectionByEndpoint(e,n);if(o!==null){return o}if(this.addToPending(t,e)){return null}else{break}}t.nextEndpoint();return null},createConnection:function(e,t){r.assert(this._pending.has(t)&&e!==null);var i=null;try{if(this._destroyed){throw new Ice.CommunicatorDestroyedException}i=new n(this._communicator,this._instance,this._monitor,e,t.changeCompress(false),false,null)}catch(s){if(s instanceof Ice.LocalException){try{e.close()}catch(o){}}throw s}this._connectionsByEndpoint.set(i.endpoint(),i);this._connectionsByEndpoint.set(i.endpoint().changeCompress(true),i);return i},finishGetConnection:function(e,t,n,i){var r=[];if(i!==null){r.push(i)}var s;var o;var c=[];for(s=0;s<e.length;++s){var a=e[s];var u=this._pending.get(a);if(u!==undefined){this._pending.delete(a);for(var l=0;l<u.length;++l){o=u[l];if(o.hasEndpoint(t)){if(r.indexOf(o)===-1){r.push(o)}}else{if(c.indexOf(o)===-1){c.push(o)}}}}}for(s=0;s<r.length;++s){o=r[s];o.removeFromPending();var h=c.indexOf(o);if(h!==-1){c.splice(h,1)}}for(s=0;s<c.length;++s){o=c[s];o.removeFromPending()}var f;var d=this._instance.defaultsAndOverrides();if(d.overrideCompress){f=d.overrideCompressValue}else{f=t.compress()}for(s=0;s<c.length;++s){o=c[s];o.getConnection()}for(s=0;s<r.length;++s){o=r[s];o.setConnection(n,f)}this.checkFinished()},finishGetConnectionEx:function(e,t,n){var i=[];if(n!==null){i.push(n)}var s;var o;var c=[];for(s=0;s<e.length;++s){var a=e[s];var u=this._pending.get(a);if(u!==undefined){this._pending.delete(a);for(var l=0;l<u.length;++l){o=u[l];if(o.removeEndpoints(e)){if(i.indexOf(o)===-1){i.push(o)}}else{if(c.indexOf(o)===-1){c.push(o)}}}}}for(s=0;s<c.length;++s){o=c[s];r.assert(i.indexOf(o)===-1);o.removeFromPending()}this.checkFinished();for(s=0;s<c.length;++s){o=c[s];o.getConnection()}for(s=0;s<i.length;++s){o=i[s];o.setException(t)}},addToPending:function(e,t){var n=false;var i;var r;if(e!==null){for(r=0;r<t.length;++r){i=t[r];var s=this._pending.get(i);if(s!==undefined){n=true;if(s.indexOf(e)===-1){s.push(e)}}}}if(n){return true}for(r=0;r<t.length;++r){i=t[r];if(!this._pending.has(i)){this._pending.set(i,[])}}return false},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var i=t[n];var r=this._pending.get(i);if(r!==undefined){var s=r.indexOf(e);if(s!==-1){r.splice(s,1)}}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("connection to endpoint failed");if(e instanceof Ice.CommunicatorDestroyedException){i.push("\n")}else{if(t){i.push(", trying next endpoint\n")}else{i.push(" and no more endpoints to try\n")}}i.push(e.toString());this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("couldn't resolve endpoint host");if(e instanceof Ice.CommunicatorDestroyedException){i.push("\n")}else{if(t){i.push(", trying next endpoint\n")}else{i.push(" and no more endpoints to try\n")}}i.push(e.toString());this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},checkFinished:function(){if(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0){return}var e=this;o.all(e._connectionsByEndpoint.map(function(e){return e.waitUntilFinished().exception(function(e){r.assert(false)})})).then(function(){var t=e._monitor.swapReapedConnections();if(t!==null){var n=[];for(var i=e._connectionsByEndpoint.entries;i!==null;i=i.next){var s=i.value;for(var o=0;o<s.length;++o){if(n.indexOf(s[o])===-1){n.push(s[o])}}}r.assert(t.length===n.length);e._connectionsByEndpoint.clear()}else{r.assert(e._connectionsByEndpoint.size===0)}r.assert(e._waitPromise!==null);e._waitPromise.succeed();e._monitor.destroy()})}});Ice.OutgoingConnectionFactory=l;var h=u(s,{__init__:function(e){s.call(this,e||s.compareEquals)},set:function(e,t){var i=this.get(e);if(i===undefined){i=[];s.prototype.set.call(this,e,i)}r.assert(t instanceof n);i.push(t);return undefined},removeConnection:function(e,t){var n=this.get(e);r.assert(n!==null);var i=n.indexOf(t);r.assert(i!==-1);n.splice(i,1);if(n.length===0){this.delete(e)}},map:function(e){var t=[];this.forEach(function(n){t.push(e(n))});return t},forEach:function(e){for(var t=this._head;t!==null;t=t._next){for(var n=0;n<t.value.length;++n){e(t.value[n])}}}});var f=u({__init__:function(e,t,n,i){this._factory=e;this._endpoints=t;this._hasMore=n;this._selType=i;this._promise=new o;this._index=0;this._current=null},connectionStartCompleted:function(e){e.activate();this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){r.assert(this._current!==null);if(this.connectionStartFailedImpl(t)){this.nextEndpoint()}},setConnection:function(e,t){this._promise.succeed(e,t);this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e);this._factory.decPendingConnectCount()},hasEndpoint:function(e){return this.findEndpoint(e)!==-1},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t){if(e.equals(this._endpoints[t])){return t}}return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);if(n!==-1){this._endpoints.splice(n,1)}}this._index=0;return this._endpoints.length===0},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){this._promise.fail(e);return}this.getConnection();return this._promise},getConnection:function(){try{var e={value:false};var t=this._factory.getConnection(this._endpoints,this,e);if(t===null){return}this._promise.succeed(t,e.value);this._factory.decPendingConnectCount()}catch(n){this._promise.fail(n);this._factory.decPendingConnectCount()}},nextEndpoint:function(){while(true){var e=this._factory._instance.traceLevels();try{r.assert(this._index<this._endpoints.length);this._current=this._endpoints[this._index++];if(e.network>=2){var t=[];t.push("trying to establish ");t.push(this._current.protocol());t.push(" connection to ");t.push(this._current.toConnectorString());this._factory._instance.initializationData().logger.trace(e.networkCat,t.join(""))}var n=this._factory.createConnection(this._current.connect(),this._current);var i=this;n.start().then(function(){i.connectionStartCompleted(n)},function(e){i.connectionStartFailed(n,e)})}catch(s){if(e.network>=2){var t=[];t.push("failed to establish ");t.push(this._current.protocol());t.push(" connection to ");t.push(this._current.toString());t.push("\n");t.push(s.toString());this._factory._instance.initializationData().logger.trace(e.networkCat,t.join(""))}if(this.connectionStartFailedImpl(s)){continue}}break}},connectionStartFailedImpl:function(e){if(e instanceof Ice.LocalException){this._factory.handleConnectionException(e,this._hasMore||this._index<this._endpoints.length);if(e instanceof Ice.CommunicatorDestroyedException){this._factory.finishGetConnectionEx(this._endpoints,e,this)}else if(this._index<this._endpoints.length){return true}else{this._factory.finishGetConnectionEx(this._endpoints,e,this)}}else{this._factory.finishGetConnectionEx(this._endpoints,e,this)}return false}})})();(function(){var e=Ice.Debug;var t=Ice.HashMap;var n=Ice.Promise;var i=Ice.Protocol;var r=Ice.LocatorRegisterPrx;var s=Ice.Class;var o=s({__init__:function(e,n,i){this._locator=e;this._locatorRegistry=null;this._table=n;this._background=i;this._adapterRequests=new t;this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null;this._table.clear()},equals:function(e){if(this===e){return true}if(e instanceof o){return this._locator.equals(e._locator)}return false},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(this._locatorRegistry!==null){return(new n).succeed(this._locatorRegistry)}var e=this;return this._locator.getRegistry().then(function(t){e._locatorRegistry=r.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered));return e._locatorRegistry})},getEndpoints:function(t,i,r,s){var o=s||new n;e.assert(t.isIndirect());var c=null;var a={value:false};if(!t.isWellKnown()){c=this._table.getAdapterEndpoints(t.getAdapterId(),r,a);if(!a.value){if(this._background&&c!==null){this.getAdapterRequest(t).addCallback(t,i,r,null)}else{this.getAdapterRequest(t).addCallback(t,i,r,o);return o}}}else{var u=this._table.getObjectReference(t.getIdentity(),r,a);if(!a.value){if(this._background&&u!==null){this.getObjectRequest(t).addCallback(t,null,r,null)}else{this.getObjectRequest(t).addCallback(t,null,r,o);return o}}if(!u.isIndirect()){c=u.getEndpoints()}else if(!u.isWellKnown()){this.getEndpoints(u,t,r,o);return o}}e.assert(c!==null);if(t.getInstance().traceLevels().location>=1){this.getEndpointsTrace(t,c,true)}o.succeed(c,true);return o},clearCache:function(t){e.assert(t.isIndirect());if(!t.isWellKnown()){var n=this._table.removeAdapterEndpoints(t.getAdapterId());if(n!==null&&t.getInstance().traceLevels().location>=2){this.trace("removed endpoints from locator table\n",t,n)}}else{var i=this._table.removeObjectReference(t.getIdentity());if(i!==null){if(!i.isIndirect()){if(t.getInstance().traceLevels().location>=2){this.trace("removed endpoints from locator table",t,i.getEndpoints())}}else if(!i.isWellKnown()){this.clearCache(i)}}}},trace:function(t,n,i){e.assert(n.isIndirect());var r=[];r.push(t);r.push("\n");if(!n.isWellKnown()){r.push("adapter = ");r.push(n.getAdapterId());r.push("\n")}else{r.push("object = ");r.push(n.getInstance().identityToString(n.getIdentity()));r.push("\n")}r.push("endpoints = ");for(var s=0;s<i.length;s++){r.push(i[s].toString());if(s+1<i.length){r.push(":")}}n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,r.join(""))},getEndpointsException:function(t,n){e.assert(t.isIndirect());var i=t.getInstance();var r,s;try{throw n}catch(o){if(o instanceof Ice.AdapterNotFoundException){if(i.traceLevels().location>=1){r=[];r.push("adapter not found\n");r.push("adapter = ");r.push(t.getAdapterId());i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}s=new Ice.NotRegisteredException;s.kindOfObject="object adapter";s.id=t.getAdapterId();throw s}else if(o instanceof Ice.ObjectNotFoundException){if(i.traceLevels().location>=1){r=[];r.push("object not found\n");r.push("object = ");r.push(i.identityToString(t.getIdentity()));i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}s=new Ice.NotRegisteredException;s.kindOfObject="object";s.id=i.identityToString(t.getIdentity());throw s}else if(o instanceof Ice.NotRegisteredException){throw o}else if(o instanceof Ice.LocalException){if(i.traceLevels().location>=1){r=[];r.push("couldn't contact the locator to retrieve adapter endpoints\n");if(t.getAdapterId().length>0){r.push("adapter = ");r.push(t.getAdapterId());r.push("\n")}else{r.push("object = ");r.push(i.identityToString(t.getIdentity()));r.push("\n")}r.push("reason = "+o.toString());i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}throw o}else{e.assert(false)}}},getEndpointsTrace:function(e,t,n){if(t!==null&&t.length>0){if(n){this.trace("found endpoints in locator table",e,t)}else{this.trace("retrieved endpoints from locator, adding to locator table",e,t)}}else{var i=e.getInstance();var r=[];r.push("no endpoints configured for ");if(e.getAdapterId().length>0){r.push("adapter\n");r.push("adapter = ");r.push(e.getAdapterId());r.push("\n")}else{r.push("object\n");r.push("object = ");r.push(i.identityToString(e.getIdentity()));r.push("\n")}i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance();var n=[];n.push("searching for adapter by id\n");n.push("adapter = ");n.push(e.getAdapterId());t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._adapterRequests.get(e.getAdapterId());if(i!==undefined){return i}i=new l(this,e);this._adapterRequests.set(e.getAdapterId(),i);return i},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance();var n=[];n.push("searching for object by id\n");n.push("object = ");n.push(t.identityToString(e.getIdentity()));t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._objectRequests.get(e.getIdentity());if(i!==undefined){return i}i=new u(this,e);this._objectRequests.set(e.getIdentity(),i);return i},finishRequest:function(t,n,i,r){if(i===null||i.__reference().isIndirect()){for(var s=0;s<n.length;++s){this._table.removeObjectReference(n[s].getIdentity())}}if(!t.isWellKnown()){if(i!==null&&!i.__reference().isIndirect()){this._table.addAdapterEndpoints(t.getAdapterId(),i.__reference().getEndpoints())}else if(r){this._table.removeAdapterEndpoints(t.getAdapterId())}e.assert(this._adapterRequests.has(t.getAdapterId()));this._adapterRequests.delete(t.getAdapterId())}else{if(i!==null&&!i.__reference().isWellKnown()){this._table.addObjectReference(t.getIdentity(),i.__reference())}else if(r){this._table.removeObjectReference(t.getIdentity())}e.assert(this._objectRequests.has(t.getIdentity()));this._objectRequests.delete(t.getIdentity())}}});Ice.LocatorInfo=o;var c=s({__init__:function(e,t,n){this._ref=e;this._ttl=t;this._promise=n},response:function(e,t){var n=null;if(t!==null){var r=t.__reference();if(this._ref.isWellKnown()&&!i.isSupported(this._ref.getEncoding(),r.getEncoding())){}else if(!r.isIndirect()){n=r.getEndpoints()}else if(this._ref.isWellKnown()&&!r.isWellKnown()){var s=this;e.getEndpoints(r,this._ref,this._ttl).then(function(e,t){if(s._promise!==null){s._promise.succeed(e,t)}},function(e){if(s._promise!==null){s._promise.fail(e)}});return}}if(this._ref.getInstance().traceLevels().location>=1){e.getEndpointsTrace(this._ref,n,false)}if(this._promise!==null){this._promise.succeed(n===null?[]:n,false)}},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(n){if(this._promise!==null){this._promise.fail(n)}}}});var a=s({__init__:function(e,t){this._locatorInfo=e;this._ref=t;this._callbacks=[];this._wellKnownRefs=[];this._sent=false;this._response=false;this._proxy=null;this._exception=null},addCallback:function(e,t,n,i){var r=new c(e,n,i);if(this._response){r.response(this._locatorInfo,this._proxy)}else if(this._exception!==null){r.exception(this._locatorInfo,this._exception)}else{this._callbacks.push(r);if(t!==null){this._wellKnownRefs.push(t)}if(!this._sent){this._sent=true;this.send()}}},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,false);this._response=true;this._proxy=e;for(var t=0;t<this._callbacks.length;++t){this._callbacks[t].response(this._locatorInfo,e)}},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException);this._exception=e;for(var t=0;t<this._callbacks.length;++t){this._callbacks[t].exception(this._locatorInfo,e)}}});var u=s(a,{__init__:function(t,n){a.call(this,t,n);e.assert(n.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(t){this.exception(t)}}});var l=s(a,{__init__:function(t,n){a.call(this,t,n);e.assert(n.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(t){this.exception(t)}}})})();(function(){var e=Ice.AsyncResultBase;var t=Ice.Debug;var n=Ice.Identity;var i=Ice.Promise;var r=Ice.PropertyNames;var s=Ice.ServantManager;var o=Ice.StringUtil;var c=["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"];var a=0;var u=5;var l=6;var h=Ice.Class({__init__:function(e,n,i,r,o,c,u){this._instance=e;this._communicator=n;this._objectAdapterFactory=i;this._servantManager=new s(e,r);this._name=r;this._routerEndpoints=[];this._routerInfo=null;this._state=a;this._noConfig=c;if(this._noConfig){this._reference=this._instance.referenceFactory().createFromString("dummy -t","");this._messageSizeMax=this._instance.messageSizeMax();u.succeed(this,u);return}var l=this._instance.initializationData().properties;var h=[];var f=this.filterProperties(h);if(h.length!==0&&l.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){var d=["found unknown properties for object adapter `"+r+"':"];for(var p=0;p<h.length;++p){d.push("\n    "+h[p])}this._instance.initializationData().logger.warning(d.join(""))}if(o===null&&f){var _=new Ice.InitializationException;_.reason="object adapter `"+this._name+"' requires configuration";throw _}var I=l.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+I,"")}catch(g){if(g instanceof Ice.ProxyParseException){var _=new Ice.InitializationException;_.reason="invalid proxy options `"+I+"' for object adapter `"+r+"'";throw _}else{throw g}}{var v=this._instance.messageSizeMax()/1024;var m=l.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",v);if(m<1||m>2147483647/1024){this._messageSizeMax=2147483647}else{this._messageSizeMax=m*1024}}try{if(o===null){o=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))}if(o!==null){this._routerInfo=this._instance.routerManager().find(o);t.assert(this._routerInfo!==null);if(this._routerInfo.getAdapter()!==null){throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(o.ice_getIdentity()))}var y=this;this._routerInfo.getServerEndpoints().then(function(e){var t;for(t=0;t<e.length;++t){y._routerEndpoints.push(e[t])}y._routerEndpoints.sort(function(e,t){return e.compareTo(t)});for(t=0;t<y._routerEndpoints.length-1;){var n=y._routerEndpoints[t];var i=y._routerEndpoints[t+1];if(n.equals(i)){y._routerEndpoints.splice(t,1)}else{++t}}y._routerInfo.setAdapter(y);return y._instance.outgoingConnectionFactory().setRouterInfo(y._routerInfo)}).then(function(){u.succeed(y,u)},function(e){u.fail(e,u)})}else{var w=l.getProperty(this._name+".Endpoints");if(w.length>0){throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported")}u.succeed(this,u)}}catch(_){this.destroy();throw _}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator;
},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);if(this.checkForDeactivation(t)){return t}return t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);if(this._state<u){this._state=u;this._instance.outgoingConnectionFactory().removeAdapter(this)}return t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=u},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this);var n=this;var i=function(){if(n._state<l){n._state=l;n._servantManager.destroy();n._objectAdapterFactory.removeObjectAdapter(n)}return t.succeed(t)};return this._state<u?this.deactivate().then(i):i()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation();this.checkIdentity(t);this.checkServant(e);var i=t.clone();this._servantManager.addServant(e,i,n);return this.newProxy(i,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new n(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e);this.checkForDeactivation();this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.removeServant(e,t)},removeAllFacets:function(e){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){this.checkForDeactivation();return this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.findServant(e,t)},findAllFacets:function(e){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){this.checkForDeactivation();return this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation();this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){this.checkForDeactivation();return this._servantManager.removeServantLocator(e)},findServantLocator:function(e){this.checkForDeactivation();return this._servantManager.findServantLocator(e)},createProxy:function(e){this.checkForDeactivation();this.checkIdentity(e);return this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){var n=[];for(var i=0;i<this._routerEndpoints.length;++i){n.push(this._routerEndpoints[i])}var r=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=u){var t=new Ice.ObjectAdapterDeactivatedException;t.name=this.getName();if(e!==undefined){e.fail(t,e);return true}else{throw t}}return false},checkIdentity:function(e){if(e.name===undefined||e.name===null||e.name.length===0){throw new Ice.IllegalIdentityException(e)}if(e.category===undefined||e.category===null){e.category=""}},checkServant:function(e){if(e===undefined||e===null){throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")}},filterProperties:function(e){var t=true,n;var i=this._name+".";for(n=0;n<r.clPropNames.length;++n){if(i.indexOf(r.clPropNames[n]+".")===0){t=false;break}}var s=true;var o=this._instance.initializationData().properties.getPropertiesForPrefix(i);for(var a=o.entries;a!==null;a=a.next){var u=false;for(n=0;n<c.length;++n){if(a.key===i+c[n]){s=false;u=true;break}}if(!u&&t){e.push(a.key)}}return s}});Ice.ObjectAdapterI=h})();(function(){var e=Ice.HashMap;var t=Ice.LocatorInfo;var n=Ice.LocatorTable;var i=Ice.LocatorPrx;var r=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0;this._table=new e(e.compareEquals);this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;e!==null;e=e.next){e.value.destroy()}this._table.clear();this._locatorTables.clear()},find:function(e){if(e===null){return null}var r=i.uncheckedCast(e.ice_locator(null));var s=this._table.get(r);if(s===undefined){var o=this._locatorTables.get(r.ice_getIdentity());if(o===undefined){o=new n;this._locatorTables.set(r.ice_getIdentity(),o)}s=new t(r,o,this._background);this._table.set(r,s)}return s}});Ice.LocatorManager=r})();(function(){var e=Ice.AsyncResultBase;var t=Ice.ObjectAdapterI;var n=Ice.Promise;var i=Ice.Class({__init__:function(e,t){this._instance=e;this._communicator=t;this._adapters=[];this._adapterNamesInUse=[];this._shutdownPromise=new n},shutdown:function(){if(this._instance===null){return this._shutdownPromise}this._instance=null;this._communicator=null;this._shutdownPromise=n.all(this._adapters.map(function(e){return e.deactivate()}));return this._shutdownPromise},waitForShutdown:function(){var e=this;return this._shutdownPromise.then(function(){return n.all(e._adapters.map(function(e){return e.waitForDeactivate()}))})},isShutdown:function(){return this._instance===null},destroy:function(){var e=this;return this.waitForShutdown().then(function(){return n.all(e._adapters.map(function(e){return e.destroy()}))})},createObjectAdapter:function(e,n,i){if(this._instance===null){throw new Ice.ObjectAdapterDeactivatedException}var r=null;try{if(e.length===0){var s=Ice.generateUUID();r=new t(this._instance,this._communicator,this,s,null,true,i)}else{if(this._adapterNamesInUse.indexOf(e)!==-1){throw new Ice.AlreadyRegisteredException("object adapter",e)}r=new t(this._instance,this._communicator,this,e,n,false,i);this._adapterNamesInUse.push(e)}this._adapters.push(r)}catch(o){i.fail(o,i)}},removeObjectAdapter:function(e){if(this._instance===null){return}var t=this._adapters.indexOf(e);if(t!==-1){this._adapters.splice(t,1)}t=this._adapterNamesInUse.indexOf(e.getName());if(t!==-1){this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=i})();(function(){t.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",false,undefined,undefined);IceMX.Metrics=t.defineObject(function(e,t,n,i,r){Ice.Object.call(this);this.id=e!==undefined?e:"";this.total=t!==undefined?t:new Ice.Long(0,0);this.current=n!==undefined?n:0;this.totalLifetime=i!==undefined?i:new Ice.Long(0,0);this.failures=r!==undefined?r:0},Ice.Object,undefined,1,["::Ice::Object","::IceMX::Metrics"],-1,function(e){e.writeString(this.id);e.writeLong(this.total);e.writeInt(this.current);e.writeLong(this.totalLifetime);e.writeInt(this.failures)},function(e){this.id=e.readString();this.total=e.readLong();this.current=e.readInt();this.totalLifetime=e.readLong();this.failures=e.readInt()},false);IceMX.MetricsPrx=t.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,undefined);t.defineOperations(IceMX.Metrics,IceMX.MetricsPrx);IceMX.MetricsFailures=t.defineStruct(function(e,t){this.id=e!==undefined?e:"";this.failures=t!==undefined?t:null},false,function(e){e.writeString(this.id);IceMX.StringIntDictHelper.write(e,this.failures)},function(e){this.id=e.readString();this.failures=IceMX.StringIntDictHelper.read(e)},2,false);t.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",false);t.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",false,"IceMX.Metrics");t.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",false,undefined,undefined,Ice.ArrayUtil.equals);IceMX.UnknownMetricsView=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"IceMX::UnknownMetricsView",undefined,undefined,false,false);IceMX.MetricsAdmin=t.defineObject(undefined,Ice.Object,undefined,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,undefined,undefined,false);IceMX.MetricsAdminPrx=t.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,undefined);t.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,true],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]});IceMX.ThreadMetrics=t.defineObject(function(e,t,n,i,r,s,o,c){IceMX.Metrics.call(this,e,t,n,i,r);this.inUseForIO=s!==undefined?s:0;this.inUseForUser=o!==undefined?o:0;this.inUseForOther=c!==undefined?c:0},IceMX.Metrics,undefined,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,function(e){e.writeInt(this.inUseForIO);e.writeInt(this.inUseForUser);e.writeInt(this.inUseForOther)},function(e){this.inUseForIO=e.readInt();this.inUseForUser=e.readInt();this.inUseForOther=e.readInt()},false);IceMX.ThreadMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,undefined);t.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx);IceMX.DispatchMetrics=t.defineObject(function(e,t,n,i,r,s,o,c){IceMX.Metrics.call(this,e,t,n,i,r);this.userException=s!==undefined?s:0;this.size=o!==undefined?o:new Ice.Long(0,0);this.replySize=c!==undefined?c:new Ice.Long(0,0)},IceMX.Metrics,undefined,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.userException);e.writeLong(this.size);e.writeLong(this.replySize)},function(e){this.userException=e.readInt();this.size=e.readLong();this.replySize=e.readLong()},false);IceMX.DispatchMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,undefined);t.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx);IceMX.ChildInvocationMetrics=t.defineObject(function(e,t,n,i,r,s,o){IceMX.Metrics.call(this,e,t,n,i,r);this.size=s!==undefined?s:new Ice.Long(0,0);this.replySize=o!==undefined?o:new Ice.Long(0,0)},IceMX.Metrics,undefined,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.size);e.writeLong(this.replySize)},function(e){this.size=e.readLong();this.replySize=e.readLong()},false);IceMX.ChildInvocationMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,undefined);t.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx);IceMX.CollocatedMetrics=t.defineObject(function(e,t,n,i,r,s,o){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,s,o)},IceMX.ChildInvocationMetrics,undefined,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,undefined,undefined,false);IceMX.CollocatedMetricsPrx=t.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,undefined);t.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx);IceMX.RemoteMetrics=t.defineObject(function(e,t,n,i,r,s,o){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,s,o)},IceMX.ChildInvocationMetrics,undefined,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,undefined,undefined,false);IceMX.RemoteMetricsPrx=t.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,undefined);t.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx);IceMX.InvocationMetrics=t.defineObject(function(e,t,n,i,r,s,o,c,a){IceMX.Metrics.call(this,e,t,n,i,r);this.retry=s!==undefined?s:0;this.userException=o!==undefined?o:0;this.remotes=c!==undefined?c:null;this.collocated=a!==undefined?a:null},IceMX.Metrics,undefined,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.retry);e.writeInt(this.userException);IceMX.MetricsMapHelper.write(e,this.remotes);IceMX.MetricsMapHelper.write(e,this.collocated)},function(e){this.retry=e.readInt();this.userException=e.readInt();this.remotes=IceMX.MetricsMapHelper.read(e);this.collocated=IceMX.MetricsMapHelper.read(e)},false);IceMX.InvocationMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,undefined);t.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx);IceMX.ConnectionMetrics=t.defineObject(function(e,t,n,i,r,s,o){IceMX.Metrics.call(this,e,t,n,i,r);this.receivedBytes=s!==undefined?s:new Ice.Long(0,0);this.sentBytes=o!==undefined?o:new Ice.Long(0,0)},IceMX.Metrics,undefined,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.receivedBytes);e.writeLong(this.sentBytes)},function(e){this.receivedBytes=e.readLong();this.sentBytes=e.readLong()},false);IceMX.ConnectionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,undefined);t.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx)})();(function(){var e=Ice.Debug;var t=Ice.HashMap;var n=Ice.ConnectRequestHandler;var i=Ice.Class({__init__:function(e){this._instance=e;this._handlers=new t(t.compareEquals)},getRequestHandler:function(e,t){var i=false;var r;if(e.getCacheConnection()){r=this._handlers.get(e);if(!r){r=new n(e,t);this._handlers.set(e,r);i=true}}else{i=true;r=new n(e,t)}if(i){e.getConnection().then(function(e,t){r.setConnection(e,t)},function(e){r.setException(e)})}return t.__setRequestHandler(r.connect(t))},removeRequestHandler:function(e,t){if(e.getCacheConnection()){if(this._handlers.get(e)===t){this._handlers.delete(e)}}}});Ice.RequestHandlerFactory=i})();(function(){Ice.Process=t.defineObject(undefined,Ice.Object,undefined,1,["::Ice::Object","::Ice::Process"],-1,undefined,undefined,false);Ice.ProcessPrx=t.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,undefined);t.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]})})();(function(){var e=Ice.TcpEndpointI;var t=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(t,n){var i=new e(this._instance);i.initWithOptions(t,n);return i},read:function(t){var n=new e(this._instance);n.initWithStream(t);return n},destroy:function(){this._instance=null},clone:function(e){return new t(e)}});Ice.TcpEndpointFactory=t})();(function(){t.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.PropertiesAdmin=t.defineObject(undefined,Ice.Object,undefined,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,undefined,undefined,false);Ice.PropertiesAdminPrx=t.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,undefined);t.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]})})();(function(){Ice.LogMessageType=t.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]);t.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",false);Ice.LogMessage=t.defineStruct(function(e,t,n,i){this.type=e!==undefined?e:Ice.LogMessageType.PrintMessage;this.timestamp=t!==undefined?t:new Ice.Long(0,0);this.traceCategory=n!==undefined?n:"";this.message=i!==undefined?i:""},true,function(e){Ice.LogMessageType.__write(e,this.type);e.writeLong(this.timestamp);e.writeString(this.traceCategory);e.writeString(this.message)},function(e){this.type=Ice.LogMessageType.__read(e);this.timestamp=e.readLong();this.traceCategory=e.readString();this.message=e.readString()},11,false);t.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",false);Ice.RemoteLogger=t.defineObject(undefined,Ice.Object,undefined,1,["::Ice::Object","::Ice::RemoteLogger"],-1,undefined,undefined,false);Ice.RemoteLoggerPrx=t.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,undefined);t.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]});Ice.RemoteLoggerAlreadyAttachedException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",undefined,undefined,false,false);Ice.LoggerAdmin=t.defineObject(undefined,Ice.Object,undefined,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,undefined,undefined,false);Ice.LoggerAdminPrx=t.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,undefined);t.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]})})();(function(){var e=Ice.WSEndpoint;var t=Ice.Class({__init__:function(e,t){this._instance=e;this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(t,n){var i=new e(this._instance,this._delegate.create(t,n));i.initWithOptions(t);return i},read:function(t){var n=new e(this._instance,this._delegate.read(t));n.initWithStream(t);return n},destroy:function(){this._delegate.destroy();this._instance=null}});Ice.WSEndpointFactory=t})();(function(){t.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined)})();(function(){var e=Ice.AsyncResultBase;var t=Ice.Debug;var n=Ice.DefaultsAndOverrides;var i=Ice.EndpointFactoryManager;var r=Ice.HashMap;var s=Ice.ImplicitContextI;var o=Ice.LocatorManager;var c=Ice.Logger;var a=Ice.ObjectAdapterFactory;var u=Ice.ObjectFactoryManager;var l=Ice.OutgoingConnectionFactory;var h=Ice.Promise;var f=Ice.Properties;var d=Ice.ProxyFactory;var p=Ice.RetryQueue;var _=Ice.RouterManager;var I=Ice.Timer;var g=Ice.TraceLevels;var v=Ice.ReferenceFactory;var m=Ice.RequestHandlerFactory;var y=Ice.ACMConfig;var w=0;var E=1;var x=2;var S=Ice.Class({__init__:function(e){this._state=w;this._initData=e;this._traceLevels=null;this._defaultsAndOverrides=null;this._messageSizeMax=0;this._batchAutoFlushSize=0;this._clientACM=null;this._implicitContext=null;this._routerManager=null;this._locatorManager=null;this._referenceFactory=null;this._requestHandlerFactory=null;this._proxyFactory=null;this._outgoingConnectionFactory=null;this._servantFactoryManager=null;this._objectAdapterFactory=null;this._retryQueue=null;this._endpointHostResolver=null;this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){t.assert(this._traceLevels!==null);return this._traceLevels},defaultsAndOverrides:function(){t.assert(this._defaultsAndOverrides!==null);return this._defaultsAndOverrides},routerManager:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._routerManager!==null);return this._routerManager},locatorManager:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._locatorManager!==null);return this._locatorManager},referenceFactory:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._referenceFactory!==null);return this._referenceFactory},requestHandlerFactory:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._requestHandlerFactory!==null);return this._requestHandlerFactory},proxyFactory:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._proxyFactory!==null);return this._proxyFactory},outgoingConnectionFactory:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._outgoingConnectionFactory!==null);return this._outgoingConnectionFactory},servantFactoryManager:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._servantFactoryManager!==null);return this._servantFactoryManager},objectAdapterFactory:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._objectAdapterFactory!==null);return this._objectAdapterFactory},retryQueue:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._retryQueue!==null);return this._retryQueue},timer:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._timer!==null);return this._timer},endpointFactoryManager:function(){if(this._state===x){throw new Ice.CommunicatorDestroyedException}t.assert(this._endpointFactoryManager!==null);return this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(this._state==x){throw new Ice.CommunicatorDestroyedException}this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(this._state==x){throw new Ice.CommunicatorDestroyedException}this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{if(this._initData.properties===null){this._initData.properties=f.createProperties()}if(Ice.__oneOfDone===undefined){Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0;Ice.__oneOfDone=true}if(this._initData.logger===null){this._initData.logger=Ice.getProcessLogger()}this._traceLevels=new g(this._initData.properties);this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);var r=1024;var c=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",r);if(c<1||c>2147483647/1024){this._messageSizeMax=2147483647}else{this._messageSizeMax=c*1024}if(this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length===0&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0){if(this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0){this._batchAutoFlushSize=this._messageSizeMax}}else{c=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024);if(c<1){this._batchAutoFlushSize=c}else if(c>2147483647/1024){this._batchAutoFlushSize=2147483647}else{this._batchAutoFlushSize=c*1024}}this._clientACM=new y(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new y(this._initData.properties,this._initData.logger,"Ice.ACM",new y));this._implicitContext=s.create(this._initData.properties.getProperty("Ice.ImplicitContext"));this._routerManager=new _;this._locatorManager=new o(this._initData.properties);this._referenceFactory=new v(this,e);this._requestHandlerFactory=new m(this,e);this._proxyFactory=new d(this);this._endpointFactoryManager=new i(this);var h=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",false);var w=new Ice.TcpEndpointFactory(h);this._endpointFactoryManager.add(w);var E=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",false);var x=new Ice.WSEndpointFactory(E,w.clone(E));this._endpointFactoryManager.add(x);var S=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",true);var b=new Ice.TcpEndpointFactory(S);this._endpointFactoryManager.add(b);var C=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",true);var P=new Ice.WSEndpointFactory(C,b.clone(C));this._endpointFactoryManager.add(P);this._outgoingConnectionFactory=new l(e,this);this._servantFactoryManager=new u;this._objectAdapterFactory=new a(this,e);this._retryQueue=new p(this);this._timer=new I(this._initData.logger);var M=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));if(M!==null){this._referenceFactory=this._referenceFactory.setDefaultRouter(M)}var O=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));if(O!==null){this._referenceFactory=this._referenceFactory.setDefaultLocator(O)}if(t!==null){t.succeed(e)}}catch(k){if(t!==null){if(k instanceof Ice.LocalException){this.destroy().finally(function(){t.fail(k)})}else{t.fail(k)}}else{if(k instanceof Ice.LocalException){this.destroy()}throw k}}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(this._state==E){if(!this._destroyPromises){this._destroyPromises=[]}this._destroyPromises.push(t);return t}this._state=E;var n=this;Ice.Promise.try(function(){if(n._objectAdapterFactory){return n._objectAdapterFactory.shutdown()}}).then(function(){if(n._outgoingConnectionFactory!==null){n._outgoingConnectionFactory.destroy()}if(n._objectAdapterFactory!==null){return n._objectAdapterFactory.destroy()}}).then(function(){if(n._outgoingConnectionFactory!==null){return n._outgoingConnectionFactory.waitUntilFinished()}}).then(function(){if(n._retryQueue){n._retryQueue.destroy()}if(n._timer){n._timer.destroy()}if(n._servantFactoryManager){n._servantFactoryManager.destroy()}if(n._routerManager){n._routerManager.destroy()}if(n._locatorManager){n._locatorManager.destroy()}if(n._endpointFactoryManager){n._endpointFactoryManager.destroy()}var e;if(n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var i=n._initData.properties.getUnusedProperties();if(i.length>0){var r=[];r.push("The following properties were set but never read:");for(e=0;e<i.length;++e){r.push("\n    ");r.push(i[e])}n._initData.logger.warning(r.join(""))}}n._objectAdapterFactory=null;n._outgoingConnectionFactory=null;n._retryQueue=null;n._timer=null;n._servantFactoryManager=null;n._referenceFactory=null;n._requestHandlerFactory=null;n._proxyFactory=null;n._routerManager=null;n._locatorManager=null;n._endpointFactoryManager=null;n._state=x;if(this._destroyPromises){for(e=0;e<this._destroyPromises.length;++e){this._destroyPromises[e].succeed(this._destroyPromises[e])}}t.succeed(t)}).exception(function(e){if(this._destroyPromises){for(var n=0;n<this._destroyPromises.length;++n){this._destroyPromises[n].fail(e,this._destroyPromises[n])}}t.fail(e,t)});return t}});Ice.Instance=S})();(function(){var e=Ice.Instance;var t=Ice.Promise;var n=Ice.Class({__init__:function(t){this._instance=new e(t)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);this._instance.objectAdapterFactory().createObjectAdapter(e,null,t);return t},createObjectAdapterWithEndpoints:function(e,t){if(e.length===0){e=Ice.generateUUID()}this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);this._instance.objectAdapterFactory().createObjectAdapter(e,null,n);return n},createObjectAdapterWithRouter:function(e,t){if(e.length===0){e=Ice.generateUUID()}var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null);var i=this.proxyToProperty(t,e+".Router");for(var r=i.entries;r!==null;r=r.next){this.getProperties().setProperty(r.key,r.value)}this._instance.objectAdapterFactory().createObjectAdapter(e,t,n);return n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}});Object.defineProperty(n.prototype,"instance",{get:function(){return this._instance}});Ice.Communicator=n})();(function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null;this.logger=null};Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;e.properties=this.properties;e.logger=this.logger;return e};Ice.initialize=function(e,t){var n=null;var i=null;if(e instanceof Array){n=e}else if(e instanceof Ice.InitializationData){i=e}else if(e!==undefined&&e!==null){throw new Ice.InitializationException("invalid argument to initialize")}if(t!==undefined&&t!==null){if(t instanceof Ice.InitializationData&&i===null){i=t}else{throw new Ice.InitializationException("invalid argument to initialize")}}if(i===null){i=new Ice.InitializationData}else{i=i.clone()}i.properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);r.finishSetup(null);return r};Ice.createProperties=function(e,t){return new Ice.Properties(e,t)};Ice.currentProtocol=function(){return e.currentProtocol.clone()};Ice.currentEncoding=function(){return e.currentEncoding.clone()}})();e.Ice=Ice;e.IceMX=IceMX;e.IceSSL=IceSSL})();