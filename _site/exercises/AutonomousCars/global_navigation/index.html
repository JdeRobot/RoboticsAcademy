<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Global Navigation using TeleTaxi - Robotics-Academy</title>
<meta name="description" content="A practical and fun way of learning Robotics and Computer Vision">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Robotics-Academy">
<meta property="og:title" content="Global Navigation using TeleTaxi">
<meta property="og:url" content="http://localhost:4000/exercises/AutonomousCars/global_navigation/">












  

  


<link rel="canonical" href="http://localhost:4000/exercises/AutonomousCars/global_navigation/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "JdeRobot",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Robotics-Academy Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="icon" type="image/png" href="/assets/images/logo.png" sizes="16x16">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Robotics-Academy
          <span class="site-subtitle">by JdeRobot organization</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/exercises/" >Exercises</a>
            </li><li class="masthead__menu-item">
              <a href="/installation/" >Installation</a>
            </li><li class="masthead__menu-item">
              <a href="https://forum.jderobot.org/c/english/roboticsacademy" >Forum</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/exercises/"><span class="nav__sub-title">Exercises</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/exercises/autonomous_cars_section" class="">Autonomous Driving</a></li>
          
            
            

            
            

            <li><a href="/exercises/mobile_robots_section" class="">Service Robots</a></li>
          
            
            

            
            

            <li><a href="/exercises/drones_section" class="">Drones</a></li>
          
            
            

            
            

            <li><a href="/exercises/computer_vision_section" class="">Computer Vision</a></li>
          
            
            

            
            

            <li><a href="/exercises/industrial_robots_section" class="">Industrial Robots</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Contribute</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/roadmap/" class="">Roadmap</a></li>
          
            
            

            
            

            <li><a href="/contribute/" class="">How to contribute</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Global Navigation using TeleTaxi">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Global Navigation using TeleTaxi
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-cog"></i> TOC Global Navigation</h4></header>
              <ul class="toc__menu">
  <li><a href="#versions-to-run-the-exercise">Versions to run the exercise</a></li>
  <li><a href="#goal">Goal</a></li>
  <li><a href="#instructions-for-web-template">Instructions for Web Template</a>
    <ul>
      <li><a href="#installation">Installation</a>
        <ul>
          <li><a href="#enable-gpu-acceleration-for-advanced-users">Enable GPU Acceleration (For advanced users)</a></li>
        </ul>
      </li>
      <li><a href="#how-to-perform-the-exercise">How to perform the exercise?</a></li>
      <li><a href="#using-the-interface">Using the Interface</a></li>
    </ul>
  </li>
  <li><a href="#instructions-for-rosnode-template">Instructions for ROSNode Template</a>
    <ul>
      <li><a href="#installation-1">Installation</a></li>
    </ul>
  </li>
  <li><a href="#how-to-run-your-solution">How to run your solution</a></li>
  <li><a href="#how-to-do-the-practice">How to do the practice</a>
    <ul>
      <li><a href="#where-to-insert-the-code">Where to insert the code</a></li>
      <li><a href="#api">API</a></li>
      <li><a href="#own-api">Own API</a></li>
    </ul>
  </li>
  <li><a href="#theory">Theory</a>
    <ul>
      <li><a href="#gradient-path-planning">Gradient Path Planning</a>
        <ul>
          <li><a href="#wave-front-algorithm">Wave Front Algorithm</a></li>
        </ul>
      </li>
      <li><a href="#sampling-based-path-planning">Sampling Based Path Planning</a>
        <ul>
          <li><a href="#probabilistic-roadmap">Probabilistic Roadmap</a></li>
          <li><a href="#tree-based-planner">Tree Based Planner</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#hints">Hints</a>
    <ul>
      <li><a href="#path-planning">Path Planning</a></li>
      <li><a href="#path-navigation">Path Navigation</a></li>
    </ul>
  </li>
  <li><a href="#demonstrative-video">Demonstrative Video</a></li>
  <li><a href="#contributors">Contributors</a></li>
  <li><a href="#references">References</a></li>
</ul>
            </nav>
          </aside>
        
        <h2 id="versions-to-run-the-exercise">Versions to run the exercise</h2>

<p>Currently, there are 2 versions for running this exercise:</p>

<ul>
  <li>ROSNode Templates</li>
  <li>Web Templates(Current Release)</li>
</ul>

<p>The instructions for both of them are provided as follows.</p>

<h2 id="goal">Goal</h2>

<p>The objective of this practice is to implement the logic of a Gradient Path Planning (GPP) algorithm. Global navigation through GPP, consists of:</p>

<figure class="third ">
  
    
      <a href="/assets/images/exercises/global_navigation/global_navigation.png" title="City View.">
        <img src="/assets/images/exercises/global_navigation/global_navigation.png" alt="City View." />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/global_navigation_teaser.png" title="GUI.">
        <img src="/assets/images/exercises/global_navigation/global_navigation_teaser.png" alt="GUI." />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/taxi.png" title="Model.">
        <img src="/assets/images/exercises/global_navigation/taxi.png" alt="Model." />
      </a>
    
  
  
    <figcaption>Gallery
</figcaption>
  
</figure>

<ul>
  <li>
    <p>Selected a destination, the GPP algorithm is responsible for finding the shortest path to it, avoiding, in the case of this practice, everything that is not road.</p>
  </li>
  <li>
    <p>Once the path has been selected, the logic necessary to follow this path and reach the objective must be implemented in the robot.</p>
  </li>
</ul>

<p>With this, it is possible for the robot to go to the marked destination autonomously and following the shortest path.</p>

<p>The solution can integrate one or more of the following levels of difficulty, as well as any other one that occurs to you:</p>

<ul>
  <li>
    <p>Reach the goal.</p>
  </li>
  <li>
    <p>Optimize the way to find the shortest path.</p>
  </li>
  <li>
    <p>Arrive as quickly as possible to the destination.</p>
  </li>
</ul>

<h2 id="instructions-for-web-template">Instructions for Web Template</h2>
<p>This is the preferred way for running the exercise.</p>

<h3 id="installation">Installation</h3>
<ul>
  <li>Clone the Robotics Academy repository on your local machine</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/JdeRobot/RoboticsAcademy
</code></pre></div></div>

<ul>
  <li>
    <p>Download <a href="https://docs.docker.com/get-docker/">Docker</a>. Windows users should choose WSL 2 backend Docker installation if possible, as it has better performance than Hyper-V.</p>
  </li>
  <li>
    <p>Pull the current distribution of Robotics Academy Docker Image</p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull jderobot/robotics-academy:3.1.3
</code></pre></div></div>

<ul>
  <li>In order to obtain optimal performance, Docker should be using multiple CPU cores. In case of Docker for Mac or Docker for Windows, the VM should be assigned a greater number of cores.</li>
</ul>

<h4 id="enable-gpu-acceleration-for-advanced-users">Enable GPU Acceleration (For advanced users)</h4>
<ul>
  <li>For Linux machines with NVIDIA GPUs, acceleration can be enabled by using NVIDIA proprietary drivers and executing the following docker run command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">--device</span> /dev/dri <span class="nt">-p</span> 8000:8000 <span class="nt">-p</span> 2303:2303 <span class="nt">-p</span> 1905:1905 <span class="nt">-p</span> 8765:8765 <span class="nt">-p</span> 6080:6080 <span class="nt">-p</span> 1108:1108 jderobot/robotics-academy:3.1.3 ./start-3.1.sh
</code></pre></div>    </div>
  </li>
  <li>For Windows machines, GPU acceleration to Docker is an experimental approach and can be implemented as per instructions given <a href="https://www.docker.com/blog/wsl-2-gpu-support-is-here/">here</a></li>
</ul>

<h3 id="how-to-perform-the-exercise">How to perform the exercise?</h3>
<ul>
  <li>Start a new docker container of the image and keep it running in the background</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">-p</span> 8000:8000 <span class="nt">-p</span> 2303:2303 <span class="nt">-p</span> 1905:1905 <span class="nt">-p</span> 8765:8765 <span class="nt">-p</span> 6080:6080 <span class="nt">-p</span> 1108:1108 jderobot/robotics-academy:3.1.3 ./start-3.1.sh
</code></pre></div></div>

<ul>
  <li>
    <p>On the local machine navigate to 127.0.0.1:8000/ in the browser and choose the desired exercise.</p>
  </li>
  <li>
    <p>Click the connect button and wait for some time until an alert appears with the message <code class="language-plaintext highlighter-rouge">Connection Established</code> and button displays connected.</p>
  </li>
  <li>
    <p>The exercise can be used after the alert.</p>
  </li>
</ul>

<p><strong>Where to insert the code?</strong></p>

<p>In the launched webpage, type your code in the text editor,</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">GUI</span> <span class="kn">import</span> <span class="n">GUI</span>
<span class="kn">from</span> <span class="nn">HAL</span> <span class="kn">import</span> <span class="n">HAL</span>
<span class="c1"># Enter sequential code!
</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Enter iterative code!
</span></code></pre></div></div>

<h3 id="using-the-interface">Using the Interface</h3>

<ul>
  <li>
    <p><strong>Control Buttons</strong>: The control buttons enable the control of the interface. Play button sends the code written by User to the Robot. Stop button stops the code that is currently running on the Robot. Save button saves the code on the local machine. Load button loads the code from the local machine. Reset button resets the simulation(primarily, the position of the robot).</p>
  </li>
  <li>
    <p><strong>Frequency Slider</strong>: This slider adjusts the running frequency of the iterative part of the code(under the <code class="language-plaintext highlighter-rouge">while True:</code>). A smaller value implies the code runs less number of times. A higher value implies the code runs a large number of times. The Target Frequency is the one set on the Slider and Measured Frequency is the one measured by the computer(a frequency of execution the computer is able to maintain despite the commanded one). The student should adjust the Target Frequency according to the Measured Frequency.</p>
  </li>
  <li>
    <p><strong>Debug Level</strong>: This decides the debugging level of the code. A debug level of 1 implies no debugging at all. At this level, all the GUI functions written by the student are automatically removed when the student sends the code to the robot. A debug level greater than or equal to 2 enables all the GUI functions working properly.</p>
  </li>
  <li>
    <p><strong>Psuedo Console</strong>: This shows the error messages related to the student’s code that is sent. In order to print certain debugging information on this console. The student can use the <code class="language-plaintext highlighter-rouge">print()</code> command in the Editor.</p>
  </li>
</ul>

<p><strong>Application Programming Interface</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">from HAL import HAL</code> - to import the HAL(Hardware Abstraction Layer) library class. This class contains the functions that sends and receives information to and from the Hardware(Gazebo).</li>
  <li><code class="language-plaintext highlighter-rouge">from GUI import GUI</code> - to import the GUI(Graphical User Interface) library class. This class contains the functions used to view the debugging information, like image widgets.</li>
  <li><code class="language-plaintext highlighter-rouge">from MAP import MAP</code> - This class contains functions that interact with data related to the map and Gazebo world.</li>
  <li><code class="language-plaintext highlighter-rouge">HAL.motors.sendV()</code> - to set the linear speed</li>
  <li><code class="language-plaintext highlighter-rouge">HAL.motors.sendW()</code> - to set the angular velocity</li>
  <li><code class="language-plaintext highlighter-rouge">HAL.getPose()</code> - returns x,y and theta components in the world</li>
  <li><code class="language-plaintext highlighter-rouge">GUI.showGPP(img)</code> - shows Gradient Path Planning field on the web-template. It represents the values ​​of the field that have been assigned to the grid. The smaller values ​​will have a color closer to black, and will become clearer as larger values ​​are involved. For the representation, a copy of the grid is made and its values ​​are normalized so that they are between 0 and 1, and it is represented later with cv2.imshow()</li>
  <li><code class="language-plaintext highlighter-rouge">GUI.showPath(array)</code> - shows ideal path on the map and the parameter should be 2D array</li>
  <li><code class="language-plaintext highlighter-rouge">GUI.targetPose</code> - returns x,y coordinates of chosen destionation in the world</li>
  <li><code class="language-plaintext highlighter-rouge">MAP.getMap()</code> - Map image opencv data in opencv data</li>
  <li><code class="language-plaintext highlighter-rouge">MAP.robotPose()</code> - returns x,y coordinates of robot on the map</li>
  <li><code class="language-plaintext highlighter-rouge">MAP.setGridVal(x, y, val)</code> - sets the value val to the indicated position on the map</li>
  <li><code class="language-plaintext highlighter-rouge">MAP.getGridVal(x, y)</code> - returns the value in that grid position on the map</li>
  <li><code class="language-plaintext highlighter-rouge">MAP.gridToWorld(x, y)</code> - returns translated x,y coordinates in the world</li>
  <li><code class="language-plaintext highlighter-rouge">MAP.worldToGrid(x, y)</code> - returns translated x,y coordinates on the map</li>
</ul>

<h2 id="instructions-for-rosnode-template">Instructions for ROSNode Template</h2>

<h3 id="installation-1">Installation</h3>
<p>Install the <a href="https://jderobot.github.io/RoboticsAcademy/installation/#generic-infrastructure">General Infrastructure</a> of the JdeRobot Robotics Academy.</p>

<h2 id="how-to-run-your-solution">How to run your solution</h2>

<p>Navigate to the global_navigation directory</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>exercises/global_navigation
</code></pre></div></div>

<p>Launch Gazebo with the tele_taxi world through the command</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>roslaunch ./launch/tele_taxi.launch
</code></pre></div></div>

<p>Execute the practice’s component indicating the configuration file for the map:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python2 globalNavigation.py taxiMap.conf
</code></pre></div></div>

<h2 id="how-to-do-the-practice">How to do the practice</h2>
<p>To carry out the practice, you must edit the file MyAlgorithm.py and insert all the functionality in it.</p>

<h3 id="where-to-insert-the-code">Where to insert the code</h3>
<p>There are two parts in which the code should be inserted:</p>

<ul>
  <li>The part related to finding the shortest path must be located inside the 
generatePath function, which is executed only when the button is pressed in 
the GUI MyAlgorithm.py</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generatePath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="k">print</span> <span class="s">"LOOKING FOR SHORTER PATH"</span>
        <span class="n">mapIm</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">grid</span><span class="p">.</span><span class="n">getMap</span><span class="p">()</span>      
        <span class="n">dest</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">grid</span><span class="p">.</span><span class="n">getDestiny</span><span class="p">()</span>   
        <span class="n">gridPos</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">grid</span><span class="p">.</span><span class="n">getPose</span><span class="p">()</span>

        <span class="c1"># TODO
</span></code></pre></div></div>

<ul>
  <li>The code that will allow the robot to reach the destination will be placed in 
the execute function, which is executed periodically. 
MyAlgorithm.py</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Add your code here
</span>        <span class="k">print</span> <span class="s">"GOING TO DESTINATION"</span>
</code></pre></div></div>

<h3 id="api">API</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">sensor.getRobotX()</code> - to obtain the position of the robot</li>
  <li><code class="language-plaintext highlighter-rouge">sensor.getRobotY()</code> - to obtain the position of the robot</li>
  <li><code class="language-plaintext highlighter-rouge">sensor.getRobotTheta()</code> - to obtain the orientation of the robot with respect to the map</li>
  <li><code class="language-plaintext highlighter-rouge">vel.setV()</code> - to set the linear speed</li>
  <li><code class="language-plaintext highlighter-rouge">vel.setW()</code> - to set the angular velocity</li>
</ul>

<h3 id="own-api">Own API</h3>
<p>This component, is related both to the world and the map. To simplify this, we 
have a grid object with the following functions:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">grid.getMap()</code> - returns the image of the map that is being displayed. 
The image returned will be a 3-channel image with values 0 or 255, 
where 0 represents the obstacles and 255 the road. Although the image has 3 
channels, for this practice it will be useful to use only one.</li>
  <li><code class="language-plaintext highlighter-rouge">grid.getDestiny()</code> - returns the selected destination through the GUI as 
a tuple (x, y).</li>
  <li><code class="language-plaintext highlighter-rouge">grid.getPose()</code> - returns the position with respect to the map, not with 
respect to the world, also as a tuple (x, y).</li>
  <li><code class="language-plaintext highlighter-rouge">gird.showGrid()</code> - creates a window in which represents the values ​​of the 
field that have been assigned to the grid. The smaller values ​​will have a color 
closer to black, and will become clearer as larger values ​​are involved. For the 
representation, a copy of the grid is made and its values ​​are normalized so that 
they are between 0 and 1, and it is represented later with cv2.imshow().</li>
</ul>

<p>The Grid class also provides a grid, on which to point the distance to the 
destination. The values ​​of this grid are float type. The size and positions of 
the grid match that of the image. To interact with it:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">grid.getVal(x, y)</code> - returns the value in that grid position.</li>
  <li><code class="language-plaintext highlighter-rouge">grid.setVal(x, y, val)</code> - sets the value val to the indicated position.</li>
</ul>

<p>This class also offers another grid on which the path should be pointed once found. 
Points with value 0 will be ignored, higher values ​​will be considered path. 
The functions to interact are:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">grid.setPathVal(x, y, val)</code> - sets the value val to the indicated position.</li>
  <li><code class="language-plaintext highlighter-rouge">grid.getPathVal(x, y)</code> - returns the value of the indicated position.</li>
  <li><code class="language-plaintext highlighter-rouge">grid.setPathFinded()</code> - establishes that the path has been found to start painting.</li>
</ul>

<p>Finally, the grid object also offers functions to move from world coordinates to 
map coordinates and vice versa:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">gridToWorld(gridX, gridY)</code> - receives the x and y components of the coordinates 
of the map and returns a tuple with the equivalent coordinates in the world: (worldX, worldY)</li>
  <li><code class="language-plaintext highlighter-rouge">worldToGrid(worldX, worldY)</code> - receives the x and y components of the world 
coordinates and returns a tuple with the equivalent coordinates in the map: (gridX, gridY)</li>
</ul>

<p><strong>REMEMBER</strong>: Once running, double click in any point of the map to set destination, then click on “Generate Path” and finally click “GO” to see the result.</p>

<h2 id="theory">Theory</h2>

<p>Motion Planning is a term used in robotics to find a sequence of valid configurations that moves the robot from source to destination. Motion Planning algorithms find themselves in a variety of settings, be it industrial manipulators, mobile robots, artificial intelligence, animations or study of biological molecules.</p>

<p>There are mainly 2 methods to solve the exercise, <strong>Gradient Path Planning</strong>, <strong>Sampling Based Path Planning</strong></p>

<h3 id="gradient-path-planning">Gradient Path Planning</h3>
<p>One such method for Motion Planning is Gradient Path Planning. GPP works on the principle of potential fields. The obstacles in the path serve as potential wall to the path planner, and the target serve as potential well. By combining all the potential walls and wells, a path is constructed as a downward slope. The robot follows that path to reach it’s destination.</p>

<figure class="third ">
  
    
      <a href="/assets/images/exercises/global_navigation/potential_drop.png" title="Potential Drop">
        <img src="/assets/images/exercises/global_navigation/potential_drop.png" alt="Potential Drop" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/potential_well.png" title="Potential Well">
        <img src="/assets/images/exercises/global_navigation/potential_well.png" alt="Potential Well" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/potential_wall.png" title="Potential Wall">
        <img src="/assets/images/exercises/global_navigation/potential_wall.png" alt="Potential Wall" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/total_potential.png" title="Total Potential">
        <img src="/assets/images/exercises/global_navigation/total_potential.png" alt="Total Potential" />
      </a>
    
  
  
    <figcaption>Various illustrations based on potential
</figcaption>
  
</figure>

<p>Gradient Path Planning can be implemented using Brushfire Algorithm or Wave Front Algorithm. Next section explains the working of Wave Front Algorithm.</p>

<h4 id="wave-front-algorithm">Wave Front Algorithm</h4>

<p>Wave Front Algorithm is BFS based approach to build a path from source to destination. The algorithm works by assigning weights to a grid of cells. Given the source and target, the algorithm starts from the target node and moves outwards like a ripple, while progressively assigning weights to the neighboring cells.</p>

<p><img src="http://localhost:4000/RoboticsAcademy/assets/images/exercises/global_navigation/weights.png" alt="Assigning Weights" /></p>

<p><em>Assigning Weights</em></p>

<p>As for obstacles, additional weights are added to the cells that are close to obstacles. Intuitively, the weights represent the superposition of waves that are reflected from the walls of obstacles.</p>

<p><img src="http://localhost:4000/RoboticsAcademy/assets/images/exercises/global_navigation/superposition.gif" alt="Superposition of Waves" /></p>

<p><em>Superposition of Waves</em></p>

<p>The algorithm stops upon reaching the source. To navigate through the generated path, the robot follows the path indicated by decreasing weights (a downhill drive). A grayscale image representation quite clearly depicts the path the robot might follow!</p>

<p><img src="http://localhost:4000/RoboticsAcademy/assets/images/exercises/global_navigation/grayscale.png" alt="GrayScale Representation" /></p>

<p><em>Gray Scale Representation</em></p>

<h3 id="sampling-based-path-planning">Sampling Based Path Planning</h3>

<p>Sampling based Path Planning employs sampling of the state space of the robot in order to quickly and effectively plan paths, even with differential constraints or those with many degrees of freedom. Some of the algorithms under this class are:</p>

<h4 id="probabilistic-roadmap">Probabilistic Roadmap</h4>

<p>These methods work by randomly sampling points in the <strong>workspace</strong>. Once the desired number of samples are obtained, the roadmap is constructed by connecting the random samples to form edges. On the resulting graph formed, any shortest path algorithm (A*, Dijkstra, BFS) is applied to get our resulting path.</p>

<figure class="third ">
  
    
      <a href="/assets/images/exercises/global_navigation/pr1.png" title="Step1">
        <img src="/assets/images/exercises/global_navigation/pr1.png" alt="Step1" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/pr2.png" title="Step2">
        <img src="/assets/images/exercises/global_navigation/pr2.png" alt="Step2" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/pr3.png" title="Step3">
        <img src="/assets/images/exercises/global_navigation/pr3.png" alt="Step3" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/pr4.png" title="Step4">
        <img src="/assets/images/exercises/global_navigation/pr4.png" alt="Step4" />
      </a>
    
  
  
    <figcaption>Probabilistic Roadmap
</figcaption>
  
</figure>

<h4 id="tree-based-planner">Tree Based Planner</h4>

<p>Tree Based Planners are very similar to Probabilistic Roadmaps, except for the fact that there are no cycles involved in tree based planners. There are a variety of tree based planners, like RRT, EST, SBL and KPIECE. These algorithms work heuristically, working from the root node, a tree (a graph without cycles) is constructed.</p>

<figure class="third ">
  
    
      <a href="/assets/images/exercises/global_navigation/tr1.png" title="Step1">
        <img src="/assets/images/exercises/global_navigation/tr1.png" alt="Step1" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/tr2.png" title="Step2">
        <img src="/assets/images/exercises/global_navigation/tr2.png" alt="Step2" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/tr3.png" title="Step3">
        <img src="/assets/images/exercises/global_navigation/tr3.png" alt="Step3" />
      </a>
    
  
  
    <figcaption>Tree Based Planner
</figcaption>
  
</figure>

<h2 id="hints">Hints</h2>

<p>Simple hints provided to help you solve the global navigation exercise. The hints are focused on solving the exercise through GPP algorithm.</p>

<h3 id="path-planning">Path Planning</h3>

<p>Since, the map has already been divided into grids, we can directly work on the grid! Path Planning involves a BFS based search starting from the destination. The psuedo code for the algorithm is:</p>

<ul>
  <li><strong>Step1</strong>:	insert Target Node into priority queue</li>
  <li><strong>Step2</strong>:	c = pop node from priority queue</li>
  <li><strong>Step3</strong>:	if c == start node	End</li>
  <li><strong>Step4</strong>:	if c == obstacle	Save to another list and goto Step2</li>
  <li><strong>Step5</strong>:	assign weight to neighbors of c if <strong>previously unassigned</strong></li>
  <li><strong>Step6</strong>:	insert neighbors of c to priority queue</li>
  <li><strong>Step7</strong>:	goto Step2</li>
</ul>

<p>Assignment of weights to the cells is arbitrary. Generally, diagonally neighboring cells are assigned a greater weight than the other neighbors. Apart from all the assignment, the additional weight of cells close to obstacles is extremely important, as it is the one that is going to help avoid collisions!</p>

<p><strong>Important Points to Remember</strong></p>

<ul>
  <li>
    <p>You may use <code class="language-plaintext highlighter-rouge">self.grid.getMap()</code> to know whether an obstacle is present at (i, j) coordinate of the map. Also, in order to work with this grid, we have to invert our usage of coordinates. Implying, (i, j) can be accessed using (j, i).</p>
  </li>
  <li>
    <p>In order to assign those extra weights, we may take the obstacle points we saved earlier, and add extra values to the neighbors of the obstacle cell afterwards.</p>
  </li>
</ul>

<h3 id="path-navigation">Path Navigation</h3>

<p>The next step involves Path Navigation. We can start by defining the low level implementation like linear speed and angular speed. Using the orientation of the robot, distance and direction of the target, linear speed and angular speeds can be assigned to the robot.</p>

<p>For navigating effectively, we assign local goal points which eventually lead to the final destination. These local goal points can be selected by choosing 2 points, which occur one after the another <strong>recursively</strong>.</p>

<p>Also, make sure that the selection is done from a big enough radius, otherwise during navigation the robot may pass the grid and reach a <strong>local minima</strong>.</p>

<figure class="half ">
  
    
      <a href="/assets/images/exercises/global_navigation/miss.gif" title="examples">
        <img src="/assets/images/exercises/global_navigation/miss.gif" alt="examples" />
      </a>
    
  
    
      <a href="/assets/images/exercises/global_navigation/two_step.gif" title="examples">
        <img src="/assets/images/exercises/global_navigation/two_step.gif" alt="examples" />
      </a>
    
  
  
    <figcaption>Choose a large radius to avoid missing on turns (left) - Select the next point conditioned on the first point we select, and then plan accordingly (right)
</figcaption>
  
</figure>

<p>All in all, the exercise is a little on the tough side. But spending time with this exercise, all the bugs, issues and hints provided may make sense!</p>

<h2 id="demonstrative-video">Demonstrative Video</h2>

<p>Global Navigation with GPP:</p>

<div class="embed-container">
  <iframe src="https://www.youtube.com/embed/zUtK6seVL5g" width="700" height="480" frameborder="0" allowfullscreen="">
  </iframe>
</div>

<p><br /></p>

<div class="embed-container">
  <iframe src="https://www.youtube.com/embed/q6G6BHqljP4" width="700" height="480" frameborder="0" allowfullscreen="">
  </iframe>
</div>

<p><br /></p>

<p>Global Navigation teletaxi with OMPL:</p>

<div class="embed-container">
  <iframe src="https://www.youtube.com/embed/itTbU4uLwfE" width="700" height="480" frameborder="0" allowfullscreen="">
  </iframe>
</div>

<p><br /></p>

<div class="embed-container">
  <iframe src="https://www.youtube.com/embed/zcS4X-ZO68U" width="700" height="480" frameborder="0" allowfullscreen="">
  </iframe>
</div>

<h2 id="contributors">Contributors</h2>

<ul>
  <li>Contributors: <a href="https://github.com/almartinflorido">Alberto Martín</a>, <a href="https://github.com/chanfr">Francisco Rivas</a>, <a href="https://github.com/fqez">Francisco Pérez</a>, <a href="https://github.com/jmplaza">Jose María Cañas</a>, <a href="https://github.com/igarag">Nacho Arranz</a>, <a href="https://github.com/NayOoLwin5">Nay Oo Lwin</a>.</li>
  <li>Maintained by <a href="https://github.com/SakshayMahna">Sakshay Mahna</a>.</li>
</ul>

<h2 id="references">References</h2>
<p><a href="https://en.wikipedia.org/wiki/Motion_planning">1</a>
<a href="http://ompl.kavrakilab.org/OMPL_Primer.pdf">2</a>
<a href="https://gsyc.urjc.es/jmplaza/students/tfg-Robotics_Academy-vanessa_fernandez-2017.pdf">3</a>
<a href="https://www.cs.cmu.edu/~motionplanning/lecture/Chap4-Potential-Field_howie.pdf">4</a></p>


        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/jderobot" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/JdeRobot/RoboticsAcademy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
          <li><a href="https://www.youtube.com/channel/UCgmUgpircYAv_QhLQziHJOQ" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> Youtube</a></li>
        
      
    

   <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 JdeRobot. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>


      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
  </script>
  <script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       extensions: ["tex2jax.js"],
       jax: ["input/TeX", "output/HTML-CSS"],
       tex2jax: {
         inlineMath: [ ['$','$'], ["\\(","\\)"] ],
         displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
         processEscapes: true
       },
       "HTML-CSS": { availableFonts: ["TeX"] }
     });
  </script>










  </body>
</html>
